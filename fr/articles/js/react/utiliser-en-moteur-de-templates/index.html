<!doctype html><html lang="en"><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="viewport" content="width=device-width, initial-scale=1" /><link rel="stylesheet" href="/statinamic-client.css" /><meta data-react-helmet="true" property="og:site_name" content="Putain de code !"/><meta data-react-helmet="true" name="twitter:site" content="@putaindecode_fr"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Utiliser React en moteur de templates"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="Utiliser React en moteur de templates"/><meta data-react-helmet="true" name="twitter:creator" content="@MoOx"/><title data-react-helmet="true">Utiliser React en moteur de templates</title></head><body><div id="statinamic"><div id="statinamic-container" data-reactid=".1loz6xnefb4" data-react-checksum="-790055287"><div class="r-VerticalRhythm" lang="fr" data-reactid=".1loz6xnefb4.0"><div data-reactid=".1loz6xnefb4.0.0"><noscript data-reactid=".1loz6xnefb4.0.0.0:0"></noscript><div class="putainde-Header" data-reactid=".1loz6xnefb4.0.0.0:1"><div class="r-Grid" data-reactid=".1loz6xnefb4.0.0.0:1.0"><div class="r-Grid-cell r-minM--1of3" data-reactid=".1loz6xnefb4.0.0.0:1.0.0"><a class="putainde-SiteTitle" href="/" data-reactid=".1loz6xnefb4.0.0.0:1.0.0.0"><span class="SVGIcon SVGIcon--cleaned putainde-Logo" data-reactid=".1loz6xnefb4.0.0.0:1.0.0.0.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Logo-svg" xmlns="http://www.w3.org/2000/svg" viewBox="-49.5 652.5 512 512"><radialGradient id="a" cx="206.455" cy="-395.01" r="243.791" gradientTransform="matrix(.9784 0 0 -.9765 4.504 505.604)" gradientUnits="userSpaceOnUse"><stop offset=".8"/><stop offset=".95" stop-color="#333"/></radialGradient><linearGradient id="b" gradientUnits="userSpaceOnUse" x1="-34" y1="-376.331" x2="447" y2="-376.331" gradientTransform="matrix(1 0 0 -1 0 515)"><stop offset="0" stop-color="#333"/><stop offset="1"/></linearGradient><path vector-effect="non-scaling-stroke" opacity=".4" fill="url(#a)" stroke="url(#b)" stroke-miterlimit="10" d="M-33.5,891.331c0-130.655,107.456-236.581,240.01-236.581c132.535,0,239.99,105.927,239.99,236.581 c0,130.653-107.455,236.581-239.99,236.581C73.956,1127.911-33.5,1021.984-33.5,891.331z"/><linearGradient id="c" gradientUnits="userSpaceOnUse" x1="-34.5" y1="-377.169" x2="447.5" y2="-377.169" gradientTransform="matrix(1 0 0 -1 0 515)"><stop offset="0" stop-color="#333"/><stop offset="1"/></linearGradient><path opacity=".2" fill="none" stroke="url(#c)" stroke-width="2" stroke-miterlimit="10" d="M-33.5,892.169c0-130.655,107.456-236.581,240.01-236.581c132.535,0,239.99,105.928,239.99,236.581 c0,130.654-107.455,236.581-239.99,236.581C73.956,1128.75-33.5,1022.824-33.5,892.169z"/><g><linearGradient id="d" gradientUnits="userSpaceOnUse" x1="30.247" y1="427.851" x2="30.247" y2="228.319" gradientTransform="matrix(2.3906 0 0 -2.3906 134.192 1708.07)"><stop offset="0" stop-color="#FFF"/><stop offset="1" stop-color="#EEE"/></linearGradient><path vector-effect="non-scaling-stroke" fill="url(#d)" stroke="#7A7A7A" stroke-miterlimit="10" d="M1,889.671c0,112.916,92.003,204.444,205.51,204.444c1.283,0,2.565-0.019,3.828-0.04c19.795,40.379,61.281,68.175,109.258,68.175 c3.686,0,7.334-0.157,10.941-0.481c-20.401-23.875-33.307-54.348-35.07-87.771C364.424,1041.018,412,970.873,412,889.673 c0-112.894-92.004-204.423-205.49-204.423C93.004,685.247,1,776.777,1,889.671z"/><path fill="none" stroke="#7A7A7A" stroke-width="2" stroke-miterlimit="10" d="M1,889.671 c0,112.916,92.003,204.444,205.51,204.444c1.283,0,2.565-0.019,3.828-0.04c19.795,40.379,61.281,68.175,109.258,68.175 c3.686,0,7.334-0.157,10.941-0.481c-20.401-23.875-33.307-54.348-35.07-87.771C364.424,1041.018,412,970.873,412,889.673 c0-112.894-92.004-204.423-205.49-204.423C93.004,685.247,1,776.777,1,889.671z"/></g><g stroke="#333333" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"><path vector-effect="non-scaling-stroke" fill="#444444" d="M187.747,832.25H132.5v123h27.551v-45.188h28.086c7.596,0,14.055-1.102,19.378-3.302c5.323-2.196,9.656-5.138,13.019-8.745 c3.364-3.605,5.801-7.795,7.327-12.498c1.527-4.707,2.312-9.494,2.312-14.363c0-4.978-0.785-9.807-2.312-14.428 c-1.567-4.625-4.024-8.789-7.387-12.396c-3.363-3.605-7.765-6.551-13.168-8.747C201.924,833.391,195.421,832.25,187.747,832.25z M181.225,889.979h-21.173v-37.641h21.173c3.096,0,6.107,0.227,8.996,0.704c2.891,0.478,5.428,1.411,7.635,2.738 c2.187,1.346,3.941,3.274,5.285,5.698c1.319,2.463,1.979,5.679,1.979,9.682s-0.66,7.253-1.979,9.68 c-1.344,2.486-3.1,4.395-5.285,5.742c-2.207,1.327-4.744,2.236-7.635,2.695C187.334,889.753,184.32,889.979,181.225,889.979z"/><path fill="none" stroke-width="2" d="M187.747,832.25H132.5v123h27.551v-45.188h28.086c7.596,0,14.055-1.102,19.378-3.302c5.323-2.196,9.656-5.138,13.019-8.745 c3.364-3.605,5.801-7.795,7.327-12.498c1.527-4.707,2.312-9.494,2.312-14.363c0-4.978-0.785-9.807-2.312-14.428 c-1.567-4.625-4.024-8.789-7.387-12.396c-3.363-3.605-7.765-6.551-13.168-8.747C201.924,833.391,195.421,832.25,187.747,832.25z M181.225,889.979h-21.173v-37.641h21.173c3.096,0,6.107,0.227,8.996,0.704c2.891,0.478,5.428,1.411,7.635,2.738 c2.187,1.346,3.941,3.274,5.285,5.698c1.319,2.463,1.979,5.679,1.979,9.682s-0.66,7.253-1.979,9.68 c-1.344,2.486-3.1,4.395-5.285,5.742c-2.207,1.327-4.744,2.236-7.635,2.695C187.334,889.753,184.32,889.979,181.225,889.979z"/><g><path vector-effect="non-scaling-stroke" fill="#444444" d="M247.616,944.686c0,9.709,7.241,17.064,17.44,17.064c10.202,0,17.442-7.357,17.442-17.064c0-9.25-7.24-16.328-17.441-16.328 C254.855,927.592,247.616,934.95,247.616,944.686z M280.201,881.346V831.75h-30.292v49.596l6.886,37.639h16.521L280.201,881.346z"/><path fill="none" stroke-width="2" d="M247.616,944.686c0,9.709,7.241,17.064,17.44,17.064c10.202,0,17.442-7.357,17.442-17.064c0-9.25-7.24-16.328-17.441-16.328 C254.855,927.592,247.616,934.95,247.616,944.686z M280.201,881.346V831.75h-30.292v49.596l6.886,37.639h16.521L280.201,881.346z"/></g></g><g><linearGradient id="e" gradientUnits="userSpaceOnUse" x1="87.136" y1="385.394" x2="87.136" y2="297.549" gradientTransform="matrix(2.3906 0 0 -2.3906 134.192 1708.07)"><stop offset="0" stop-color="#c5372f"/><stop offset="1" stop-color="#900"/></linearGradient><path vector-effect="non-scaling-stroke" fill="url(#e)" stroke="#8B2721" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M314.164,970.195c2.755,0,4.955-0.561,6.592-1.577c1.639-1.095,2.916-2.451,3.854-4.009c0.923-1.614,1.519-3.43,1.758-5.362 c0.22-1.996,0.382-3.806,0.382-5.465v-36.5c0-4.823,0.895-8.829,2.715-11.96c1.818-3.09,3.978-5.622,6.469-7.516 c2.48-1.873,5.058-3.27,7.773-4.106c2.733-0.818,4.952-1.354,6.706-1.496v-0.697c-1.756-0.139-3.973-0.598-6.706-1.356 c-2.718-0.735-5.293-2.111-7.773-3.984c-2.491-1.895-4.648-4.564-6.469-7.994c-1.82-3.408-2.715-7.936-2.715-13.574v-34.669 c0-1.812-0.162-3.706-0.382-5.661c-0.239-1.955-0.837-3.769-1.758-5.363c-0.938-1.574-2.218-2.93-3.854-3.986 s-3.837-1.613-6.592-1.613H302.5V786.75h28.781c2.694,0,5.753,0.676,9.169,1.953c3.414,1.316,6.632,3.25,9.591,5.762 c2.953,2.532,5.449,5.741,7.53,9.669c2.036,3.927,3.112,8.472,3.112,13.695v43.299c0,3.849,0.742,7.118,2.299,9.788 c1.56,2.691,3.417,4.844,5.614,6.459c2.157,1.615,4.875,2.751,7.392,3.43c2.496,0.678,4.652,1.016,6.512,1.016v20.076 c-1.857,0-4.016,0.379-6.512,1.058c-2.517,0.677-5.232,1.772-7.394,3.209c-2.195,1.455-4.055,3.429-5.612,5.88 c-1.557,2.453-2.299,5.423-2.299,8.932v44.697c0,5.2-1.076,9.771-3.112,13.696c-2.079,3.927-4.577,7.116-7.532,9.688 c-2.955,2.487-6.175,4.402-9.589,5.74c-3.416,1.275-6.475,1.954-9.169,1.954H302.5v-26.554L314.164,970.195L314.164,970.195 L314.164,970.195z"/><path fill="none" stroke="#8B2721" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M314.164,970.195c2.755,0,4.955-0.561,6.592-1.577c1.639-1.095,2.916-2.451,3.854-4.009c0.923-1.614,1.519-3.43,1.758-5.362 c0.22-1.996,0.382-3.806,0.382-5.465v-36.5c0-4.823,0.895-8.829,2.715-11.96c1.818-3.09,3.978-5.622,6.469-7.516 c2.48-1.873,5.058-3.27,7.773-4.106c2.733-0.818,4.952-1.354,6.706-1.496v-0.697c-1.756-0.139-3.973-0.598-6.706-1.356 c-2.718-0.735-5.293-2.111-7.773-3.984c-2.491-1.895-4.648-4.564-6.469-7.994c-1.82-3.408-2.715-7.936-2.715-13.574v-34.669 c0-1.812-0.162-3.706-0.382-5.661c-0.239-1.955-0.837-3.769-1.758-5.363c-0.938-1.574-2.218-2.93-3.854-3.986 s-3.837-1.613-6.592-1.613H302.5V786.75h28.781c2.694,0,5.753,0.676,9.169,1.953c3.414,1.316,6.632,3.25,9.591,5.762 c2.953,2.532,5.449,5.741,7.53,9.669c2.036,3.927,3.112,8.472,3.112,13.695v43.299c0,3.849,0.742,7.118,2.299,9.788 c1.56,2.691,3.417,4.844,5.614,6.459c2.157,1.615,4.875,2.751,7.392,3.43c2.496,0.678,4.652,1.016,6.512,1.016v20.076 c-1.857,0-4.016,0.379-6.512,1.058c-2.517,0.677-5.232,1.772-7.394,3.209c-2.195,1.455-4.055,3.429-5.612,5.88 c-1.557,2.453-2.299,5.423-2.299,8.932v44.697c0,5.2-1.076,9.771-3.112,13.696c-2.079,3.927-4.577,7.116-7.532,9.688 c-2.955,2.487-6.175,4.402-9.589,5.74c-3.416,1.275-6.475,1.954-9.169,1.954H302.5v-26.554L314.164,970.195L314.164,970.195 L314.164,970.195z"/><g><linearGradient id="f" gradientUnits="userSpaceOnUse" x1="-26.642" y1="385.394" x2="-26.642" y2="297.55" gradientTransform="matrix(2.3906 0 0 -2.3906 134.192 1708.07)"><stop offset="0" stop-color="#c5372f"/><stop offset="1" stop-color="#900"/></linearGradient><path vector-effect="non-scaling-stroke" fill="url(#f)" stroke="#8B2721" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M98.835,813.305c-2.797,0-4.995,0.56-6.632,1.615c-1.618,1.057-2.916,2.413-3.815,3.987c-0.958,1.596-1.559,3.409-1.778,5.362 c-0.24,1.955-0.339,3.848-0.339,5.664V864.6c0,5.642-0.958,10.166-2.776,13.576c-1.818,3.43-3.975,6.1-6.432,7.993 c-2.496,1.874-5.073,3.25-7.811,3.985c-2.716,0.759-4.914,1.217-6.671,1.355v0.697c1.758,0.141,3.955,0.678,6.671,1.495 c2.737,0.838,5.314,2.233,7.811,4.106c2.456,1.895,4.614,4.426,6.432,7.517c1.817,3.13,2.776,7.136,2.776,11.96v36.501 c0,1.651,0.101,3.466,0.339,5.463c0.22,1.931,0.818,3.748,1.778,5.362c0.899,1.555,2.197,2.908,3.815,4.006 c1.637,1.021,3.835,1.58,6.632,1.58H110.5v26.552H81.716c-2.716,0-5.792-0.676-9.208-1.954c-3.396-1.337-6.592-3.251-9.548-5.74 c-2.937-2.574-5.493-5.762-7.531-9.688c-2.077-3.929-3.097-8.496-3.097-13.701v-44.692c0-3.51-0.798-6.479-2.357-8.933 c-1.558-2.449-3.415-4.424-5.573-5.879c-2.198-1.437-5.154-2.531-7.65-3.209c-2.497-0.679-4.534-1.058-6.252-1.058V881.82 c1.718,0,3.755-0.338,6.252-1.016c2.497-0.68,5.453-1.813,7.65-3.431c2.158-1.615,4.015-3.769,5.573-6.459 c1.559-2.671,2.357-5.938,2.357-9.788v-43.299c0-5.225,1.019-9.77,3.097-13.695c2.038-3.927,4.595-7.137,7.531-9.669 c2.956-2.511,6.151-4.444,9.548-5.761c3.416-1.276,6.492-1.954,9.208-1.954H110.5v26.553L98.835,813.305L98.835,813.305z"/><path fill="none" stroke="#8B2721" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M98.835,813.305c-2.797,0-4.995,0.56-6.632,1.615c-1.618,1.057-2.916,2.413-3.815,3.987c-0.958,1.596-1.559,3.409-1.778,5.362 c-0.24,1.955-0.339,3.848-0.339,5.664V864.6c0,5.642-0.958,10.166-2.776,13.576c-1.818,3.43-3.975,6.1-6.432,7.993 c-2.496,1.874-5.073,3.25-7.811,3.985c-2.716,0.759-4.914,1.217-6.671,1.355v0.697c1.758,0.141,3.955,0.678,6.671,1.495 c2.737,0.838,5.314,2.233,7.811,4.106c2.456,1.895,4.614,4.426,6.432,7.517c1.817,3.13,2.776,7.136,2.776,11.96v36.501 c0,1.651,0.101,3.466,0.339,5.463c0.22,1.931,0.818,3.748,1.778,5.362c0.899,1.555,2.197,2.908,3.815,4.006 c1.637,1.021,3.835,1.58,6.632,1.58H110.5v26.552H81.716c-2.716,0-5.792-0.676-9.208-1.954c-3.396-1.337-6.592-3.251-9.548-5.74 c-2.937-2.574-5.493-5.762-7.531-9.688c-2.077-3.929-3.097-8.496-3.097-13.701v-44.692c0-3.51-0.798-6.479-2.357-8.933 c-1.558-2.449-3.415-4.424-5.573-5.879c-2.198-1.437-5.154-2.531-7.65-3.209c-2.497-0.679-4.534-1.058-6.252-1.058V881.82 c1.718,0,3.755-0.338,6.252-1.016c2.497-0.68,5.453-1.813,7.65-3.431c2.158-1.615,4.015-3.769,5.573-6.459 c1.559-2.671,2.357-5.938,2.357-9.788v-43.299c0-5.225,1.019-9.77,3.097-13.695c2.038-3.927,4.595-7.137,7.531-9.669 c2.956-2.511,6.151-4.444,9.548-5.761c3.416-1.276,6.492-1.954,9.208-1.954H110.5v26.553L98.835,813.305L98.835,813.305z"/></g></g></svg></span><span data-reactid=".1loz6xnefb4.0.0.0:1.0.0.0.1">Putain de code !</span></a></div><div class="r-Grid-cell r-minM--2of3" data-reactid=".1loz6xnefb4.0.0.0:1.0.1"><nav class="putainde-Nav" data-reactid=".1loz6xnefb4.0.0.0:1.0.1.0"><a class="putainde-Nav-item" href="/fr/articles" data-reactid=".1loz6xnefb4.0.0.0:1.0.1.0.0:$/fr/articles"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".1loz6xnefb4.0.0.0:1.0.1.0.0:$/fr/articles.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M318.275,90v283.23L256,318.16l-62.275,55.07V90H318.275 M358.275,50H153.725v412L256,371.557	L358.275,462V50L358.275,50z"/></svg></span><span data-reactid=".1loz6xnefb4.0.0.0:1.0.1.0.0:$/fr/articles.1">Articles</span></a><a class="putainde-Nav-item" href="/fr/contribuer" data-reactid=".1loz6xnefb4.0.0.0:1.0.1.0.0:$/fr/contribuer"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".1loz6xnefb4.0.0.0:1.0.1.0.0:$/fr/contribuer.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M74.686,340.686L50,460.949l122.365-22.584L379.52,231.211l-97.68-97.68L74.686,340.686z M303.088,205.032l-181.891,181.89l-21.213-21.213l181.891-181.89L303.088,205.032z M462,148.731l-52.662,52.662l-97.682-97.68	l52.662-52.663L462,148.731z"/></svg></span><span data-reactid=".1loz6xnefb4.0.0.0:1.0.1.0.0:$/fr/contribuer.1">Contribuer</span></a><a href="https://github.com/putaindecode/putaindecode.io" class="putainde-Nav-item putainde-Nav-item--icon r-Tooltip r-Tooltip r-Tooltip--bottom" data-r-tooltip="GitHub" data-reactid=".1loz6xnefb4.0.0.0:1.0.1.0.1:$https=2//github=1com/putaindecode/putaindecode=1io"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".1loz6xnefb4.0.0.0:1.0.1.0.1:$https=2//github=1com/putaindecode/putaindecode=1io.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M461.633,250.645l0.367-3.819c-22.896-2.221-45.667-2.419-67.79-0.73	c3.557-11.347,5.43-24.164,5.295-38.739c-0.292-30.965-10.616-55.081-26.843-75.096c3.116-18.852,0.769-37.702-5.111-56.561	c-23.187,1.898-44.053,9.493-62.634,22.686c-34.725-7.044-69.447-7.493-104.172,0c-21.673-14.627-42.956-21.802-63.909-22.686	c-6.21,20.765-7.169,41.233-1.917,61.357c-18.28,19.397-25.268,42.944-24.925,69.019c0.196,14.927,2.496,28.209,6.738,39.952	c-21.796-1.599-44.201-1.386-66.732,0.798l0.367,3.819c22.947-2.228,45.76-2.411,67.919-0.678c0.814,1.974,1.633,3.939,2.567,5.815	c-24.009-0.633-45.618,1.453-65.854,6.43l0.914,3.723c20.538-5.048,42.54-7.081,67.107-6.254	c16.246,28.864,47.52,45.824,93.063,51.205c-10.581,8.594-16.269,18.731-17.735,30.201c0,0-4.787,0-24.121,0	c-32.394,0-41.226-41.304-74.779-37.229C132,320,125.5,371.599,177.587,371.599c17.506,0,21.226,0,21.881,0v47.296	c0.234,7.643-3.093,12.754-8.469,16.297c18.654,1.884,32.674-7.43,32.674-18.854s0-56.948,0-62.518s5.833-6,5.833-6v72.992	c0.245,7.265-3.284,11.392-7.031,15.339c16.434,0.654,31.892-2.629,32.592-16.615c0,0,0-66.345,0-69.857s5.756-3.599,5.756,0	s0,66.58,0,66.58c0.169,11.8,10.361,21.367,31.953,19.893c-5.776-4.65-7.549-9.35-7.549-16.15s0-72.181,0-72.181s5.95-0.306,5.95,6	s0,50.331,0,60.881c0,13.55,16.267,19.14,34.829,18.615c-6.081-4.558-10.196-9.991-10.223-17.256v-73.217	c-0.629-10.762-5.003-20.906-13.582-30.358c41.63-6.392,71.637-23.011,86.578-52.796c24.647-0.847,46.715,1.183,67.307,6.246	l0.914-3.723c-20.394-5.014-42.181-7.096-66.416-6.415c0.839-1.891,1.67-3.789,2.389-5.785	C415.363,248.215,438.431,248.391,461.633,250.645z M114,310.023c-1.023,0-1.853-0.588-1.853-1.313c0-0.728,0.83-1.315,1.853-1.315	c1.024,0,1.854,0.588,1.854,1.315C115.854,309.436,115.024,310.023,114,310.023z M119.833,314.003c-1.137,0-2.06-0.653-2.06-1.46	s0.923-1.462,2.06-1.462s2.059,0.655,2.059,1.462S120.97,314.003,119.833,314.003z M125.75,319.172	c-1.333,0-2.415-0.766-2.415-1.712s1.082-1.714,2.415-1.714c1.333,0,2.416,0.768,2.416,1.714S127.083,319.172,125.75,319.172z M131.5,325.379c-1.56,0-2.825-0.896-2.825-2.003s1.265-2.005,2.825-2.005s2.825,0.898,2.825,2.005S133.06,325.379,131.5,325.379z M137.833,332.394c-1.733,0-3.139-0.996-3.139-2.226s1.406-2.228,3.139-2.228s3.139,0.998,3.139,2.228	S139.566,332.394,137.833,332.394z M145.167,339.517c-1.926,0-3.488-1.107-3.488-2.474s1.562-2.476,3.488-2.476	c1.925,0,3.487,1.109,3.487,2.476S147.092,339.517,145.167,339.517z M155.083,346.291c-2.14,0-3.875-1.231-3.875-2.749	c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751C158.958,345.06,157.223,346.291,155.083,346.291z M167.375,349.916	c-2.14,0-3.875-1.231-3.875-2.749c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751	C171.25,348.685,169.515,349.916,167.375,349.916z M180.333,350.333c-2.14,0-3.875-1.231-3.875-2.749	c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751C184.208,349.102,182.473,350.333,180.333,350.333z M193.125,350.583	c-2.14,0-3.875-1.231-3.875-2.749c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751	C197,349.352,195.265,350.583,193.125,350.583z"/></svg></span></a><a href="https://twitter.com/putaindecode_fr/" class="putainde-Nav-item putainde-Nav-item--icon r-Tooltip r-Tooltip r-Tooltip--bottom" data-r-tooltip="Twitter" data-reactid=".1loz6xnefb4.0.0.0:1.0.1.0.1:$https=2//twitter=1com/putaindecode_fr/"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".1loz6xnefb4.0.0.0:1.0.1.0.1:$https=2//twitter=1com/putaindecode_fr/.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M462,128.223c-15.158,6.724-31.449,11.269-48.547,13.31c17.449-10.461,30.854-27.025,37.164-46.764	c-16.333,9.687-34.422,16.721-53.676,20.511c-15.418-16.428-37.386-26.691-61.698-26.691c-54.56,0-94.668,50.916-82.337,103.787	c-70.25-3.524-132.534-37.177-174.223-88.314c-22.142,37.983-11.485,87.691,26.158,112.85c-13.854-0.438-26.891-4.241-38.285-10.574	c-0.917,39.162,27.146,75.781,67.795,83.949c-11.896,3.237-24.926,3.978-38.17,1.447c10.754,33.58,41.972,58.018,78.96,58.699	C139.604,378.282,94.846,390.721,50,385.436c37.406,23.982,81.837,37.977,129.571,37.977c156.932,0,245.595-132.551,240.251-251.435	C436.339,160.061,450.668,145.174,462,128.223z"/></svg></span></a><a href="/discuss/" class="putainde-Nav-item putainde-Nav-item--icon r-Tooltip r-Tooltip r-Tooltip--bottom" data-r-tooltip="Discuter" data-reactid=".1loz6xnefb4.0.0.0:1.0.1.0.1:$/discuss/"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".1loz6xnefb4.0.0.0:1.0.1.0.1:$/discuss/.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M174.059,354.374c-0.031-0.008-0.062-0.014-0.093-0.021	c-25.892,15.965-82.983,32.107-123.141,39.412c14.984-29.725,31.616-70.527,30.764-98.977C61.403,270.511,50,239.224,50,207.358	c0-89.84,87.383-155.527,185.209-155.527c97.22,0,185.211,65.193,185.211,155.527c0,1.283-0.027,2.564-0.066,3.844	c-11.285-6.088-23.506-11.037-36.622-14.68c-6.854-60.861-70.842-108.715-148.522-108.715c-82.237,0-149.141,53.631-149.141,119.551	c0,34.688,15.009,56.529,36.192,78.068c-4.306,31.98-14.646,59.781-14.646,59.781s30.542-8.064,65.253-28.275	C171.395,329.616,171.806,342.101,174.059,354.374z M461.432,460.169c-27.634-5.029-66.922-16.137-84.739-27.123	c-98.102,24.029-169.6-36.424-169.6-101.154c0-62.166,60.552-107.029,127.453-107.029c67.322,0,127.454,45.203,127.454,107.029	c0,21.928-7.85,43.457-21.738,60.164C439.674,411.634,451.121,439.712,461.432,460.169z M302.524,333.198	c0-9.648-7.841-17.469-17.515-17.469c-9.673,0-17.515,7.82-17.515,17.469s7.842,17.471,17.515,17.471	C294.684,350.669,302.524,342.847,302.524,333.198z M354.75,333.198c0-9.648-7.841-17.469-17.515-17.469	c-9.673,0-17.515,7.82-17.515,17.469s7.842,17.471,17.515,17.471C346.909,350.669,354.75,342.847,354.75,333.198z M406.339,333.198	c0-9.648-7.842-17.469-17.515-17.469c-9.674,0-17.515,7.82-17.515,17.469s7.841,17.471,17.515,17.471	C398.497,350.669,406.339,342.847,406.339,333.198z"/></svg></span></a></nav></div></div></div><div data-reactid=".1loz6xnefb4.0.0.0:2"><div class="putainde-Main" data-reactid=".1loz6xnefb4.0.0.0:2.3"><noscript data-reactid=".1loz6xnefb4.0.0.0:2.3.0"></noscript><article class="putainde-Post" data-reactid=".1loz6xnefb4.0.0.0:2.3.1"><header data-reactid=".1loz6xnefb4.0.0.0:2.3.1.0"><div class="putainde-Post-header" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.0.0"><h1 class="putainde-Title" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.0.0.2">Utiliser React en moteur de templates</h1></div></header><div class="r-Grid" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1"><div class="r-Grid-cell r-minM--8of12 putainde-Post-contents" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0"><div class="putainde-Post-md" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.0"><div data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.0.0"><p>Vous connaissez probablement tous des moteurs de templates.
En JavaScript nous avons Handlebars, Jade, EJS, Slim…
Tous ces projets partent de bonnes intentions mais à l’utilisation,
on peut sentir des limitations et donc de l’insatisfaction.</p>
<p>Utiliser Handlebars par exemple, c’est un peu devoir coder tout un tas de helpers
pour gérer une partie de votre affichage, ça peut vite devenir lourd.
Être restreint à une syntaxe limitée par choix est un peu frustrant.
Quand c’est pas ça, c’est la syntaxe du moteur qui va être lourde.</p>
<p>On peut en venir à regretter PHP. Faut avouer que ce langage était plutôt simple
à utiliser en tant que moteur de template.
Efficace et pas de restrictions. On trouve même parfois des <code>mysql_query()</code>
dans des templates…</p>
<p>Blague à part, nous cherchions des langages pour refaire une partie de notre site
puisque nous n’étions pas vraiment satisfaits du processus actuel
(anciennement Handlebars, puis Jade).</p>
<p>Mais finalement, pourquoi ne pas rester avec du JavaScript, purement et simplement ?</p>
<p>C’est ce que nous avons fait avec React et JSX qui sont de plus en plus utilisés.
La syntaxe est plutôt libératrice.</p>
<p>Pour ceux qui ne connaissent pas JSX, il s’agit d’un superset de JavaScript qui
supporte une syntaxe XML transformé en appel de fonctions JavaScript.
Il faut dire que le XML a beau être verbeux, pour définir des
éléments ayant des propriétés et des enfants, on a pas vraiment fait plus
lisible et clair sur ce point. Le HTML est plutôt simple à prendre en main c’est
certain. Les méthodes de rendu de React (ce qui va nous intéresser) sont très proches
de l’HTML.</p>
<p>Ceux qui ont utilisé JSX (bien qu’ayant pu avoir des nausées au premier contact)
avouent souvent qu’ils ont fini par aimer cette petite syntaxe créée par Facebook qui
fonctionne très bien avec React.</p>
<p>Du coup, si on utilisait ça pour faire de simple templates et non pas des composants
d’interface utilisateur dynamiques ? Qui peut le plus peut le moins (quoi qu’en
fait, des templates, c’est un peu des composants d’interface).</p>
<h2 id="exemple-de-template-react-jsx"><a class="markdownIt-Anchor" href="#exemple-de-template-react-jsx">#</a> Exemple de template React/JSX</h2>
<p>Si vous ne savez pas trop ce qu’est React, nous vous recommandons de lire
notre <a href="/fr/articles/js/react/">introduction à React</a>.</p>
<p>Dans notre cas, on ne va pas spécialement bénéficier de certaines de ses forces,
mais ça fera très bien le job pour notre besoin.</p>
<p>Nous n’aborderons pas dans le détail la syntaxe React/JSX, ni ES6, pour rester
focalisés sur la finalité (on a prévu des articles à ce propos, en attendant
<a href="http://babeljs.io/docs/learn-es6/">voici de quoi vous occuper avec ES6</a>).</p>
<p><em>Attention, pour ceux qui sont encore sur des plugins jQuery, ça risque de vous
piquer les yeux</em> 😭.</p>
<p><a name="es6-class"></a></p>
<pre><code class="language-js"><span class="hljs-keyword">import</span> React, {Component} <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>

export default class PostTemplate extends Component {

  render() {
    return (
      &lt;html&gt;
        &lt;head&gt;
          &lt;title&gt;{this.props.pageTitle}&lt;/title&gt;
        &lt;/head&gt;
        &lt;body&gt;
          &lt;article className=<span class="hljs-string">"org-Post"</span>&gt;
            &lt;header className=<span class="hljs-string">"org-Post-header"</span>&gt;
              &lt;h1&gt;{this.props.pageTitle}&lt;/h1&gt;
            &lt;/header&gt;
            &lt;div
              className=<span class="hljs-string">"org-Post-content"</span>
              dangerouslySetInnerHTML={{__html: this.props.pageContent}}
            /&gt;
          &lt;/article&gt;
        &lt;/body&gt;
      &lt;/html&gt;
    )
  }
}</code></pre>
<p>Ce que vous voyez c’est bien du JavaScript. Un peu amélioré via JSX, on ne va
pas le nier (dans notre cas, on gère tout ça de manière transparente avec
<a href="http://babeljs.io/">babel(-node)</a>).</p>
<p>Ça ressemble drôlement à de l’HTML et c’est ça qui est appréciable pour nous.
Vous noterez que l’attribut pour définir une classe HTML est <code>className</code> puisque
React est en JavaScript et que le mot <code>class</code> est réservé
(cf. <a href="#es6-class">la définition en ES6 de la classe</a>).</p>
<p>En même temps ce qui est cool, c’est qu’on reste dans du JavaScript.</p>
<p>On peut donc utiliser toutes nos bibliothèques préférées via <em>npm</em> pour l’affichage
(exemple : <code>momentjs</code>), ou simplement des boucles via les méthodes de parcours de
tableau tel que <code>forEach()</code> ou <code>map()</code> en appelant d’autres composants.</p>
<p>Ci-dessous vous trouverez un exemple plus complexe avec une page pour la liste
des posts et quelques composants.
Les balises qui ressemblent à du HTML et qui commencent par une majuscule sont liées à des
composants qui doivent être définis (dans notre cas importés).
C’est une particularité de React.</p>
<pre><code class="language-js"><span class="hljs-keyword">import</span> React, {Component} <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>

<span class="hljs-keyword">import</span> Html <span class="hljs-keyword">from</span> <span class="hljs-string">"../Html"</span>
<span class="hljs-keyword">import</span> Head <span class="hljs-keyword">from</span> <span class="hljs-string">"../Head"</span>
<span class="hljs-keyword">import</span> Body <span class="hljs-keyword">from</span> <span class="hljs-string">"../Body"</span>
<span class="hljs-keyword">import</span> PostsList <span class="hljs-keyword">from</span> <span class="hljs-string">"../PostsList"</span>

export default class Posts extends Component {

  render() {
    return (
      &lt;Html&gt;
        &lt;Head title={head.title} /&gt;
        &lt;Body&gt;
          &lt;h1&gt;{head.title}&lt;/h1&gt;
          &lt;PostsList
            posts={
              this.props.collection
                .filter((item) =&gt; {
                  /*
                    ce que vous voulez pour filtrer votre collection
                    eg:
                    return !item.draft
                  */
                }
              }
          /&gt;
        &lt;/Body&gt;
      &lt;/Html&gt;
    )
  }
}</code></pre>
<p>Voici deux exemples de composants utilisés ci-dessus :</p>
<h3 id="head"><a class="markdownIt-Anchor" href="#head">#</a> Head</h3>
<pre><code class="language-js"><span class="hljs-keyword">import</span> React, {Component} <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>

export default class Head extends Component {

  render() {
    return (
      &lt;head&gt;
        &lt;meta charSet=<span class="hljs-string">"utf-8"</span> /&gt;
        &lt;meta httpEquiv=<span class="hljs-string">"X-UA-Compatible"</span> content=<span class="hljs-string">"IE=Edge"</span> /&gt;
        &lt;meta
          name=<span class="hljs-string">"viewport"</span>
          content=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>
        /&gt;
        &lt;title&gt;{this.props.title}&lt;/title&gt;
        &lt;link
          rel=<span class="hljs-string">"stylesheet"</span>
          href=<span class="hljs-string">"/index.css"</span>
        /&gt;
        &lt;link
          rel=<span class="hljs-string">"alternate"</span>
          href=<span class="hljs-string">"/feed.xml"</span>
          title={this.props.title}
          type=<span class="hljs-string">"application/atom+xml"</span>
        /&gt;
        {this.props.children}
      &lt;/head&gt;
    )
  }
}</code></pre>
<h3 id="body"><a class="markdownIt-Anchor" href="#body">#</a> Body</h3>
<pre><code class="language-js"><span class="hljs-keyword">import</span> React, {Component, PropTypes} <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>

<span class="hljs-keyword">import</span> Header <span class="hljs-keyword">from</span> <span class="hljs-string">"../Header"</span>
<span class="hljs-keyword">import</span> Footer <span class="hljs-keyword">from</span> <span class="hljs-string">"../Footer"</span>
<span class="hljs-keyword">import</span> GoogleAnalytics <span class="hljs-keyword">from</span> <span class="hljs-string">"../Analytics"</span>

export default class Body extends Component {

  render() {
    return (
      &lt;body&gt;

        &lt;Header /&gt;

        &lt;div className=<span class="hljs-string">"Main"</span>&gt;
          {this.props.children}
        &lt;/div&gt;

        &lt;Footer /&gt;

        &lt;script src={<span class="hljs-string">"/index.js"</span>}&gt;&lt;/script&gt;

        &lt;GoogleAnalytics /&gt;

      &lt;/body&gt;
    )
  }
}</code></pre>
<p>Bon c’est bien beau mais comment je gère l’affichage du composant initial
finalement (le parent) ?</p>
<h2 id="comment-utiliser-un-template-react-jsx"><a class="markdownIt-Anchor" href="#comment-utiliser-un-template-react-jsx">#</a> Comment utiliser un template React/JSX ?</h2>
<p>C’est bien simple. Dans notre cas, pas besoin de React côté client. On doit gérer
ça côté « serveur » (je mets ça entre guillemets puisque dans notre cas précis, c’est
pour générer un site statique, et c’est donc sur une machine quelconque que la
génération se fait).</p>
<p>Voilà de quoi effectuer le rendu de nos composants vers du bon vieux HTML (car c’est la finalité
d’un <em>moteur de template</em>).</p>
<pre><code class="language-js">import react from "react"
import markdownify from "./markdown-parser"
// je vous conseille marked pour rendre du markdown
// c'est ce que nous utilisons pour rendre nos pages à l'heure où j'écris ce post

const reactClass = require("./template/PostTemplate")
const component = new (react.createFactory(reactClass))({
  // ici on passe nos "props" react
  pageTitle: "Test",
  pageContent: markdownify("Imaginons du **markdown** parsé"),
  // vous pouvez bien entendu rajouter d'autres choses
  collections: {
    posts: [
      //...
    ]
  }
})

let html
try {
  html = react.renderToStaticMarkup(component)
}
catch (err) {
  // Vous devrez gérer votre exception selon votre environnement
  // si c'est pour un test on peut simplement ne pas utiliser
  // try/catch, ça nous pètera à la gueule et c'est tant mieux
  throw err
}

// maintenant vous faites ce que vous voulez de votre string html !
// ex: require("fs").writeFile(...)</code></pre>
<p>La méthode intéressante de React est dans notre cas <code>renderToStaticMarkup()</code> qui
va nous générer un HTML qui va bien.</p>
<p>Pour aller plus loin on pourrait décider d’utiliser <code>renderToString()</code> plutôt que
<code>renderToStaticMarkup()</code> afin de pouvoir faire prendre le relais à ReactJS côté client
mais là <a href="/fr/articles/js/react/cote-serveur/">le niveau de complexité est différent</a>.</p>
<p>Pour la petite anecdote, notre site utilise actuellement <a href="http://www.metalsmith.io/">metalsmith</a>,
une petite bibliothèque simple mais qui permet par son API de faire des choses sympas.</p>
<p>J’ai donc codé <a href="https://github.com/search?q=user%3AMoOx+metalsmith">quelques plugins metalsmith</a>
dont un <a href="https://github.com/MoOx/metalsmith-react">metalsmith-react</a> à l’occasion.</p>
<p>N’hésitez pas à consulter
<a href="https://github.com/putaindecode/putaindecode.io">le code source de notre site</a>
pour faire des découvertes sympas.</p>
</div></div><footer class="putainde-Post-footer" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1"><div data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0"><div class="putainde-Author undefined" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0.0"><a href="http://moox.io/" class="putainde-Avatar putainde-Author-picture" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0.0.0"><img class="js-AnimateLoad" src="https://avatars.githubusercontent.com/u/157534?v=3&amp;s=128" alt="" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0.0.0.0"/></a><div class="putainde-Author-description" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0.0.1"><div class="putainde-Author-title" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0.0.1.0"><h3 class="putainde-Author-name" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0.0.1.0.0"><span class="putainde-WrittenBy" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0.0.1.0.0.0">Écrit par </span><a class="putainde-Link" href="http://moox.io/" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0.0.1.0.0.1">MoOx</a></h3><div class="putainde-Author-social" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0.0.1.0.1"><a href="http://moox.io/" class="r-Tooltip r-Tooltip--top" data-r-tooltip="Website" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0.0.1.0.1.0"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0.0.1.0.1.0.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M394.072,174.805l-47.916-48.023V88.472h47.916V174.805z M462,275.815h-42.508v166.213H92.508V275.815H50	L256,69.972L462,275.815z M296.847,271.972c-15.811-3.316-29.021,4.086-38.792,19.387c-9.771-15.301-22.98-22.703-38.789-19.387	c-36.746,10.876-36.336,69.543,38.582,113.047C332.908,341.761,333.59,282.848,296.847,271.972z"/></svg></span></a><a href="https://twitter.com/MoOx" class="r-Tooltip r-Tooltip--top" data-r-tooltip="Twitter" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0.0.1.0.1.1"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0.0.1.0.1.1.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M462,128.223c-15.158,6.724-31.449,11.269-48.547,13.31c17.449-10.461,30.854-27.025,37.164-46.764	c-16.333,9.687-34.422,16.721-53.676,20.511c-15.418-16.428-37.386-26.691-61.698-26.691c-54.56,0-94.668,50.916-82.337,103.787	c-70.25-3.524-132.534-37.177-174.223-88.314c-22.142,37.983-11.485,87.691,26.158,112.85c-13.854-0.438-26.891-4.241-38.285-10.574	c-0.917,39.162,27.146,75.781,67.795,83.949c-11.896,3.237-24.926,3.978-38.17,1.447c10.754,33.58,41.972,58.018,78.96,58.699	C139.604,378.282,94.846,390.721,50,385.436c37.406,23.982,81.837,37.977,129.571,37.977c156.932,0,245.595-132.551,240.251-251.435	C436.339,160.061,450.668,145.174,462,128.223z"/></svg></span></a><a href="https://github.com/MoOx" class="r-Tooltip r-Tooltip--top" data-r-tooltip="Github" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0.0.1.0.1.2"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0.0.1.0.1.2.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M461.633,250.645l0.367-3.819c-22.896-2.221-45.667-2.419-67.79-0.73	c3.557-11.347,5.43-24.164,5.295-38.739c-0.292-30.965-10.616-55.081-26.843-75.096c3.116-18.852,0.769-37.702-5.111-56.561	c-23.187,1.898-44.053,9.493-62.634,22.686c-34.725-7.044-69.447-7.493-104.172,0c-21.673-14.627-42.956-21.802-63.909-22.686	c-6.21,20.765-7.169,41.233-1.917,61.357c-18.28,19.397-25.268,42.944-24.925,69.019c0.196,14.927,2.496,28.209,6.738,39.952	c-21.796-1.599-44.201-1.386-66.732,0.798l0.367,3.819c22.947-2.228,45.76-2.411,67.919-0.678c0.814,1.974,1.633,3.939,2.567,5.815	c-24.009-0.633-45.618,1.453-65.854,6.43l0.914,3.723c20.538-5.048,42.54-7.081,67.107-6.254	c16.246,28.864,47.52,45.824,93.063,51.205c-10.581,8.594-16.269,18.731-17.735,30.201c0,0-4.787,0-24.121,0	c-32.394,0-41.226-41.304-74.779-37.229C132,320,125.5,371.599,177.587,371.599c17.506,0,21.226,0,21.881,0v47.296	c0.234,7.643-3.093,12.754-8.469,16.297c18.654,1.884,32.674-7.43,32.674-18.854s0-56.948,0-62.518s5.833-6,5.833-6v72.992	c0.245,7.265-3.284,11.392-7.031,15.339c16.434,0.654,31.892-2.629,32.592-16.615c0,0,0-66.345,0-69.857s5.756-3.599,5.756,0	s0,66.58,0,66.58c0.169,11.8,10.361,21.367,31.953,19.893c-5.776-4.65-7.549-9.35-7.549-16.15s0-72.181,0-72.181s5.95-0.306,5.95,6	s0,50.331,0,60.881c0,13.55,16.267,19.14,34.829,18.615c-6.081-4.558-10.196-9.991-10.223-17.256v-73.217	c-0.629-10.762-5.003-20.906-13.582-30.358c41.63-6.392,71.637-23.011,86.578-52.796c24.647-0.847,46.715,1.183,67.307,6.246	l0.914-3.723c-20.394-5.014-42.181-7.096-66.416-6.415c0.839-1.891,1.67-3.789,2.389-5.785	C415.363,248.215,438.431,248.391,461.633,250.645z M114,310.023c-1.023,0-1.853-0.588-1.853-1.313c0-0.728,0.83-1.315,1.853-1.315	c1.024,0,1.854,0.588,1.854,1.315C115.854,309.436,115.024,310.023,114,310.023z M119.833,314.003c-1.137,0-2.06-0.653-2.06-1.46	s0.923-1.462,2.06-1.462s2.059,0.655,2.059,1.462S120.97,314.003,119.833,314.003z M125.75,319.172	c-1.333,0-2.415-0.766-2.415-1.712s1.082-1.714,2.415-1.714c1.333,0,2.416,0.768,2.416,1.714S127.083,319.172,125.75,319.172z M131.5,325.379c-1.56,0-2.825-0.896-2.825-2.003s1.265-2.005,2.825-2.005s2.825,0.898,2.825,2.005S133.06,325.379,131.5,325.379z M137.833,332.394c-1.733,0-3.139-0.996-3.139-2.226s1.406-2.228,3.139-2.228s3.139,0.998,3.139,2.228	S139.566,332.394,137.833,332.394z M145.167,339.517c-1.926,0-3.488-1.107-3.488-2.474s1.562-2.476,3.488-2.476	c1.925,0,3.487,1.109,3.487,2.476S147.092,339.517,145.167,339.517z M155.083,346.291c-2.14,0-3.875-1.231-3.875-2.749	c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751C158.958,345.06,157.223,346.291,155.083,346.291z M167.375,349.916	c-2.14,0-3.875-1.231-3.875-2.749c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751	C171.25,348.685,169.515,349.916,167.375,349.916z M180.333,350.333c-2.14,0-3.875-1.231-3.875-2.749	c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751C184.208,349.102,182.473,350.333,180.333,350.333z M193.125,350.583	c-2.14,0-3.875-1.231-3.875-2.749c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751	C197,349.352,195.265,350.583,193.125,350.583z"/></svg></span></a></div></div><p class="putainde-Author-bio" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0.0.1.1"><span data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0.0.1.1.0">Open source addict vivant dans la campagne près de Toulouse, Maxime est développeur web front-end le jour, et justicier du code la nuit.  </span><span data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.0.0.1.1.1">Il aime faire des calins à HTML, CSS et JavaScript en tant que freelance.</span></p></div></div></div><div class="putainde-Contributors" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2"><strong class="putainde-Contributors-label" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.0"><span data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.0.1">7 contributeurs sur cette page</span></strong><div class="r-Grid putainde-Contributors-actions" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.1"><div class="r-Grid-cell r-all--1of3" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.1.0"><a class="putainde-Contributors-action" href="https://github.com/putaindecode/putaindecode.io/edit/master/content/fr/articles/js/react/utiliser-en-moteur-de-templates/index.md" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.1.0.0">Modifier</a></div><div class="r-Grid-cell r-all--1of3" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.1.1"><a class="putainde-Contributors-action" href="https://github.com/putaindecode/putaindecode.io/blame/master/content/fr/articles/js/react/utiliser-en-moteur-de-templates/index.md" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.1.1.0">Tracer les changements</a></div><div class="r-Grid-cell r-all--1of3" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.1.2"><a class="putainde-Contributors-action" href="https://github.com/putaindecode/putaindecode.io/commits/master/content/fr/articles/js/react/utiliser-en-moteur-de-templates/index.md" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.1.2.0">Historique</a></div></div><div class="putainde-Contributor r-Tooltip r-Tooltip--bottom r-Tooltip--allowNewLines" data-r-tooltip="MoOx
(9 commits)" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:0"><a href="http://moox.io/" class="putainde-Avatar putainde-Contributor-avatar--small" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:0.0"><img class="js-AnimateLoad" src="https://avatars.githubusercontent.com/u/157534?v=3&amp;s=128" alt="" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:0.0.0"/></a></div><div class="putainde-Contributor r-Tooltip r-Tooltip--bottom r-Tooltip--allowNewLines" data-r-tooltip="skinnyfoetusboy
(2 commits)" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:1"><a href="https://github.com/skinnyfoetusboy" class="putainde-Avatar putainde-Contributor-avatar--small" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:1.0"><img class="js-AnimateLoad" src="https://avatars.githubusercontent.com/u/5133452?v=3&amp;s=128" alt="" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:1.0.0"/></a></div><div class="putainde-Contributor r-Tooltip r-Tooltip--bottom r-Tooltip--allowNewLines" data-r-tooltip="kud
(1 commit)" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:2"><a href="http://kud.io" class="putainde-Avatar putainde-Contributor-avatar--small" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:2.0"><img class="js-AnimateLoad" src="https://avatars.githubusercontent.com/u/655838?v=3&amp;s=128" alt="" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:2.0.0"/></a></div><div class="putainde-Contributor r-Tooltip r-Tooltip--bottom r-Tooltip--allowNewLines" data-r-tooltip="madx
(1 commit)" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:3"><a href="http://madx.me/" class="putainde-Avatar putainde-Contributor-avatar--small" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:3.0"><img class="js-AnimateLoad" src="https://avatars.githubusercontent.com/u/5723?v=3&amp;s=128" alt="" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:3.0.0"/></a></div><div class="putainde-Contributor r-Tooltip r-Tooltip--bottom r-Tooltip--allowNewLines" data-r-tooltip="bloodyowl
(1 commit)" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:4"><a href="http://bloodyowl.github.io" class="putainde-Avatar putainde-Contributor-avatar--small" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:4.0"><img class="js-AnimateLoad" src="https://avatars.githubusercontent.com/u/1688645?v=3&amp;s=128" alt="" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:4.0.0"/></a></div><div class="putainde-Contributor r-Tooltip r-Tooltip--bottom r-Tooltip--allowNewLines" data-r-tooltip="Macxim
(1 commit)" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:5"><a href="http://macx.im" class="putainde-Avatar putainde-Contributor-avatar--small" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:5.0"><img class="js-AnimateLoad" src="https://avatars.githubusercontent.com/u/1909957?v=3&amp;s=128" alt="" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:5.0.0"/></a></div><div class="putainde-Contributor r-Tooltip r-Tooltip--bottom r-Tooltip--allowNewLines" data-r-tooltip="Nyalab
(1 commit)" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:6"><a href="http://putaindecode.fr" class="putainde-Avatar putainde-Contributor-avatar--small" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:6.0"><img class="js-AnimateLoad" src="https://avatars.githubusercontent.com/u/721993?v=3&amp;s=128" alt="" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.1.2.2:6.0.0"/></a></div></div></footer><div data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.2"><div id="disqus_thread" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.2.0"></div><noscript data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.2.1"><span data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.2.1.0"><span data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.2.1.0.0">Please enable JavaScript to view the</span><a href="http://disqus.com/?ref_noscript" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.2.1.0.1">comments powered by Disqus.</a></span></noscript><a href="http://disqus.com" class="dsq-brlink" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.2.2"><span data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.2.2.0">blog comments powered by</span><span class="logo-disqus" data-reactid=".1loz6xnefb4.0.0.0:2.3.1.1.0.2.2.1">Disqus</span></a></div></div></div></article></div></div><div class="putainde-Footer" data-reactid=".1loz6xnefb4.0.0.0:3"><div class="r-Grid" data-reactid=".1loz6xnefb4.0.0.0:3.0"><div class="r-Grid-cell r-minM--1of4" data-reactid=".1loz6xnefb4.0.0.0:3.0.0"><p class="putainde-Footer-text" data-reactid=".1loz6xnefb4.0.0.0:3.0.0.0">© 1970 - 2015 Putain de code !</p></div><div class="r-Grid-cell r-minM--2of4" data-reactid=".1loz6xnefb4.0.0.0:3.0.1"><ul class="putainde-Footer-list" data-reactid=".1loz6xnefb4.0.0.0:3.0.1.0"><li data-reactid=".1loz6xnefb4.0.0.0:3.0.1.0.0:$/feed=1xml"><a href="/feed.xml" data-reactid=".1loz6xnefb4.0.0.0:3.0.1.0.0:$/feed=1xml.0">Flux RSS</a></li><li data-reactid=".1loz6xnefb4.0.0.0:3.0.1.0.$https=2//github=1com/putaindecode/forum/issues"><a href="https://github.com/putaindecode/forum/issues" data-reactid=".1loz6xnefb4.0.0.0:3.0.1.0.$https=2//github=1com/putaindecode/forum/issues.0">Forum</a></li><li data-reactid=".1loz6xnefb4.0.0.0:3.0.1.0.$https=2//github=1com/putaindecode/putaindecode=1io"><a href="https://github.com/putaindecode/putaindecode.io" data-r-tooltip="GitHub" class="r-Tooltip r-Tooltip--top" data-reactid=".1loz6xnefb4.0.0.0:3.0.1.0.$https=2//github=1com/putaindecode/putaindecode=1io.0"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".1loz6xnefb4.0.0.0:3.0.1.0.$https=2//github=1com/putaindecode/putaindecode=1io.0.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M461.633,250.645l0.367-3.819c-22.896-2.221-45.667-2.419-67.79-0.73	c3.557-11.347,5.43-24.164,5.295-38.739c-0.292-30.965-10.616-55.081-26.843-75.096c3.116-18.852,0.769-37.702-5.111-56.561	c-23.187,1.898-44.053,9.493-62.634,22.686c-34.725-7.044-69.447-7.493-104.172,0c-21.673-14.627-42.956-21.802-63.909-22.686	c-6.21,20.765-7.169,41.233-1.917,61.357c-18.28,19.397-25.268,42.944-24.925,69.019c0.196,14.927,2.496,28.209,6.738,39.952	c-21.796-1.599-44.201-1.386-66.732,0.798l0.367,3.819c22.947-2.228,45.76-2.411,67.919-0.678c0.814,1.974,1.633,3.939,2.567,5.815	c-24.009-0.633-45.618,1.453-65.854,6.43l0.914,3.723c20.538-5.048,42.54-7.081,67.107-6.254	c16.246,28.864,47.52,45.824,93.063,51.205c-10.581,8.594-16.269,18.731-17.735,30.201c0,0-4.787,0-24.121,0	c-32.394,0-41.226-41.304-74.779-37.229C132,320,125.5,371.599,177.587,371.599c17.506,0,21.226,0,21.881,0v47.296	c0.234,7.643-3.093,12.754-8.469,16.297c18.654,1.884,32.674-7.43,32.674-18.854s0-56.948,0-62.518s5.833-6,5.833-6v72.992	c0.245,7.265-3.284,11.392-7.031,15.339c16.434,0.654,31.892-2.629,32.592-16.615c0,0,0-66.345,0-69.857s5.756-3.599,5.756,0	s0,66.58,0,66.58c0.169,11.8,10.361,21.367,31.953,19.893c-5.776-4.65-7.549-9.35-7.549-16.15s0-72.181,0-72.181s5.95-0.306,5.95,6	s0,50.331,0,60.881c0,13.55,16.267,19.14,34.829,18.615c-6.081-4.558-10.196-9.991-10.223-17.256v-73.217	c-0.629-10.762-5.003-20.906-13.582-30.358c41.63-6.392,71.637-23.011,86.578-52.796c24.647-0.847,46.715,1.183,67.307,6.246	l0.914-3.723c-20.394-5.014-42.181-7.096-66.416-6.415c0.839-1.891,1.67-3.789,2.389-5.785	C415.363,248.215,438.431,248.391,461.633,250.645z M114,310.023c-1.023,0-1.853-0.588-1.853-1.313c0-0.728,0.83-1.315,1.853-1.315	c1.024,0,1.854,0.588,1.854,1.315C115.854,309.436,115.024,310.023,114,310.023z M119.833,314.003c-1.137,0-2.06-0.653-2.06-1.46	s0.923-1.462,2.06-1.462s2.059,0.655,2.059,1.462S120.97,314.003,119.833,314.003z M125.75,319.172	c-1.333,0-2.415-0.766-2.415-1.712s1.082-1.714,2.415-1.714c1.333,0,2.416,0.768,2.416,1.714S127.083,319.172,125.75,319.172z M131.5,325.379c-1.56,0-2.825-0.896-2.825-2.003s1.265-2.005,2.825-2.005s2.825,0.898,2.825,2.005S133.06,325.379,131.5,325.379z M137.833,332.394c-1.733,0-3.139-0.996-3.139-2.226s1.406-2.228,3.139-2.228s3.139,0.998,3.139,2.228	S139.566,332.394,137.833,332.394z M145.167,339.517c-1.926,0-3.488-1.107-3.488-2.474s1.562-2.476,3.488-2.476	c1.925,0,3.487,1.109,3.487,2.476S147.092,339.517,145.167,339.517z M155.083,346.291c-2.14,0-3.875-1.231-3.875-2.749	c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751C158.958,345.06,157.223,346.291,155.083,346.291z M167.375,349.916	c-2.14,0-3.875-1.231-3.875-2.749c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751	C171.25,348.685,169.515,349.916,167.375,349.916z M180.333,350.333c-2.14,0-3.875-1.231-3.875-2.749	c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751C184.208,349.102,182.473,350.333,180.333,350.333z M193.125,350.583	c-2.14,0-3.875-1.231-3.875-2.749c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751	C197,349.352,195.265,350.583,193.125,350.583z"/></svg></span></a></li><li data-reactid=".1loz6xnefb4.0.0.0:3.0.1.0.$https=2//twitter=1com/putaindecode_fr/"><a href="https://twitter.com/putaindecode_fr/" data-r-tooltip="Twitter" class="r-Tooltip r-Tooltip--top" data-reactid=".1loz6xnefb4.0.0.0:3.0.1.0.$https=2//twitter=1com/putaindecode_fr/.0"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".1loz6xnefb4.0.0.0:3.0.1.0.$https=2//twitter=1com/putaindecode_fr/.0.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M462,128.223c-15.158,6.724-31.449,11.269-48.547,13.31c17.449-10.461,30.854-27.025,37.164-46.764	c-16.333,9.687-34.422,16.721-53.676,20.511c-15.418-16.428-37.386-26.691-61.698-26.691c-54.56,0-94.668,50.916-82.337,103.787	c-70.25-3.524-132.534-37.177-174.223-88.314c-22.142,37.983-11.485,87.691,26.158,112.85c-13.854-0.438-26.891-4.241-38.285-10.574	c-0.917,39.162,27.146,75.781,67.795,83.949c-11.896,3.237-24.926,3.978-38.17,1.447c10.754,33.58,41.972,58.018,78.96,58.699	C139.604,378.282,94.846,390.721,50,385.436c37.406,23.982,81.837,37.977,129.571,37.977c156.932,0,245.595-132.551,240.251-251.435	C436.339,160.061,450.668,145.174,462,128.223z"/></svg></span></a></li><li data-reactid=".1loz6xnefb4.0.0.0:3.0.1.0.$/discuss/"><a href="/discuss/" data-r-tooltip="Discuter" class="r-Tooltip r-Tooltip--top" data-reactid=".1loz6xnefb4.0.0.0:3.0.1.0.$/discuss/.0"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".1loz6xnefb4.0.0.0:3.0.1.0.$/discuss/.0.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M174.059,354.374c-0.031-0.008-0.062-0.014-0.093-0.021	c-25.892,15.965-82.983,32.107-123.141,39.412c14.984-29.725,31.616-70.527,30.764-98.977C61.403,270.511,50,239.224,50,207.358	c0-89.84,87.383-155.527,185.209-155.527c97.22,0,185.211,65.193,185.211,155.527c0,1.283-0.027,2.564-0.066,3.844	c-11.285-6.088-23.506-11.037-36.622-14.68c-6.854-60.861-70.842-108.715-148.522-108.715c-82.237,0-149.141,53.631-149.141,119.551	c0,34.688,15.009,56.529,36.192,78.068c-4.306,31.98-14.646,59.781-14.646,59.781s30.542-8.064,65.253-28.275	C171.395,329.616,171.806,342.101,174.059,354.374z M461.432,460.169c-27.634-5.029-66.922-16.137-84.739-27.123	c-98.102,24.029-169.6-36.424-169.6-101.154c0-62.166,60.552-107.029,127.453-107.029c67.322,0,127.454,45.203,127.454,107.029	c0,21.928-7.85,43.457-21.738,60.164C439.674,411.634,451.121,439.712,461.432,460.169z M302.524,333.198	c0-9.648-7.841-17.469-17.515-17.469c-9.673,0-17.515,7.82-17.515,17.469s7.842,17.471,17.515,17.471	C294.684,350.669,302.524,342.847,302.524,333.198z M354.75,333.198c0-9.648-7.841-17.469-17.515-17.469	c-9.673,0-17.515,7.82-17.515,17.469s7.842,17.471,17.515,17.471C346.909,350.669,354.75,342.847,354.75,333.198z M406.339,333.198	c0-9.648-7.842-17.469-17.515-17.469c-9.674,0-17.515,7.82-17.515,17.469s7.841,17.471,17.515,17.471	C398.497,350.669,406.339,342.847,406.339,333.198z"/></svg></span></a></li></ul></div><div class="r-Grid-cell r-minM--1of4 putainde-Footer-text--right" data-reactid=".1loz6xnefb4.0.0.0:3.0.2"><span class="putainde-Footer-text putainde-Footer-text--small" data-reactid=".1loz6xnefb4.0.0.0:3.0.2.0"><a class="" href="/en/" data-reactid=".1loz6xnefb4.0.0.0:3.0.2.0.0">English</a><span data-reactid=".1loz6xnefb4.0.0.0:3.0.2.0.1"> | </span><a class="" href="/fr/" data-reactid=".1loz6xnefb4.0.0.0:3.0.2.0.2">Français</a></span></div></div></div><script data-reactid=".1loz6xnefb4.0.0.1"></script></div></div></div></div><script>window.__INITIAL_STATE__ = {"pages":{"fr/articles/js/react/utiliser-en-moteur-de-templates":{"head":{"layout":"Post","comments":true,"date":"2015-05-07","title":"Utiliser React en moteur de templates","tags":["javascript","react"],"authors":["MoOx"]},"body":"<p>Vous connaissez probablement tous des moteurs de templates.\nEn JavaScript nous avons Handlebars, Jade, EJS, Slim…\nTous ces projets partent de bonnes intentions mais à l’utilisation,\non peut sentir des limitations et donc de l’insatisfaction.</p>\n<p>Utiliser Handlebars par exemple, c’est un peu devoir coder tout un tas de helpers\npour gérer une partie de votre affichage, ça peut vite devenir lourd.\nÊtre restreint à une syntaxe limitée par choix est un peu frustrant.\nQuand c’est pas ça, c’est la syntaxe du moteur qui va être lourde.</p>\n<p>On peut en venir à regretter PHP. Faut avouer que ce langage était plutôt simple\nà utiliser en tant que moteur de template.\nEfficace et pas de restrictions. On trouve même parfois des <code>mysql_query()</code>\ndans des templates…</p>\n<p>Blague à part, nous cherchions des langages pour refaire une partie de notre site\npuisque nous n’étions pas vraiment satisfaits du processus actuel\n(anciennement Handlebars, puis Jade).</p>\n<p>Mais finalement, pourquoi ne pas rester avec du JavaScript, purement et simplement ?</p>\n<p>C’est ce que nous avons fait avec React et JSX qui sont de plus en plus utilisés.\nLa syntaxe est plutôt libératrice.</p>\n<p>Pour ceux qui ne connaissent pas JSX, il s’agit d’un superset de JavaScript qui\nsupporte une syntaxe XML transformé en appel de fonctions JavaScript.\nIl faut dire que le XML a beau être verbeux, pour définir des\néléments ayant des propriétés et des enfants, on a pas vraiment fait plus\nlisible et clair sur ce point. Le HTML est plutôt simple à prendre en main c’est\ncertain. Les méthodes de rendu de React (ce qui va nous intéresser) sont très proches\nde l’HTML.</p>\n<p>Ceux qui ont utilisé JSX (bien qu’ayant pu avoir des nausées au premier contact)\navouent souvent qu’ils ont fini par aimer cette petite syntaxe créée par Facebook qui\nfonctionne très bien avec React.</p>\n<p>Du coup, si on utilisait ça pour faire de simple templates et non pas des composants\nd’interface utilisateur dynamiques ? Qui peut le plus peut le moins (quoi qu’en\nfait, des templates, c’est un peu des composants d’interface).</p>\n<h2 id=\"exemple-de-template-react-jsx\"><a class=\"markdownIt-Anchor\" href=\"#exemple-de-template-react-jsx\">#</a> Exemple de template React/JSX</h2>\n<p>Si vous ne savez pas trop ce qu’est React, nous vous recommandons de lire\nnotre <a href=\"/fr/articles/js/react/\">introduction à React</a>.</p>\n<p>Dans notre cas, on ne va pas spécialement bénéficier de certaines de ses forces,\nmais ça fera très bien le job pour notre besoin.</p>\n<p>Nous n’aborderons pas dans le détail la syntaxe React/JSX, ni ES6, pour rester\nfocalisés sur la finalité (on a prévu des articles à ce propos, en attendant\n<a href=\"http://babeljs.io/docs/learn-es6/\">voici de quoi vous occuper avec ES6</a>).</p>\n<p><em>Attention, pour ceux qui sont encore sur des plugins jQuery, ça risque de vous\npiquer les yeux</em> 😭.</p>\n<p><a name=\"es6-class\"></a></p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">import</span> React, {Component} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>\n\nexport default class PostTemplate extends Component {\n\n  render() {\n    return (\n      &lt;html&gt;\n        &lt;head&gt;\n          &lt;title&gt;{this.props.pageTitle}&lt;/title&gt;\n        &lt;/head&gt;\n        &lt;body&gt;\n          &lt;article className=<span class=\"hljs-string\">\"org-Post\"</span>&gt;\n            &lt;header className=<span class=\"hljs-string\">\"org-Post-header\"</span>&gt;\n              &lt;h1&gt;{this.props.pageTitle}&lt;/h1&gt;\n            &lt;/header&gt;\n            &lt;div\n              className=<span class=\"hljs-string\">\"org-Post-content\"</span>\n              dangerouslySetInnerHTML={{__html: this.props.pageContent}}\n            /&gt;\n          &lt;/article&gt;\n        &lt;/body&gt;\n      &lt;/html&gt;\n    )\n  }\n}</code></pre>\n<p>Ce que vous voyez c’est bien du JavaScript. Un peu amélioré via JSX, on ne va\npas le nier (dans notre cas, on gère tout ça de manière transparente avec\n<a href=\"http://babeljs.io/\">babel(-node)</a>).</p>\n<p>Ça ressemble drôlement à de l’HTML et c’est ça qui est appréciable pour nous.\nVous noterez que l’attribut pour définir une classe HTML est <code>className</code> puisque\nReact est en JavaScript et que le mot <code>class</code> est réservé\n(cf. <a href=\"#es6-class\">la définition en ES6 de la classe</a>).</p>\n<p>En même temps ce qui est cool, c’est qu’on reste dans du JavaScript.</p>\n<p>On peut donc utiliser toutes nos bibliothèques préférées via <em>npm</em> pour l’affichage\n(exemple : <code>momentjs</code>), ou simplement des boucles via les méthodes de parcours de\ntableau tel que <code>forEach()</code> ou <code>map()</code> en appelant d’autres composants.</p>\n<p>Ci-dessous vous trouverez un exemple plus complexe avec une page pour la liste\ndes posts et quelques composants.\nLes balises qui ressemblent à du HTML et qui commencent par une majuscule sont liées à des\ncomposants qui doivent être définis (dans notre cas importés).\nC’est une particularité de React.</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">import</span> React, {Component} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>\n\n<span class=\"hljs-keyword\">import</span> Html <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../Html\"</span>\n<span class=\"hljs-keyword\">import</span> Head <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../Head\"</span>\n<span class=\"hljs-keyword\">import</span> Body <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../Body\"</span>\n<span class=\"hljs-keyword\">import</span> PostsList <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../PostsList\"</span>\n\nexport default class Posts extends Component {\n\n  render() {\n    return (\n      &lt;Html&gt;\n        &lt;Head title={head.title} /&gt;\n        &lt;Body&gt;\n          &lt;h1&gt;{head.title}&lt;/h1&gt;\n          &lt;PostsList\n            posts={\n              this.props.collection\n                .filter((item) =&gt; {\n                  /*\n                    ce que vous voulez pour filtrer votre collection\n                    eg:\n                    return !item.draft\n                  */\n                }\n              }\n          /&gt;\n        &lt;/Body&gt;\n      &lt;/Html&gt;\n    )\n  }\n}</code></pre>\n<p>Voici deux exemples de composants utilisés ci-dessus :</p>\n<h3 id=\"head\"><a class=\"markdownIt-Anchor\" href=\"#head\">#</a> Head</h3>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">import</span> React, {Component} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>\n\nexport default class Head extends Component {\n\n  render() {\n    return (\n      &lt;head&gt;\n        &lt;meta charSet=<span class=\"hljs-string\">\"utf-8\"</span> /&gt;\n        &lt;meta httpEquiv=<span class=\"hljs-string\">\"X-UA-Compatible\"</span> content=<span class=\"hljs-string\">\"IE=Edge\"</span> /&gt;\n        &lt;meta\n          name=<span class=\"hljs-string\">\"viewport\"</span>\n          content=<span class=\"hljs-string\">\"width=device-width, initial-scale=1.0\"</span>\n        /&gt;\n        &lt;title&gt;{this.props.title}&lt;/title&gt;\n        &lt;link\n          rel=<span class=\"hljs-string\">\"stylesheet\"</span>\n          href=<span class=\"hljs-string\">\"/index.css\"</span>\n        /&gt;\n        &lt;link\n          rel=<span class=\"hljs-string\">\"alternate\"</span>\n          href=<span class=\"hljs-string\">\"/feed.xml\"</span>\n          title={this.props.title}\n          type=<span class=\"hljs-string\">\"application/atom+xml\"</span>\n        /&gt;\n        {this.props.children}\n      &lt;/head&gt;\n    )\n  }\n}</code></pre>\n<h3 id=\"body\"><a class=\"markdownIt-Anchor\" href=\"#body\">#</a> Body</h3>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">import</span> React, {Component, PropTypes} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>\n\n<span class=\"hljs-keyword\">import</span> Header <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../Header\"</span>\n<span class=\"hljs-keyword\">import</span> Footer <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../Footer\"</span>\n<span class=\"hljs-keyword\">import</span> GoogleAnalytics <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../Analytics\"</span>\n\nexport default class Body extends Component {\n\n  render() {\n    return (\n      &lt;body&gt;\n\n        &lt;Header /&gt;\n\n        &lt;div className=<span class=\"hljs-string\">\"Main\"</span>&gt;\n          {this.props.children}\n        &lt;/div&gt;\n\n        &lt;Footer /&gt;\n\n        &lt;script src={<span class=\"hljs-string\">\"/index.js\"</span>}&gt;&lt;/script&gt;\n\n        &lt;GoogleAnalytics /&gt;\n\n      &lt;/body&gt;\n    )\n  }\n}</code></pre>\n<p>Bon c’est bien beau mais comment je gère l’affichage du composant initial\nfinalement (le parent) ?</p>\n<h2 id=\"comment-utiliser-un-template-react-jsx\"><a class=\"markdownIt-Anchor\" href=\"#comment-utiliser-un-template-react-jsx\">#</a> Comment utiliser un template React/JSX ?</h2>\n<p>C’est bien simple. Dans notre cas, pas besoin de React côté client. On doit gérer\nça côté « serveur » (je mets ça entre guillemets puisque dans notre cas précis, c’est\npour générer un site statique, et c’est donc sur une machine quelconque que la\ngénération se fait).</p>\n<p>Voilà de quoi effectuer le rendu de nos composants vers du bon vieux HTML (car c’est la finalité\nd’un <em>moteur de template</em>).</p>\n<pre><code class=\"language-js\">import react from \"react\"\nimport markdownify from \"./markdown-parser\"\n// je vous conseille marked pour rendre du markdown\n// c'est ce que nous utilisons pour rendre nos pages à l'heure où j'écris ce post\n\nconst reactClass = require(\"./template/PostTemplate\")\nconst component = new (react.createFactory(reactClass))({\n  // ici on passe nos \"props\" react\n  pageTitle: \"Test\",\n  pageContent: markdownify(\"Imaginons du **markdown** parsé\"),\n  // vous pouvez bien entendu rajouter d'autres choses\n  collections: {\n    posts: [\n      //...\n    ]\n  }\n})\n\nlet html\ntry {\n  html = react.renderToStaticMarkup(component)\n}\ncatch (err) {\n  // Vous devrez gérer votre exception selon votre environnement\n  // si c'est pour un test on peut simplement ne pas utiliser\n  // try/catch, ça nous pètera à la gueule et c'est tant mieux\n  throw err\n}\n\n// maintenant vous faites ce que vous voulez de votre string html !\n// ex: require(\"fs\").writeFile(...)</code></pre>\n<p>La méthode intéressante de React est dans notre cas <code>renderToStaticMarkup()</code> qui\nva nous générer un HTML qui va bien.</p>\n<p>Pour aller plus loin on pourrait décider d’utiliser <code>renderToString()</code> plutôt que\n<code>renderToStaticMarkup()</code> afin de pouvoir faire prendre le relais à ReactJS côté client\nmais là <a href=\"/fr/articles/js/react/cote-serveur/\">le niveau de complexité est différent</a>.</p>\n<p>Pour la petite anecdote, notre site utilise actuellement <a href=\"http://www.metalsmith.io/\">metalsmith</a>,\nune petite bibliothèque simple mais qui permet par son API de faire des choses sympas.</p>\n<p>J’ai donc codé <a href=\"https://github.com/search?q=user%3AMoOx+metalsmith\">quelques plugins metalsmith</a>\ndont un <a href=\"https://github.com/MoOx/metalsmith-react\">metalsmith-react</a> à l’occasion.</p>\n<p>N’hésitez pas à consulter\n<a href=\"https://github.com/putaindecode/putaindecode.io\">le code source de notre site</a>\npour faire des découvertes sympas.</p>\n","rawBody":"\nVous connaissez probablement tous des moteurs de templates.\nEn JavaScript nous avons Handlebars, Jade, EJS, Slim...\nTous ces projets partent de bonnes intentions mais à l'utilisation,\non peut sentir des limitations et donc de l'insatisfaction.\n\nUtiliser Handlebars par exemple, c'est un peu devoir coder tout un tas de helpers\npour gérer une partie de votre affichage, ça peut vite devenir lourd.\nÊtre restreint à une syntaxe limitée par choix est un peu frustrant.\nQuand c'est pas ça, c'est la syntaxe du moteur qui va être lourde.\n\nOn peut en venir à regretter PHP. Faut avouer que ce langage était plutôt simple\nà utiliser en tant que moteur de template.\nEfficace et pas de restrictions. On trouve même parfois des `mysql_query()`\ndans des templates…\n\nBlague à part, nous cherchions des langages pour refaire une partie de notre site\npuisque nous n'étions pas vraiment satisfaits du processus actuel\n(anciennement Handlebars, puis Jade).\n\nMais finalement, pourquoi ne pas rester avec du JavaScript, purement et simplement ?\n\nC'est ce que nous avons fait avec React et JSX qui sont de plus en plus utilisés.\nLa syntaxe est plutôt libératrice.\n\nPour ceux qui ne connaissent pas JSX, il s'agit d'un superset de JavaScript qui\nsupporte une syntaxe XML transformé en appel de fonctions JavaScript.\nIl faut dire que le XML a beau être verbeux, pour définir des\néléments ayant des propriétés et des enfants, on a pas vraiment fait plus\nlisible et clair sur ce point. Le HTML est plutôt simple à prendre en main c'est\ncertain. Les méthodes de rendu de React (ce qui va nous intéresser) sont très proches\nde l'HTML.\n\nCeux qui ont utilisé JSX (bien qu'ayant pu avoir des nausées au premier contact)\navouent souvent qu'ils ont fini par aimer cette petite syntaxe créée par Facebook qui\nfonctionne très bien avec React.\n\nDu coup, si on utilisait ça pour faire de simple templates et non pas des composants\nd'interface utilisateur dynamiques ? Qui peut le plus peut le moins (quoi qu'en\nfait, des templates, c'est un peu des composants d'interface).\n\n## Exemple de template React/JSX\n\nSi vous ne savez pas trop ce qu'est React, nous vous recommandons de lire\nnotre [introduction à React](/fr/articles/js/react/).\n\nDans notre cas, on ne va pas spécialement bénéficier de certaines de ses forces,\nmais ça fera très bien le job pour notre besoin.\n\nNous n'aborderons pas dans le détail la syntaxe React/JSX, ni ES6, pour rester\nfocalisés sur la finalité (on a prévu des articles à ce propos, en attendant\n  [voici de quoi vous occuper avec ES6](http://babeljs.io/docs/learn-es6/)).\n\n_Attention, pour ceux qui sont encore sur des plugins jQuery, ça risque de vous\npiquer les yeux_ 😭.\n\n<a name=\"es6-class\"></a>\n\n```js\nimport React, {Component} from \"react\"\n\nexport default class PostTemplate extends Component {\n\n  render() {\n    return (\n      <html>\n        <head>\n          <title>{this.props.pageTitle}</title>\n        </head>\n        <body>\n          <article className=\"org-Post\">\n            <header className=\"org-Post-header\">\n              <h1>{this.props.pageTitle}</h1>\n            </header>\n            <div\n              className=\"org-Post-content\"\n              dangerouslySetInnerHTML={{__html: this.props.pageContent}}\n            />\n          </article>\n        </body>\n      </html>\n    )\n  }\n}\n```\n\nCe que vous voyez c'est bien du JavaScript. Un peu amélioré via JSX, on ne va\npas le nier (dans notre cas, on gère tout ça de manière transparente avec\n[babel(-node)](http://babeljs.io/)).\n\nÇa ressemble drôlement à de l'HTML et c'est ça qui est appréciable pour nous.\nVous noterez que l'attribut pour définir une classe HTML est `className` puisque\nReact est en JavaScript et que le mot `class` est réservé\n(cf. [la définition en ES6 de la classe](#es6-class)).\n\nEn même temps ce qui est cool, c'est qu'on reste dans du JavaScript.\n\nOn peut donc utiliser toutes nos bibliothèques préférées via _npm_ pour l'affichage\n(exemple : `momentjs`), ou simplement des boucles via les méthodes de parcours de\ntableau tel que `forEach()` ou `map()` en appelant d'autres composants.\n\nCi-dessous vous trouverez un exemple plus complexe avec une page pour la liste\ndes posts et quelques composants.\nLes balises qui ressemblent à du HTML et qui commencent par une majuscule sont liées à des\ncomposants qui doivent être définis (dans notre cas importés).\nC'est une particularité de React.\n\n```js\nimport React, {Component} from \"react\"\n\nimport Html from \"../Html\"\nimport Head from \"../Head\"\nimport Body from \"../Body\"\nimport PostsList from \"../PostsList\"\n\nexport default class Posts extends Component {\n\n  render() {\n    return (\n      <Html>\n        <Head title={head.title} />\n        <Body>\n          <h1>{head.title}</h1>\n          <PostsList\n            posts={\n              this.props.collection\n                .filter((item) => {\n                  /*\n                    ce que vous voulez pour filtrer votre collection\n                    eg:\n                    return !item.draft\n                  */\n                }\n              }\n          />\n        </Body>\n      </Html>\n    )\n  }\n}\n```\n\nVoici deux exemples de composants utilisés ci-dessus :\n\n### Head\n\n```js\nimport React, {Component} from \"react\"\n\nexport default class Head extends Component {\n\n  render() {\n    return (\n      <head>\n        <meta charSet=\"utf-8\" />\n        <meta httpEquiv=\"X-UA-Compatible\" content=\"IE=Edge\" />\n        <meta\n          name=\"viewport\"\n          content=\"width=device-width, initial-scale=1.0\"\n        />\n        <title>{this.props.title}</title>\n        <link\n          rel=\"stylesheet\"\n          href=\"/index.css\"\n        />\n        <link\n          rel=\"alternate\"\n          href=\"/feed.xml\"\n          title={this.props.title}\n          type=\"application/atom+xml\"\n        />\n        {this.props.children}\n      </head>\n    )\n  }\n}\n```\n\n### Body\n\n```js\nimport React, {Component, PropTypes} from \"react\"\n\nimport Header from \"../Header\"\nimport Footer from \"../Footer\"\nimport GoogleAnalytics from \"../Analytics\"\n\nexport default class Body extends Component {\n\n  render() {\n    return (\n      <body>\n\n        <Header />\n\n        <div className=\"Main\">\n          {this.props.children}\n        </div>\n\n        <Footer />\n\n        <script src={\"/index.js\"}><\/script>\n\n        <GoogleAnalytics />\n\n      </body>\n    )\n  }\n}\n```\n\nBon c'est bien beau mais comment je gère l'affichage du composant initial\nfinalement (le parent) ?\n\n## Comment utiliser un template React/JSX ?\n\nC'est bien simple. Dans notre cas, pas besoin de React côté client. On doit gérer\nça côté « serveur » (je mets ça entre guillemets puisque dans notre cas précis, c'est\npour générer un site statique, et c'est donc sur une machine quelconque que la\ngénération se fait).\n\nVoilà de quoi effectuer le rendu de nos composants vers du bon vieux HTML (car c'est la finalité\nd'un _moteur de template_).\n\n```js\nimport react from \"react\"\nimport markdownify from \"./markdown-parser\"\n// je vous conseille marked pour rendre du markdown\n// c'est ce que nous utilisons pour rendre nos pages à l'heure où j'écris ce post\n\nconst reactClass = require(\"./template/PostTemplate\")\nconst component = new (react.createFactory(reactClass))({\n  // ici on passe nos \"props\" react\n  pageTitle: \"Test\",\n  pageContent: markdownify(\"Imaginons du **markdown** parsé\"),\n  // vous pouvez bien entendu rajouter d'autres choses\n  collections: {\n    posts: [\n      //...\n    ]\n  }\n})\n\nlet html\ntry {\n  html = react.renderToStaticMarkup(component)\n}\ncatch (err) {\n  // Vous devrez gérer votre exception selon votre environnement\n  // si c'est pour un test on peut simplement ne pas utiliser\n  // try/catch, ça nous pètera à la gueule et c'est tant mieux\n  throw err\n}\n\n// maintenant vous faites ce que vous voulez de votre string html !\n// ex: require(\"fs\").writeFile(...)\n```\n\nLa méthode intéressante de React est dans notre cas `renderToStaticMarkup()` qui\nva nous générer un HTML qui va bien.\n\nPour aller plus loin on pourrait décider d'utiliser `renderToString()` plutôt que\n`renderToStaticMarkup()` afin de pouvoir faire prendre le relais à ReactJS côté client\nmais là [le niveau de complexité est différent](/fr/articles/js/react/cote-serveur/).\n\nPour la petite anecdote, notre site utilise actuellement [metalsmith](http://www.metalsmith.io/),\nune petite bibliothèque simple mais qui permet par son API de faire des choses sympas.\n\nJ'ai donc codé [quelques plugins metalsmith](https://github.com/search?q=user%3AMoOx+metalsmith)\ndont un [metalsmith-react](https://github.com/MoOx/metalsmith-react) à l'occasion.\n\nN'hésitez pas à consulter\n[le code source de notre site](https://github.com/putaindecode/putaindecode.io)\npour faire des découvertes sympas.\n","raw":"---\ndate: \"2015-05-07\"\ntitle: \"Utiliser React en moteur de templates\"\ntags:\n  - javascript\n  - react\nauthors:\n  - MoOx\n---\n\nVous connaissez probablement tous des moteurs de templates.\nEn JavaScript nous avons Handlebars, Jade, EJS, Slim...\nTous ces projets partent de bonnes intentions mais à l'utilisation,\non peut sentir des limitations et donc de l'insatisfaction.\n\nUtiliser Handlebars par exemple, c'est un peu devoir coder tout un tas de helpers\npour gérer une partie de votre affichage, ça peut vite devenir lourd.\nÊtre restreint à une syntaxe limitée par choix est un peu frustrant.\nQuand c'est pas ça, c'est la syntaxe du moteur qui va être lourde.\n\nOn peut en venir à regretter PHP. Faut avouer que ce langage était plutôt simple\nà utiliser en tant que moteur de template.\nEfficace et pas de restrictions. On trouve même parfois des `mysql_query()`\ndans des templates…\n\nBlague à part, nous cherchions des langages pour refaire une partie de notre site\npuisque nous n'étions pas vraiment satisfaits du processus actuel\n(anciennement Handlebars, puis Jade).\n\nMais finalement, pourquoi ne pas rester avec du JavaScript, purement et simplement ?\n\nC'est ce que nous avons fait avec React et JSX qui sont de plus en plus utilisés.\nLa syntaxe est plutôt libératrice.\n\nPour ceux qui ne connaissent pas JSX, il s'agit d'un superset de JavaScript qui\nsupporte une syntaxe XML transformé en appel de fonctions JavaScript.\nIl faut dire que le XML a beau être verbeux, pour définir des\néléments ayant des propriétés et des enfants, on a pas vraiment fait plus\nlisible et clair sur ce point. Le HTML est plutôt simple à prendre en main c'est\ncertain. Les méthodes de rendu de React (ce qui va nous intéresser) sont très proches\nde l'HTML.\n\nCeux qui ont utilisé JSX (bien qu'ayant pu avoir des nausées au premier contact)\navouent souvent qu'ils ont fini par aimer cette petite syntaxe créée par Facebook qui\nfonctionne très bien avec React.\n\nDu coup, si on utilisait ça pour faire de simple templates et non pas des composants\nd'interface utilisateur dynamiques ? Qui peut le plus peut le moins (quoi qu'en\nfait, des templates, c'est un peu des composants d'interface).\n\n## Exemple de template React/JSX\n\nSi vous ne savez pas trop ce qu'est React, nous vous recommandons de lire\nnotre [introduction à React](/fr/articles/js/react/).\n\nDans notre cas, on ne va pas spécialement bénéficier de certaines de ses forces,\nmais ça fera très bien le job pour notre besoin.\n\nNous n'aborderons pas dans le détail la syntaxe React/JSX, ni ES6, pour rester\nfocalisés sur la finalité (on a prévu des articles à ce propos, en attendant\n  [voici de quoi vous occuper avec ES6](http://babeljs.io/docs/learn-es6/)).\n\n_Attention, pour ceux qui sont encore sur des plugins jQuery, ça risque de vous\npiquer les yeux_ 😭.\n\n<a name=\"es6-class\"></a>\n\n```js\nimport React, {Component} from \"react\"\n\nexport default class PostTemplate extends Component {\n\n  render() {\n    return (\n      <html>\n        <head>\n          <title>{this.props.pageTitle}</title>\n        </head>\n        <body>\n          <article className=\"org-Post\">\n            <header className=\"org-Post-header\">\n              <h1>{this.props.pageTitle}</h1>\n            </header>\n            <div\n              className=\"org-Post-content\"\n              dangerouslySetInnerHTML={{__html: this.props.pageContent}}\n            />\n          </article>\n        </body>\n      </html>\n    )\n  }\n}\n```\n\nCe que vous voyez c'est bien du JavaScript. Un peu amélioré via JSX, on ne va\npas le nier (dans notre cas, on gère tout ça de manière transparente avec\n[babel(-node)](http://babeljs.io/)).\n\nÇa ressemble drôlement à de l'HTML et c'est ça qui est appréciable pour nous.\nVous noterez que l'attribut pour définir une classe HTML est `className` puisque\nReact est en JavaScript et que le mot `class` est réservé\n(cf. [la définition en ES6 de la classe](#es6-class)).\n\nEn même temps ce qui est cool, c'est qu'on reste dans du JavaScript.\n\nOn peut donc utiliser toutes nos bibliothèques préférées via _npm_ pour l'affichage\n(exemple : `momentjs`), ou simplement des boucles via les méthodes de parcours de\ntableau tel que `forEach()` ou `map()` en appelant d'autres composants.\n\nCi-dessous vous trouverez un exemple plus complexe avec une page pour la liste\ndes posts et quelques composants.\nLes balises qui ressemblent à du HTML et qui commencent par une majuscule sont liées à des\ncomposants qui doivent être définis (dans notre cas importés).\nC'est une particularité de React.\n\n```js\nimport React, {Component} from \"react\"\n\nimport Html from \"../Html\"\nimport Head from \"../Head\"\nimport Body from \"../Body\"\nimport PostsList from \"../PostsList\"\n\nexport default class Posts extends Component {\n\n  render() {\n    return (\n      <Html>\n        <Head title={head.title} />\n        <Body>\n          <h1>{head.title}</h1>\n          <PostsList\n            posts={\n              this.props.collection\n                .filter((item) => {\n                  /*\n                    ce que vous voulez pour filtrer votre collection\n                    eg:\n                    return !item.draft\n                  */\n                }\n              }\n          />\n        </Body>\n      </Html>\n    )\n  }\n}\n```\n\nVoici deux exemples de composants utilisés ci-dessus :\n\n### Head\n\n```js\nimport React, {Component} from \"react\"\n\nexport default class Head extends Component {\n\n  render() {\n    return (\n      <head>\n        <meta charSet=\"utf-8\" />\n        <meta httpEquiv=\"X-UA-Compatible\" content=\"IE=Edge\" />\n        <meta\n          name=\"viewport\"\n          content=\"width=device-width, initial-scale=1.0\"\n        />\n        <title>{this.props.title}</title>\n        <link\n          rel=\"stylesheet\"\n          href=\"/index.css\"\n        />\n        <link\n          rel=\"alternate\"\n          href=\"/feed.xml\"\n          title={this.props.title}\n          type=\"application/atom+xml\"\n        />\n        {this.props.children}\n      </head>\n    )\n  }\n}\n```\n\n### Body\n\n```js\nimport React, {Component, PropTypes} from \"react\"\n\nimport Header from \"../Header\"\nimport Footer from \"../Footer\"\nimport GoogleAnalytics from \"../Analytics\"\n\nexport default class Body extends Component {\n\n  render() {\n    return (\n      <body>\n\n        <Header />\n\n        <div className=\"Main\">\n          {this.props.children}\n        </div>\n\n        <Footer />\n\n        <script src={\"/index.js\"}><\/script>\n\n        <GoogleAnalytics />\n\n      </body>\n    )\n  }\n}\n```\n\nBon c'est bien beau mais comment je gère l'affichage du composant initial\nfinalement (le parent) ?\n\n## Comment utiliser un template React/JSX ?\n\nC'est bien simple. Dans notre cas, pas besoin de React côté client. On doit gérer\nça côté « serveur » (je mets ça entre guillemets puisque dans notre cas précis, c'est\npour générer un site statique, et c'est donc sur une machine quelconque que la\ngénération se fait).\n\nVoilà de quoi effectuer le rendu de nos composants vers du bon vieux HTML (car c'est la finalité\nd'un _moteur de template_).\n\n```js\nimport react from \"react\"\nimport markdownify from \"./markdown-parser\"\n// je vous conseille marked pour rendre du markdown\n// c'est ce que nous utilisons pour rendre nos pages à l'heure où j'écris ce post\n\nconst reactClass = require(\"./template/PostTemplate\")\nconst component = new (react.createFactory(reactClass))({\n  // ici on passe nos \"props\" react\n  pageTitle: \"Test\",\n  pageContent: markdownify(\"Imaginons du **markdown** parsé\"),\n  // vous pouvez bien entendu rajouter d'autres choses\n  collections: {\n    posts: [\n      //...\n    ]\n  }\n})\n\nlet html\ntry {\n  html = react.renderToStaticMarkup(component)\n}\ncatch (err) {\n  // Vous devrez gérer votre exception selon votre environnement\n  // si c'est pour un test on peut simplement ne pas utiliser\n  // try/catch, ça nous pètera à la gueule et c'est tant mieux\n  throw err\n}\n\n// maintenant vous faites ce que vous voulez de votre string html !\n// ex: require(\"fs\").writeFile(...)\n```\n\nLa méthode intéressante de React est dans notre cas `renderToStaticMarkup()` qui\nva nous générer un HTML qui va bien.\n\nPour aller plus loin on pourrait décider d'utiliser `renderToString()` plutôt que\n`renderToStaticMarkup()` afin de pouvoir faire prendre le relais à ReactJS côté client\nmais là [le niveau de complexité est différent](/fr/articles/js/react/cote-serveur/).\n\nPour la petite anecdote, notre site utilise actuellement [metalsmith](http://www.metalsmith.io/),\nune petite bibliothèque simple mais qui permet par son API de faire des choses sympas.\n\nJ'ai donc codé [quelques plugins metalsmith](https://github.com/search?q=user%3AMoOx+metalsmith)\ndont un [metalsmith-react](https://github.com/MoOx/metalsmith-react) à l'occasion.\n\nN'hésitez pas à consulter\n[le code source de notre site](https://github.com/putaindecode/putaindecode.io)\npour faire des découvertes sympas.\n","__filename":"fr/articles/js/react/utiliser-en-moteur-de-templates/index.md","__url":"/fr/articles/js/react/utiliser-en-moteur-de-templates/","type":"Post"}}}</script><script src="/statinamic-client.js"></script></body></html>