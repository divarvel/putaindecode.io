<!doctype html><html lang="en"><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="viewport" content="width=device-width, initial-scale=1" /><link rel="stylesheet" href="/statinamic-client.css" /><meta data-react-helmet="true" property="og:site_name" content="Putain de code !"/><meta data-react-helmet="true" name="twitter:site" content="@putaindecode_fr"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Premier exemple d&#x27;utilisation de Webpack"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="Premier exemple d&#x27;utilisation de Webpack"/><meta data-react-helmet="true" name="twitter:creator" content="@MoOx"/><title data-react-helmet="true">Premier exemple d&#x27;utilisation de Webpack</title></head><body><div id="statinamic"><div id="statinamic-container" data-reactid=".20v217rw9og" data-react-checksum="1003302073"><div class="r-VerticalRhythm" lang="fr" data-reactid=".20v217rw9og.0"><div data-reactid=".20v217rw9og.0.0"><noscript data-reactid=".20v217rw9og.0.0.0:0"></noscript><div class="putainde-Header" data-reactid=".20v217rw9og.0.0.0:1"><div class="r-Grid" data-reactid=".20v217rw9og.0.0.0:1.0"><div class="r-Grid-cell r-minM--1of3" data-reactid=".20v217rw9og.0.0.0:1.0.0"><a class="putainde-SiteTitle" href="/" data-reactid=".20v217rw9og.0.0.0:1.0.0.0"><span class="SVGIcon SVGIcon--cleaned putainde-Logo" data-reactid=".20v217rw9og.0.0.0:1.0.0.0.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Logo-svg" xmlns="http://www.w3.org/2000/svg" viewBox="-49.5 652.5 512 512"><radialGradient id="a" cx="206.455" cy="-395.01" r="243.791" gradientTransform="matrix(.9784 0 0 -.9765 4.504 505.604)" gradientUnits="userSpaceOnUse"><stop offset=".8"/><stop offset=".95" stop-color="#333"/></radialGradient><linearGradient id="b" gradientUnits="userSpaceOnUse" x1="-34" y1="-376.331" x2="447" y2="-376.331" gradientTransform="matrix(1 0 0 -1 0 515)"><stop offset="0" stop-color="#333"/><stop offset="1"/></linearGradient><path vector-effect="non-scaling-stroke" opacity=".4" fill="url(#a)" stroke="url(#b)" stroke-miterlimit="10" d="M-33.5,891.331c0-130.655,107.456-236.581,240.01-236.581c132.535,0,239.99,105.927,239.99,236.581 c0,130.653-107.455,236.581-239.99,236.581C73.956,1127.911-33.5,1021.984-33.5,891.331z"/><linearGradient id="c" gradientUnits="userSpaceOnUse" x1="-34.5" y1="-377.169" x2="447.5" y2="-377.169" gradientTransform="matrix(1 0 0 -1 0 515)"><stop offset="0" stop-color="#333"/><stop offset="1"/></linearGradient><path opacity=".2" fill="none" stroke="url(#c)" stroke-width="2" stroke-miterlimit="10" d="M-33.5,892.169c0-130.655,107.456-236.581,240.01-236.581c132.535,0,239.99,105.928,239.99,236.581 c0,130.654-107.455,236.581-239.99,236.581C73.956,1128.75-33.5,1022.824-33.5,892.169z"/><g><linearGradient id="d" gradientUnits="userSpaceOnUse" x1="30.247" y1="427.851" x2="30.247" y2="228.319" gradientTransform="matrix(2.3906 0 0 -2.3906 134.192 1708.07)"><stop offset="0" stop-color="#FFF"/><stop offset="1" stop-color="#EEE"/></linearGradient><path vector-effect="non-scaling-stroke" fill="url(#d)" stroke="#7A7A7A" stroke-miterlimit="10" d="M1,889.671c0,112.916,92.003,204.444,205.51,204.444c1.283,0,2.565-0.019,3.828-0.04c19.795,40.379,61.281,68.175,109.258,68.175 c3.686,0,7.334-0.157,10.941-0.481c-20.401-23.875-33.307-54.348-35.07-87.771C364.424,1041.018,412,970.873,412,889.673 c0-112.894-92.004-204.423-205.49-204.423C93.004,685.247,1,776.777,1,889.671z"/><path fill="none" stroke="#7A7A7A" stroke-width="2" stroke-miterlimit="10" d="M1,889.671 c0,112.916,92.003,204.444,205.51,204.444c1.283,0,2.565-0.019,3.828-0.04c19.795,40.379,61.281,68.175,109.258,68.175 c3.686,0,7.334-0.157,10.941-0.481c-20.401-23.875-33.307-54.348-35.07-87.771C364.424,1041.018,412,970.873,412,889.673 c0-112.894-92.004-204.423-205.49-204.423C93.004,685.247,1,776.777,1,889.671z"/></g><g stroke="#333333" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"><path vector-effect="non-scaling-stroke" fill="#444444" d="M187.747,832.25H132.5v123h27.551v-45.188h28.086c7.596,0,14.055-1.102,19.378-3.302c5.323-2.196,9.656-5.138,13.019-8.745 c3.364-3.605,5.801-7.795,7.327-12.498c1.527-4.707,2.312-9.494,2.312-14.363c0-4.978-0.785-9.807-2.312-14.428 c-1.567-4.625-4.024-8.789-7.387-12.396c-3.363-3.605-7.765-6.551-13.168-8.747C201.924,833.391,195.421,832.25,187.747,832.25z M181.225,889.979h-21.173v-37.641h21.173c3.096,0,6.107,0.227,8.996,0.704c2.891,0.478,5.428,1.411,7.635,2.738 c2.187,1.346,3.941,3.274,5.285,5.698c1.319,2.463,1.979,5.679,1.979,9.682s-0.66,7.253-1.979,9.68 c-1.344,2.486-3.1,4.395-5.285,5.742c-2.207,1.327-4.744,2.236-7.635,2.695C187.334,889.753,184.32,889.979,181.225,889.979z"/><path fill="none" stroke-width="2" d="M187.747,832.25H132.5v123h27.551v-45.188h28.086c7.596,0,14.055-1.102,19.378-3.302c5.323-2.196,9.656-5.138,13.019-8.745 c3.364-3.605,5.801-7.795,7.327-12.498c1.527-4.707,2.312-9.494,2.312-14.363c0-4.978-0.785-9.807-2.312-14.428 c-1.567-4.625-4.024-8.789-7.387-12.396c-3.363-3.605-7.765-6.551-13.168-8.747C201.924,833.391,195.421,832.25,187.747,832.25z M181.225,889.979h-21.173v-37.641h21.173c3.096,0,6.107,0.227,8.996,0.704c2.891,0.478,5.428,1.411,7.635,2.738 c2.187,1.346,3.941,3.274,5.285,5.698c1.319,2.463,1.979,5.679,1.979,9.682s-0.66,7.253-1.979,9.68 c-1.344,2.486-3.1,4.395-5.285,5.742c-2.207,1.327-4.744,2.236-7.635,2.695C187.334,889.753,184.32,889.979,181.225,889.979z"/><g><path vector-effect="non-scaling-stroke" fill="#444444" d="M247.616,944.686c0,9.709,7.241,17.064,17.44,17.064c10.202,0,17.442-7.357,17.442-17.064c0-9.25-7.24-16.328-17.441-16.328 C254.855,927.592,247.616,934.95,247.616,944.686z M280.201,881.346V831.75h-30.292v49.596l6.886,37.639h16.521L280.201,881.346z"/><path fill="none" stroke-width="2" d="M247.616,944.686c0,9.709,7.241,17.064,17.44,17.064c10.202,0,17.442-7.357,17.442-17.064c0-9.25-7.24-16.328-17.441-16.328 C254.855,927.592,247.616,934.95,247.616,944.686z M280.201,881.346V831.75h-30.292v49.596l6.886,37.639h16.521L280.201,881.346z"/></g></g><g><linearGradient id="e" gradientUnits="userSpaceOnUse" x1="87.136" y1="385.394" x2="87.136" y2="297.549" gradientTransform="matrix(2.3906 0 0 -2.3906 134.192 1708.07)"><stop offset="0" stop-color="#c5372f"/><stop offset="1" stop-color="#900"/></linearGradient><path vector-effect="non-scaling-stroke" fill="url(#e)" stroke="#8B2721" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M314.164,970.195c2.755,0,4.955-0.561,6.592-1.577c1.639-1.095,2.916-2.451,3.854-4.009c0.923-1.614,1.519-3.43,1.758-5.362 c0.22-1.996,0.382-3.806,0.382-5.465v-36.5c0-4.823,0.895-8.829,2.715-11.96c1.818-3.09,3.978-5.622,6.469-7.516 c2.48-1.873,5.058-3.27,7.773-4.106c2.733-0.818,4.952-1.354,6.706-1.496v-0.697c-1.756-0.139-3.973-0.598-6.706-1.356 c-2.718-0.735-5.293-2.111-7.773-3.984c-2.491-1.895-4.648-4.564-6.469-7.994c-1.82-3.408-2.715-7.936-2.715-13.574v-34.669 c0-1.812-0.162-3.706-0.382-5.661c-0.239-1.955-0.837-3.769-1.758-5.363c-0.938-1.574-2.218-2.93-3.854-3.986 s-3.837-1.613-6.592-1.613H302.5V786.75h28.781c2.694,0,5.753,0.676,9.169,1.953c3.414,1.316,6.632,3.25,9.591,5.762 c2.953,2.532,5.449,5.741,7.53,9.669c2.036,3.927,3.112,8.472,3.112,13.695v43.299c0,3.849,0.742,7.118,2.299,9.788 c1.56,2.691,3.417,4.844,5.614,6.459c2.157,1.615,4.875,2.751,7.392,3.43c2.496,0.678,4.652,1.016,6.512,1.016v20.076 c-1.857,0-4.016,0.379-6.512,1.058c-2.517,0.677-5.232,1.772-7.394,3.209c-2.195,1.455-4.055,3.429-5.612,5.88 c-1.557,2.453-2.299,5.423-2.299,8.932v44.697c0,5.2-1.076,9.771-3.112,13.696c-2.079,3.927-4.577,7.116-7.532,9.688 c-2.955,2.487-6.175,4.402-9.589,5.74c-3.416,1.275-6.475,1.954-9.169,1.954H302.5v-26.554L314.164,970.195L314.164,970.195 L314.164,970.195z"/><path fill="none" stroke="#8B2721" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M314.164,970.195c2.755,0,4.955-0.561,6.592-1.577c1.639-1.095,2.916-2.451,3.854-4.009c0.923-1.614,1.519-3.43,1.758-5.362 c0.22-1.996,0.382-3.806,0.382-5.465v-36.5c0-4.823,0.895-8.829,2.715-11.96c1.818-3.09,3.978-5.622,6.469-7.516 c2.48-1.873,5.058-3.27,7.773-4.106c2.733-0.818,4.952-1.354,6.706-1.496v-0.697c-1.756-0.139-3.973-0.598-6.706-1.356 c-2.718-0.735-5.293-2.111-7.773-3.984c-2.491-1.895-4.648-4.564-6.469-7.994c-1.82-3.408-2.715-7.936-2.715-13.574v-34.669 c0-1.812-0.162-3.706-0.382-5.661c-0.239-1.955-0.837-3.769-1.758-5.363c-0.938-1.574-2.218-2.93-3.854-3.986 s-3.837-1.613-6.592-1.613H302.5V786.75h28.781c2.694,0,5.753,0.676,9.169,1.953c3.414,1.316,6.632,3.25,9.591,5.762 c2.953,2.532,5.449,5.741,7.53,9.669c2.036,3.927,3.112,8.472,3.112,13.695v43.299c0,3.849,0.742,7.118,2.299,9.788 c1.56,2.691,3.417,4.844,5.614,6.459c2.157,1.615,4.875,2.751,7.392,3.43c2.496,0.678,4.652,1.016,6.512,1.016v20.076 c-1.857,0-4.016,0.379-6.512,1.058c-2.517,0.677-5.232,1.772-7.394,3.209c-2.195,1.455-4.055,3.429-5.612,5.88 c-1.557,2.453-2.299,5.423-2.299,8.932v44.697c0,5.2-1.076,9.771-3.112,13.696c-2.079,3.927-4.577,7.116-7.532,9.688 c-2.955,2.487-6.175,4.402-9.589,5.74c-3.416,1.275-6.475,1.954-9.169,1.954H302.5v-26.554L314.164,970.195L314.164,970.195 L314.164,970.195z"/><g><linearGradient id="f" gradientUnits="userSpaceOnUse" x1="-26.642" y1="385.394" x2="-26.642" y2="297.55" gradientTransform="matrix(2.3906 0 0 -2.3906 134.192 1708.07)"><stop offset="0" stop-color="#c5372f"/><stop offset="1" stop-color="#900"/></linearGradient><path vector-effect="non-scaling-stroke" fill="url(#f)" stroke="#8B2721" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M98.835,813.305c-2.797,0-4.995,0.56-6.632,1.615c-1.618,1.057-2.916,2.413-3.815,3.987c-0.958,1.596-1.559,3.409-1.778,5.362 c-0.24,1.955-0.339,3.848-0.339,5.664V864.6c0,5.642-0.958,10.166-2.776,13.576c-1.818,3.43-3.975,6.1-6.432,7.993 c-2.496,1.874-5.073,3.25-7.811,3.985c-2.716,0.759-4.914,1.217-6.671,1.355v0.697c1.758,0.141,3.955,0.678,6.671,1.495 c2.737,0.838,5.314,2.233,7.811,4.106c2.456,1.895,4.614,4.426,6.432,7.517c1.817,3.13,2.776,7.136,2.776,11.96v36.501 c0,1.651,0.101,3.466,0.339,5.463c0.22,1.931,0.818,3.748,1.778,5.362c0.899,1.555,2.197,2.908,3.815,4.006 c1.637,1.021,3.835,1.58,6.632,1.58H110.5v26.552H81.716c-2.716,0-5.792-0.676-9.208-1.954c-3.396-1.337-6.592-3.251-9.548-5.74 c-2.937-2.574-5.493-5.762-7.531-9.688c-2.077-3.929-3.097-8.496-3.097-13.701v-44.692c0-3.51-0.798-6.479-2.357-8.933 c-1.558-2.449-3.415-4.424-5.573-5.879c-2.198-1.437-5.154-2.531-7.65-3.209c-2.497-0.679-4.534-1.058-6.252-1.058V881.82 c1.718,0,3.755-0.338,6.252-1.016c2.497-0.68,5.453-1.813,7.65-3.431c2.158-1.615,4.015-3.769,5.573-6.459 c1.559-2.671,2.357-5.938,2.357-9.788v-43.299c0-5.225,1.019-9.77,3.097-13.695c2.038-3.927,4.595-7.137,7.531-9.669 c2.956-2.511,6.151-4.444,9.548-5.761c3.416-1.276,6.492-1.954,9.208-1.954H110.5v26.553L98.835,813.305L98.835,813.305z"/><path fill="none" stroke="#8B2721" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M98.835,813.305c-2.797,0-4.995,0.56-6.632,1.615c-1.618,1.057-2.916,2.413-3.815,3.987c-0.958,1.596-1.559,3.409-1.778,5.362 c-0.24,1.955-0.339,3.848-0.339,5.664V864.6c0,5.642-0.958,10.166-2.776,13.576c-1.818,3.43-3.975,6.1-6.432,7.993 c-2.496,1.874-5.073,3.25-7.811,3.985c-2.716,0.759-4.914,1.217-6.671,1.355v0.697c1.758,0.141,3.955,0.678,6.671,1.495 c2.737,0.838,5.314,2.233,7.811,4.106c2.456,1.895,4.614,4.426,6.432,7.517c1.817,3.13,2.776,7.136,2.776,11.96v36.501 c0,1.651,0.101,3.466,0.339,5.463c0.22,1.931,0.818,3.748,1.778,5.362c0.899,1.555,2.197,2.908,3.815,4.006 c1.637,1.021,3.835,1.58,6.632,1.58H110.5v26.552H81.716c-2.716,0-5.792-0.676-9.208-1.954c-3.396-1.337-6.592-3.251-9.548-5.74 c-2.937-2.574-5.493-5.762-7.531-9.688c-2.077-3.929-3.097-8.496-3.097-13.701v-44.692c0-3.51-0.798-6.479-2.357-8.933 c-1.558-2.449-3.415-4.424-5.573-5.879c-2.198-1.437-5.154-2.531-7.65-3.209c-2.497-0.679-4.534-1.058-6.252-1.058V881.82 c1.718,0,3.755-0.338,6.252-1.016c2.497-0.68,5.453-1.813,7.65-3.431c2.158-1.615,4.015-3.769,5.573-6.459 c1.559-2.671,2.357-5.938,2.357-9.788v-43.299c0-5.225,1.019-9.77,3.097-13.695c2.038-3.927,4.595-7.137,7.531-9.669 c2.956-2.511,6.151-4.444,9.548-5.761c3.416-1.276,6.492-1.954,9.208-1.954H110.5v26.553L98.835,813.305L98.835,813.305z"/></g></g></svg></span><span data-reactid=".20v217rw9og.0.0.0:1.0.0.0.1">Putain de code !</span></a></div><div class="r-Grid-cell r-minM--2of3" data-reactid=".20v217rw9og.0.0.0:1.0.1"><nav class="putainde-Nav" data-reactid=".20v217rw9og.0.0.0:1.0.1.0"><a class="putainde-Nav-item" href="/fr/articles" data-reactid=".20v217rw9og.0.0.0:1.0.1.0.0:$/fr/articles"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".20v217rw9og.0.0.0:1.0.1.0.0:$/fr/articles.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M318.275,90v283.23L256,318.16l-62.275,55.07V90H318.275 M358.275,50H153.725v412L256,371.557	L358.275,462V50L358.275,50z"/></svg></span><span data-reactid=".20v217rw9og.0.0.0:1.0.1.0.0:$/fr/articles.1">Articles</span></a><a class="putainde-Nav-item" href="/fr/contribuer" data-reactid=".20v217rw9og.0.0.0:1.0.1.0.0:$/fr/contribuer"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".20v217rw9og.0.0.0:1.0.1.0.0:$/fr/contribuer.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M74.686,340.686L50,460.949l122.365-22.584L379.52,231.211l-97.68-97.68L74.686,340.686z M303.088,205.032l-181.891,181.89l-21.213-21.213l181.891-181.89L303.088,205.032z M462,148.731l-52.662,52.662l-97.682-97.68	l52.662-52.663L462,148.731z"/></svg></span><span data-reactid=".20v217rw9og.0.0.0:1.0.1.0.0:$/fr/contribuer.1">Contribuer</span></a><a href="https://github.com/putaindecode/putaindecode.io" class="putainde-Nav-item putainde-Nav-item--icon r-Tooltip r-Tooltip r-Tooltip--bottom" data-r-tooltip="GitHub" data-reactid=".20v217rw9og.0.0.0:1.0.1.0.1:$https=2//github=1com/putaindecode/putaindecode=1io"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".20v217rw9og.0.0.0:1.0.1.0.1:$https=2//github=1com/putaindecode/putaindecode=1io.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M461.633,250.645l0.367-3.819c-22.896-2.221-45.667-2.419-67.79-0.73	c3.557-11.347,5.43-24.164,5.295-38.739c-0.292-30.965-10.616-55.081-26.843-75.096c3.116-18.852,0.769-37.702-5.111-56.561	c-23.187,1.898-44.053,9.493-62.634,22.686c-34.725-7.044-69.447-7.493-104.172,0c-21.673-14.627-42.956-21.802-63.909-22.686	c-6.21,20.765-7.169,41.233-1.917,61.357c-18.28,19.397-25.268,42.944-24.925,69.019c0.196,14.927,2.496,28.209,6.738,39.952	c-21.796-1.599-44.201-1.386-66.732,0.798l0.367,3.819c22.947-2.228,45.76-2.411,67.919-0.678c0.814,1.974,1.633,3.939,2.567,5.815	c-24.009-0.633-45.618,1.453-65.854,6.43l0.914,3.723c20.538-5.048,42.54-7.081,67.107-6.254	c16.246,28.864,47.52,45.824,93.063,51.205c-10.581,8.594-16.269,18.731-17.735,30.201c0,0-4.787,0-24.121,0	c-32.394,0-41.226-41.304-74.779-37.229C132,320,125.5,371.599,177.587,371.599c17.506,0,21.226,0,21.881,0v47.296	c0.234,7.643-3.093,12.754-8.469,16.297c18.654,1.884,32.674-7.43,32.674-18.854s0-56.948,0-62.518s5.833-6,5.833-6v72.992	c0.245,7.265-3.284,11.392-7.031,15.339c16.434,0.654,31.892-2.629,32.592-16.615c0,0,0-66.345,0-69.857s5.756-3.599,5.756,0	s0,66.58,0,66.58c0.169,11.8,10.361,21.367,31.953,19.893c-5.776-4.65-7.549-9.35-7.549-16.15s0-72.181,0-72.181s5.95-0.306,5.95,6	s0,50.331,0,60.881c0,13.55,16.267,19.14,34.829,18.615c-6.081-4.558-10.196-9.991-10.223-17.256v-73.217	c-0.629-10.762-5.003-20.906-13.582-30.358c41.63-6.392,71.637-23.011,86.578-52.796c24.647-0.847,46.715,1.183,67.307,6.246	l0.914-3.723c-20.394-5.014-42.181-7.096-66.416-6.415c0.839-1.891,1.67-3.789,2.389-5.785	C415.363,248.215,438.431,248.391,461.633,250.645z M114,310.023c-1.023,0-1.853-0.588-1.853-1.313c0-0.728,0.83-1.315,1.853-1.315	c1.024,0,1.854,0.588,1.854,1.315C115.854,309.436,115.024,310.023,114,310.023z M119.833,314.003c-1.137,0-2.06-0.653-2.06-1.46	s0.923-1.462,2.06-1.462s2.059,0.655,2.059,1.462S120.97,314.003,119.833,314.003z M125.75,319.172	c-1.333,0-2.415-0.766-2.415-1.712s1.082-1.714,2.415-1.714c1.333,0,2.416,0.768,2.416,1.714S127.083,319.172,125.75,319.172z M131.5,325.379c-1.56,0-2.825-0.896-2.825-2.003s1.265-2.005,2.825-2.005s2.825,0.898,2.825,2.005S133.06,325.379,131.5,325.379z M137.833,332.394c-1.733,0-3.139-0.996-3.139-2.226s1.406-2.228,3.139-2.228s3.139,0.998,3.139,2.228	S139.566,332.394,137.833,332.394z M145.167,339.517c-1.926,0-3.488-1.107-3.488-2.474s1.562-2.476,3.488-2.476	c1.925,0,3.487,1.109,3.487,2.476S147.092,339.517,145.167,339.517z M155.083,346.291c-2.14,0-3.875-1.231-3.875-2.749	c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751C158.958,345.06,157.223,346.291,155.083,346.291z M167.375,349.916	c-2.14,0-3.875-1.231-3.875-2.749c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751	C171.25,348.685,169.515,349.916,167.375,349.916z M180.333,350.333c-2.14,0-3.875-1.231-3.875-2.749	c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751C184.208,349.102,182.473,350.333,180.333,350.333z M193.125,350.583	c-2.14,0-3.875-1.231-3.875-2.749c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751	C197,349.352,195.265,350.583,193.125,350.583z"/></svg></span></a><a href="https://twitter.com/putaindecode_fr/" class="putainde-Nav-item putainde-Nav-item--icon r-Tooltip r-Tooltip r-Tooltip--bottom" data-r-tooltip="Twitter" data-reactid=".20v217rw9og.0.0.0:1.0.1.0.1:$https=2//twitter=1com/putaindecode_fr/"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".20v217rw9og.0.0.0:1.0.1.0.1:$https=2//twitter=1com/putaindecode_fr/.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M462,128.223c-15.158,6.724-31.449,11.269-48.547,13.31c17.449-10.461,30.854-27.025,37.164-46.764	c-16.333,9.687-34.422,16.721-53.676,20.511c-15.418-16.428-37.386-26.691-61.698-26.691c-54.56,0-94.668,50.916-82.337,103.787	c-70.25-3.524-132.534-37.177-174.223-88.314c-22.142,37.983-11.485,87.691,26.158,112.85c-13.854-0.438-26.891-4.241-38.285-10.574	c-0.917,39.162,27.146,75.781,67.795,83.949c-11.896,3.237-24.926,3.978-38.17,1.447c10.754,33.58,41.972,58.018,78.96,58.699	C139.604,378.282,94.846,390.721,50,385.436c37.406,23.982,81.837,37.977,129.571,37.977c156.932,0,245.595-132.551,240.251-251.435	C436.339,160.061,450.668,145.174,462,128.223z"/></svg></span></a><a href="/discuss/" class="putainde-Nav-item putainde-Nav-item--icon r-Tooltip r-Tooltip r-Tooltip--bottom" data-r-tooltip="Discuter" data-reactid=".20v217rw9og.0.0.0:1.0.1.0.1:$/discuss/"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".20v217rw9og.0.0.0:1.0.1.0.1:$/discuss/.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M174.059,354.374c-0.031-0.008-0.062-0.014-0.093-0.021	c-25.892,15.965-82.983,32.107-123.141,39.412c14.984-29.725,31.616-70.527,30.764-98.977C61.403,270.511,50,239.224,50,207.358	c0-89.84,87.383-155.527,185.209-155.527c97.22,0,185.211,65.193,185.211,155.527c0,1.283-0.027,2.564-0.066,3.844	c-11.285-6.088-23.506-11.037-36.622-14.68c-6.854-60.861-70.842-108.715-148.522-108.715c-82.237,0-149.141,53.631-149.141,119.551	c0,34.688,15.009,56.529,36.192,78.068c-4.306,31.98-14.646,59.781-14.646,59.781s30.542-8.064,65.253-28.275	C171.395,329.616,171.806,342.101,174.059,354.374z M461.432,460.169c-27.634-5.029-66.922-16.137-84.739-27.123	c-98.102,24.029-169.6-36.424-169.6-101.154c0-62.166,60.552-107.029,127.453-107.029c67.322,0,127.454,45.203,127.454,107.029	c0,21.928-7.85,43.457-21.738,60.164C439.674,411.634,451.121,439.712,461.432,460.169z M302.524,333.198	c0-9.648-7.841-17.469-17.515-17.469c-9.673,0-17.515,7.82-17.515,17.469s7.842,17.471,17.515,17.471	C294.684,350.669,302.524,342.847,302.524,333.198z M354.75,333.198c0-9.648-7.841-17.469-17.515-17.469	c-9.673,0-17.515,7.82-17.515,17.469s7.842,17.471,17.515,17.471C346.909,350.669,354.75,342.847,354.75,333.198z M406.339,333.198	c0-9.648-7.842-17.469-17.515-17.469c-9.674,0-17.515,7.82-17.515,17.469s7.841,17.471,17.515,17.471	C398.497,350.669,406.339,342.847,406.339,333.198z"/></svg></span></a></nav></div></div></div><div data-reactid=".20v217rw9og.0.0.0:2"><div class="putainde-Main" data-reactid=".20v217rw9og.0.0.0:2.3"><noscript data-reactid=".20v217rw9og.0.0.0:2.3.0"></noscript><article class="putainde-Post putainde-Post--customHeader" data-reactid=".20v217rw9og.0.0.0:2.3.1"><header data-reactid=".20v217rw9og.0.0.0:2.3.1.0"><div class="putainde-Post-header putainde-Post-header--custom putainde-Post-header--dark" data-reactid=".20v217rw9og.0.0.0:2.3.1.0.0"><div class="putainde-Post-header-picture" style="background-color:#c33;background-image:-webkit-linear-gradient(160deg, rgb(204, 51, 51), rgba(204, 51, 51, .6)), #c33 url(&quot;../index.jpg&quot;);background-size:repeat 0% 0%, no-repeat 50% 50% / cover;background:linear-gradient(160deg, rgb(204, 51, 51), rgba(204, 51, 51, .6)) repeat 0% 0%, #c33 url(&quot;../index.jpg&quot;) no-repeat 50% 50% / cover;" data-reactid=".20v217rw9og.0.0.0:2.3.1.0.0.0"></div><a class="putainde-Post-header-pictureCredit" href="http://webpack.github.io/" data-reactid=".20v217rw9og.0.0.0:2.3.1.0.0.1">Crédit photo</a><h1 class="putainde-Title" data-reactid=".20v217rw9og.0.0.0:2.3.1.0.0.2">Premier exemple d&#x27;utilisation de Webpack</h1></div></header><div class="r-Grid" data-reactid=".20v217rw9og.0.0.0:2.3.1.1"><div class="r-Grid-cell r-minM--8of12 putainde-Post-contents" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0"><div class="putainde-Post-md" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.0"><div data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.0.0"><p>Si vous êtes intéressé par
<a href="/fr/articles/js/webpack/">les problématiques que peut résoudre Webpack</a>,
vous serez sûrement intéressé par cette petite configuration détaillée, qui vous
permettra de faire vos premiers pas avec cet outil.</p>
<p>Nous allons mettre en place une configuration assez basique qui
va permettre :</p>
<ul>
<li>d’avoir une partie JavaScript pour votre application/site web,</li>
<li>de consommer vos CSS en tant que modules,</li>
<li>de consommer les assets de vos CSS en tant que module (images, fonts…),</li>
<li>d’avoir un fichier JS, un fichier CSS et vos assets à côté.</li>
</ul>
<p><em>Note: si vous êtes sur une application JavaScript, vous ne serez pas obligé
d’utiliser la partie pour l’extraction de la CSS en fichier.
En effet, Webpack consomme tout ce qui est possible en JavaScript.
Les styles peuvent être introduit via des balises <code>&lt;styles&gt;</code> dynamiquement
(via le <code>style-loader</code>).
L’extraction prend du sens si vous avez un rendu serveur et que vous souhaitez
avoir des styles au plus tôt, via une CSS dediée.</em></p>
<p>La configuration de Webpack se fait via un fichier JavaScript.
Par défaut, il doit être nommé <code>webpack.config.js</code>.
Ne tournons pas autour du pot et voyons un fichier de configuration
correspondant à ce que nous venons de décrire.</p>
<pre><code class="language-js"><span class="hljs-keyword">var</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>)
<span class="hljs-keyword">var</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">"webpack"</span>)
<span class="hljs-keyword">var</span> ExtractTextPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">"extract-text-webpack-plugin"</span>)

<span class="hljs-comment">// on peut passer à notre commande de build l'option --production</span>
<span class="hljs-comment">// on récupère sa valeur ici en tant que booléen</span>
<span class="hljs-keyword">var</span> production = process.argv.indexOf(<span class="hljs-string">"--production"</span>) &gt; -<span class="hljs-number">1</span>

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-comment">// nos points d'entrée, par clé</span>
  <span class="hljs-comment">// (on peut en définir plusieurs)</span>
  entry: {
    index: [
      <span class="hljs-string">"./src/index.js"</span>,
    ],
  },

  <span class="hljs-comment">// description de nos sorties</span>
  output: {
    <span class="hljs-comment">// ./dist</span>
    path: path.join(__dirname, <span class="hljs-string">"dist"</span>),
    <span class="hljs-comment">// nous aurons (vu notre point d'entrée)</span>
    <span class="hljs-comment">// - dist/index.js</span>
    filename: <span class="hljs-string">"[name].js"</span>,
    <span class="hljs-comment">// notre base url</span>
    publicPath: <span class="hljs-string">"/"</span>,
  },

  resolve: {
    <span class="hljs-comment">// ici, on peut ajouter nos extensions à résoudre lors d'un require()</span>
    <span class="hljs-comment">// on va rester simple en n'autorisant rien, ou .js(on) (comme en nodejs et</span>
    <span class="hljs-comment">// browserify)</span>
    extensions: [
      <span class="hljs-string">""</span>,
      <span class="hljs-string">".js"</span>,
      <span class="hljs-string">".json"</span>,
    ],
  },

  <span class="hljs-built_in">module</span>: {
    <span class="hljs-comment">// liste de nos loaders</span>
    <span class="hljs-comment">// ! \\ à noter que les loaders sont exécutés en ordre inverse</span>
    <span class="hljs-comment">// les premiers en dernier, en utilisant la sortie du suivant</span>
    loaders: [
      {
        <span class="hljs-comment">// pour tous les fichiers qui finissent par .js</span>
        test: <span class="hljs-regexp">/\.js$/</span>,
        <span class="hljs-comment">// ... en prenant bien soin d'exclure les node_modules</span>
        exclude: <span class="hljs-regexp">/node_modules/</span>,

        <span class="hljs-comment">// on ajoute les loaders babel et eslint</span>
        <span class="hljs-comment">// à vous de voir ce que vous aurez besoin</span>
        <span class="hljs-comment">// ("rien" est une option tout à fait valable si vous codez en ES5</span>
        <span class="hljs-comment">// sans linter)</span>
        loaders: [
          <span class="hljs-string">"babel"</span>,
          <span class="hljs-string">"eslint"</span>,
        ],

        <span class="hljs-comment">// à noter que l'on peut définir les loaders de cette façon</span>
        <span class="hljs-comment">// loader: "babel!eslint",</span>

        <span class="hljs-comment">// à noter aussi, Webpack va tenter de loader des modules ayant dans</span>
        <span class="hljs-comment">// leur nom "-loader". Si ce n'était pas le cas, ou que votre loader</span>
        <span class="hljs-comment">// ne comporte pas -loader, vous pouvez spécifier le nom entier :</span>
        <span class="hljs-comment">// loader: "babel-loader!eslint-loader",</span>
      },
      <span class="hljs-comment">// à l'inverse de node et browserify, Webpack ne gère pas les json</span>
      <span class="hljs-comment">// nativement, il faut donc un loader pour que cela soit transparent</span>
      {
        test: <span class="hljs-regexp">/\.json$/</span>,
        loaders: [
          <span class="hljs-string">"json"</span>,
        ],
      },
      {
        <span class="hljs-comment">// pour nos CSS, on va utiliser un plugin un peu particulier</span>
        <span class="hljs-comment">// qui va nous permettre de require() nos CSS comme un module</span>
        <span class="hljs-comment">// mais qui va tout de même permettre de sortir tout cela dans un seul</span>
        <span class="hljs-comment">// fichier .css pour la production</span>
        <span class="hljs-comment">// (selon un paramètre qu'on définira ci-dessous)</span>
        test: <span class="hljs-regexp">/\.css$/</span>,
        <span class="hljs-comment">// cette méthode possède 2 paramètres :</span>
        <span class="hljs-comment">// + loaders à utiliser si ce module est désactivé</span>
        <span class="hljs-comment">// + loaders à utiliser dans tous les cas en amont</span>
        loader: ExtractTextPlugin.extract(
          <span class="hljs-comment">// si on extract pas, on utilisera le loader suivant</span>
          <span class="hljs-comment">// (ce module chargera les styles dans des tags &lt;style&gt;, suffisant</span>
          <span class="hljs-comment">// en mode dév)</span>
          <span class="hljs-comment">// en production vous devrez vous charger d'utiliser un</span>
          <span class="hljs-comment">// &lt;link rel="stylesheet" ...</span>
          <span class="hljs-string">"style"</span>,
          <span class="hljs-comment">// dans tous les cas, on utilisera cssnext ainsi que le loader CSS</span>
          <span class="hljs-comment">// de base (celui-ci permet de gérer les ressources dans le CSS</span>
          <span class="hljs-comment">// en temps que modules: images, font etc)</span>
          <span class="hljs-string">"css!cssnext"</span>
        ),
        <span class="hljs-comment">// Si vous n'avez pas besoin d'avoir une CSS à part, vous pouvez</span>
        <span class="hljs-comment">// simplement supprimer la partie "loader" ci-dessus et utiliser plutôt</span>
        <span class="hljs-comment">// loaders: [</span>
        <span class="hljs-comment">//  "style",</span>
        <span class="hljs-comment">//  "css",</span>
        <span class="hljs-comment">//  "cssnext",</span>
        <span class="hljs-comment">// ],</span>
        <span class="hljs-comment">// À noter que dans ce cas, il vous faudra supprimer le plugin</span>
        <span class="hljs-comment">// ExtractTextPlugin dans la liste plus bas</span>
      },
      <span class="hljs-comment">// pour la suite, on va rester simple :</span>
      <span class="hljs-comment">// un require() en utilisant le file-loader retournera une string avec</span>
      <span class="hljs-comment">// le nom du fichier et (le plus important) copiera le fichier suivant</span>
      <span class="hljs-comment">// le paramètre "name" dans l'output.path que nous avons défini tout</span>
      <span class="hljs-comment">// au début de notre configuration.</span>
      <span class="hljs-comment">// Notez qu'il dégagera la partie context du nom lors du retour en string</span>
      <span class="hljs-comment">// et la remplacera par le l'output.path défini pour la copie.</span>
      {
        <span class="hljs-comment">// on chargera tous les formats d'images qui nous intéressent en tant</span>
        <span class="hljs-comment">// que fichiers.</span>
        test: <span class="hljs-regexp">/\.(ico|jpe?g|png|gif)$/</span>,
        loaders: [
          <span class="hljs-string">"file?name=[path][name].[ext]&amp;context=./src"</span>,
          <span class="hljs-comment">// Vous remarquerez ici la méthode utilisée pour définir</span>
          <span class="hljs-comment">// des options pour les loaders. Il en existe d'autres avec les</span>
          <span class="hljs-comment">// versions les plus récentes en utilisant la clé "query"</span>
        ],
      },
      {
        <span class="hljs-comment">// idem pour les fonts</span>
        test: <span class="hljs-regexp">/\.(woff|ttf|otf|eot\?#.+|svg#.+)$/</span>,
        loaders: [
          <span class="hljs-string">"file?name=[path][name].[ext]&amp;context=./src"</span>,
        ],
      },
      {
        <span class="hljs-comment">// ici on se permet de loader des fichiers html et txt tels quels</span>
        test: <span class="hljs-regexp">/\.(html|txt)$/</span>,
        loaders: [
          <span class="hljs-string">"file?name=[path][name].[ext]&amp;context=./src"</span>,
        ],
      },
    ],
  },

  <span class="hljs-comment">// en plus des loaders, qui premettent eux de modifier et/ou d'exploiter le</span>
  <span class="hljs-comment">// contenu des modules, nous avons des plugins, plus globaux au processus</span>
  plugins: (
    [
      <span class="hljs-comment">// une partie importante dans notre cas : on active l'extraction CSS (en</span>
      <span class="hljs-comment">// production seulement)</span>
      <span class="hljs-keyword">new</span> ExtractTextPlugin(<span class="hljs-string">"[name].css"</span>, {disable: !production}),

      <span class="hljs-comment">// ce plugin permet de transformer les clés passés en dur dans les</span>
      <span class="hljs-comment">// modules ainsi vous pourrez faire dans votre code js</span>
      <span class="hljs-comment">// if (__PROD__) { ... }</span>
      <span class="hljs-keyword">new</span> webpack.DefinePlugin({
        __PROD__: production
      }),
    ]
    <span class="hljs-comment">// en production, on peut rajouter des plugins pour optimiser</span>
    .concat(
      production
      ? [
        <span class="hljs-comment">// ici on rajoute uglify.js pour compresser nos sorties</span>
        <span class="hljs-comment">// (vous remarquerez que certain plugins sont directement livrés dans</span>
        <span class="hljs-comment">// le package webpack).</span>
        <span class="hljs-keyword">new</span> webpack.optimize.UglifyJsPlugin({
          compress: {
            warnings: <span class="hljs-literal">false</span>,
          },
        }),
      ]
      : []
    )
  ),

  <span class="hljs-comment">// certains modules permettent de définir des options en dehors de la</span>
  <span class="hljs-comment">// définition des loaders</span>
  cssnext: {
    sourcemap: !production,
    compress: production,
  },
}</code></pre>
<p><em>Ce fichier est à peu près ce que nous utilisons pour notre site à l’heure où
est écrit cet article.</em></p>
<p>Une fois Webpack mis en place, vous aurez bien moins l’impression de bricoler
surtout quand il s’agit de consommer des assets de modules tiers (par exemple
Font Awesome).</p>
<p>Sachez que vous pouvez très facilement écrire vos propres loaders pour wrapper
l’utilisation d’un outil qui n’aurait pas encore de loader.
<a href="https://github.com/cssnext/cssnext-loader/blob/master/index.js">Exemple du loader cssnext</a>.</p>
<h2 id="utilisation"><a class="markdownIt-Anchor" href="#utilisation">#</a> Utilisation</h2>
<p>Il y a plusieurs façon d’utiliser maintenant notre configuration, la plus simple
étant surement via CLI :</p>
<pre><code class="language-console"><span class="hljs-variable">$ </span>npm install webpack
<span class="hljs-variable">$ </span>webpack</code></pre>
<p>Cela devrait suffire à s’occuper de notre configuration. Cette commande comporte
bien entendu tout un tas d’options qui correspondent souvent à ce que nous
avons défini juste avant.
Cela étant dit, il parait plus maintenable de gérer une fichier plutôt qu’une
ligne de commande de 3 km.</p>
<p>Vous devriez avoir ainsi tout le résultat dans <code>dist/</code>.</p>
<p><em>Note: Si vous rencontrez des erreurs du type
<code>Error: Cannot resolve module 'file'</code>, c’est tout simplement que vous n’avez pas
installé les loaders nécessaire. En l’occurence il faudrait installer le
<code>file-loader</code>.</em></p>
<p>Pour avoir tous les loaders nécessaires comme dans l’exemple ci-dessus:</p>
<pre><code class="language-console">$ npm <span class="hljs-tag">i</span> -D babel-loader eslint-loader babel-eslint
$ npm <span class="hljs-tag">i</span> -D json-loader
$ npm <span class="hljs-tag">i</span> -D style-loader css-loader cssnext-loader
$ npm <span class="hljs-tag">i</span> -D file-loader</code></pre>
<p><em>Note à propos de babel et eslint: pour le moment, il vous faudra spécifier dans
votre configuration eslint: <code>parser: babel-eslint</code>.</em></p>
<p>Il y a tout un tas de façon d’utiliser Webpack via une tripotée de plugins
(Gulp, Grunt, etc.) mais nous allons voir justement ici comment ne pas avoir
recours à ces solutions, ce qui nous permettra ainsi de s’alléger.</p>
<h3 id="utilisation-en-d-veloppment"><a class="markdownIt-Anchor" href="#utilisation-en-d-veloppment">#</a> Utilisation en développment</h3>
<p>Webpack CLI possède une option <code>--watch</code> qui va surveiller les sources et mettre
à jour tout le nécessaire à la moindre modification.
À la différence de browserify, cette fonctionnalité est dans le core et très
bien intégré.
De plus, le cache de Webpack est plutôt bien foutu. La première compilation peut
paraître un peu lente, mais la suite est vraiment au top.</p>
<pre><code class="language-console">$ webpack <span class="hljs-comment">--watch -d</span></code></pre>
<p>L’option <code>-d</code> permet d’activer les source maps.</p>
<p>À côté de ces options, Webpack va plus loin.</p>
<p>En développement, nous avons besoin de servir toutes les ressources que notre
processus va gérer.
Plutôt que d’utiliser le système de fichier classique, abusé par Grunt et tout
de même utilisé par Gulp &amp; co, Webpack fournit un <code>webpack-dev-server</code>.</p>
<p>Ce petit serveur local permettra de servir tout ce dont nous avons besoin
(nos JS, CSS, images, etc.) sans avoir recours au système de fichiers.</p>
<p>Comme pour la commande <code>webpack</code>, le serveur de développement propose aussi
une CLI basée sur l’option <code>--watch</code> mais sans l’inconvénient de l’écriture sur
disque :</p>
<pre><code class="language-console">$ webpack-dev-server <span class="hljs-comment">--content-base dist/</span></code></pre>
<p><em>Source: <a href="http://webpack.github.io/docs/webpack-dev-server.html">http://webpack.github.io/docs/webpack-dev-server.html</a></em></p>
<p>Une fois que votre serveur est démarré, pourrez tester que votre point d’entrée
marche avec <code>http://localhost:8080/index.js</code>.</p>
<p>Il existe bien entendu une API, que nous utilisons à l’heure actuelle sur notre
site, afin d’ajuster notre configuration Webpack en développement, pour
d’ajouter des fonctionnalités comme le “hot loading”.</p>
<p>Vous avez à votre disposition
<a href="https://github.com/putaindecode/putaindecode.io/blob/2c1a8f23ec05768960617625f592ea30ed6e2062/scripts/webpack-dev-server.js">notre script dev-server</a>
(écrit en ES6/7), ainsi que son utilisation
<a href="https://github.com/putaindecode/putaindecode.io/blob/2c1a8f23ec05768960617625f592ea30ed6e2062/scripts/build.js#L154-L159">dans notre build</a>.</p>
<p><em>Note : pour avoir une éventuelle version plus à jour, regardez l’historique de
ces fichiers au cas où nous ayons poussé des ajustements (ou remplacer le hash
par “master” dans l’url et priez).</em></p>
<h4 id="hot-re-loading"><a class="markdownIt-Anchor" href="#hot-re-loading">#</a> Hot (re)loading</h4>
<p>Ce serveur possède bien entendu des fonctionnalités similaires au classique
“livereload”, appelé <em>hot mode</em> (ou hot loading).</p>
<p>Tout comme pour le livereload, il faut intégrer dans sa page un script
particulier. Il y a plusieurs façons de faire :</p>
<ul>
<li>intégrer <code>http://localhost:8080/webpack-dev-server.js</code> via un tag script</li>
<li>ajouter <code>webpack/hot/dev-server</code> dans les tableaux des points d’entrées</li>
</ul>
<p><em>Source: <a href="http://webpack.github.io/docs/webpack-dev-server.html#hot-mode">http://webpack.github.io/docs/webpack-dev-server.html#hot-mode</a></em></p>
<p>Notre script dev-server référencé juste avant s’occupe d’ajouter la ressource
automatiquement en mode dev.</p>
<p>À la différence d’un simple livereload, ce hot loading permet des choses qu’on
aurait jusqu’alors pas vraiment imaginées, comme du hot reload de JavaScript de
composant React (sans rafraichissment complet de page, donc sans perte d’état).</p>
<p><strong>Vous êtes invité à regarder la vidéo que vous trouverez sur la page du
<a href="https://github.com/gaearon/react-hot-loader">react-hot-loader</a>.</strong></p>
<p>Nous n’irons pas plus loin sur ce hot mode, car il nécessiterait un articlé dédié
(non pas que ce soit compliqué mais plus parce que c’est un sujet à part).</p>
<h3 id="utilisation-en-production"><a class="markdownIt-Anchor" href="#utilisation-en-production">#</a> Utilisation en production</h3>
<pre><code class="language-console">$ webpack <span class="hljs-comment">--production</span></code></pre>
<p>Notre configuration détecte l’option <code>--production</code> et ajuste déjà en
conséquence.
Il faut éventuellement utiliser la variable prévue pour ajuster vos loaders s’il
propose des options d’optimisation.</p>
<p>Maintenant, il n’y aura plus qu’à voir tout le résultat dans <code>dist/</code>.</p>
<hr>
<p>Nous avons vu ici un exemple assez simple qui peut être utilisé pour un site web
ou une appplication simple.</p>
<p>Une question se pose alors :</p>
<blockquote>
<p>À la vue de ce que peut gérer Webpack et ses loaders, est-il pertinent de
continuer à utiliser des task runners pour nos assets et compagnie ?</p>
</blockquote>
<p><strong>La réponse est non.</strong> 😱</p>
<p>Vous verrez assez rapidement que vous devriez pourvoir tout jeter à la poubelle.
Sans trop de regrets, puisque Webpack va vous permettre de consommer tout ce que
nous avions l’habitude de bricoler / copier / ajuster…</p>
<p>Nous l’avons fait pour notre site, pourquoi pas vous ?</p>
<p>Et notre interface n’as pas changé d’un poil puisque nous utilisons toujours les
mêmes commandes via les
<a href="https://docs.npmjs.com/misc/scripts">npm scripts</a>:</p>
<ul>
<li><code>npm start</code> pour dév</li>
<li><code>npm run build --production</code> avant de déployer en production.</li>
</ul>
<p>Il existe encore beaucoup de leviers à toucher dans le cas
d’applications full JavaScript afin d’améliorer bien des points.</p>
<p>Vous trouverez facilement tout un tas de
<a href="https://duckduckgo.com/?q=webpack+boilerplate">boilerplates Webpack</a>
avec des améliorations diverses et variées selon vos besoins.</p>
<p>Soyez curieux !</p>
</div></div><footer class="putainde-Post-footer" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1"><div data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0"><div class="putainde-Author undefined" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0.0"><a href="http://moox.io/" class="putainde-Avatar putainde-Author-picture" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0.0.0"><img class="js-AnimateLoad" src="https://avatars.githubusercontent.com/u/157534?v=3&amp;s=128" alt="" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0.0.0.0"/></a><div class="putainde-Author-description" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0.0.1"><div class="putainde-Author-title" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0.0.1.0"><h3 class="putainde-Author-name" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0.0.1.0.0"><span class="putainde-WrittenBy" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0.0.1.0.0.0">Écrit par </span><a class="putainde-Link" href="http://moox.io/" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0.0.1.0.0.1">MoOx</a></h3><div class="putainde-Author-social" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0.0.1.0.1"><a href="http://moox.io/" class="r-Tooltip r-Tooltip--top" data-r-tooltip="Website" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0.0.1.0.1.0"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0.0.1.0.1.0.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M394.072,174.805l-47.916-48.023V88.472h47.916V174.805z M462,275.815h-42.508v166.213H92.508V275.815H50	L256,69.972L462,275.815z M296.847,271.972c-15.811-3.316-29.021,4.086-38.792,19.387c-9.771-15.301-22.98-22.703-38.789-19.387	c-36.746,10.876-36.336,69.543,38.582,113.047C332.908,341.761,333.59,282.848,296.847,271.972z"/></svg></span></a><a href="https://twitter.com/MoOx" class="r-Tooltip r-Tooltip--top" data-r-tooltip="Twitter" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0.0.1.0.1.1"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0.0.1.0.1.1.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M462,128.223c-15.158,6.724-31.449,11.269-48.547,13.31c17.449-10.461,30.854-27.025,37.164-46.764	c-16.333,9.687-34.422,16.721-53.676,20.511c-15.418-16.428-37.386-26.691-61.698-26.691c-54.56,0-94.668,50.916-82.337,103.787	c-70.25-3.524-132.534-37.177-174.223-88.314c-22.142,37.983-11.485,87.691,26.158,112.85c-13.854-0.438-26.891-4.241-38.285-10.574	c-0.917,39.162,27.146,75.781,67.795,83.949c-11.896,3.237-24.926,3.978-38.17,1.447c10.754,33.58,41.972,58.018,78.96,58.699	C139.604,378.282,94.846,390.721,50,385.436c37.406,23.982,81.837,37.977,129.571,37.977c156.932,0,245.595-132.551,240.251-251.435	C436.339,160.061,450.668,145.174,462,128.223z"/></svg></span></a><a href="https://github.com/MoOx" class="r-Tooltip r-Tooltip--top" data-r-tooltip="Github" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0.0.1.0.1.2"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0.0.1.0.1.2.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M461.633,250.645l0.367-3.819c-22.896-2.221-45.667-2.419-67.79-0.73	c3.557-11.347,5.43-24.164,5.295-38.739c-0.292-30.965-10.616-55.081-26.843-75.096c3.116-18.852,0.769-37.702-5.111-56.561	c-23.187,1.898-44.053,9.493-62.634,22.686c-34.725-7.044-69.447-7.493-104.172,0c-21.673-14.627-42.956-21.802-63.909-22.686	c-6.21,20.765-7.169,41.233-1.917,61.357c-18.28,19.397-25.268,42.944-24.925,69.019c0.196,14.927,2.496,28.209,6.738,39.952	c-21.796-1.599-44.201-1.386-66.732,0.798l0.367,3.819c22.947-2.228,45.76-2.411,67.919-0.678c0.814,1.974,1.633,3.939,2.567,5.815	c-24.009-0.633-45.618,1.453-65.854,6.43l0.914,3.723c20.538-5.048,42.54-7.081,67.107-6.254	c16.246,28.864,47.52,45.824,93.063,51.205c-10.581,8.594-16.269,18.731-17.735,30.201c0,0-4.787,0-24.121,0	c-32.394,0-41.226-41.304-74.779-37.229C132,320,125.5,371.599,177.587,371.599c17.506,0,21.226,0,21.881,0v47.296	c0.234,7.643-3.093,12.754-8.469,16.297c18.654,1.884,32.674-7.43,32.674-18.854s0-56.948,0-62.518s5.833-6,5.833-6v72.992	c0.245,7.265-3.284,11.392-7.031,15.339c16.434,0.654,31.892-2.629,32.592-16.615c0,0,0-66.345,0-69.857s5.756-3.599,5.756,0	s0,66.58,0,66.58c0.169,11.8,10.361,21.367,31.953,19.893c-5.776-4.65-7.549-9.35-7.549-16.15s0-72.181,0-72.181s5.95-0.306,5.95,6	s0,50.331,0,60.881c0,13.55,16.267,19.14,34.829,18.615c-6.081-4.558-10.196-9.991-10.223-17.256v-73.217	c-0.629-10.762-5.003-20.906-13.582-30.358c41.63-6.392,71.637-23.011,86.578-52.796c24.647-0.847,46.715,1.183,67.307,6.246	l0.914-3.723c-20.394-5.014-42.181-7.096-66.416-6.415c0.839-1.891,1.67-3.789,2.389-5.785	C415.363,248.215,438.431,248.391,461.633,250.645z M114,310.023c-1.023,0-1.853-0.588-1.853-1.313c0-0.728,0.83-1.315,1.853-1.315	c1.024,0,1.854,0.588,1.854,1.315C115.854,309.436,115.024,310.023,114,310.023z M119.833,314.003c-1.137,0-2.06-0.653-2.06-1.46	s0.923-1.462,2.06-1.462s2.059,0.655,2.059,1.462S120.97,314.003,119.833,314.003z M125.75,319.172	c-1.333,0-2.415-0.766-2.415-1.712s1.082-1.714,2.415-1.714c1.333,0,2.416,0.768,2.416,1.714S127.083,319.172,125.75,319.172z M131.5,325.379c-1.56,0-2.825-0.896-2.825-2.003s1.265-2.005,2.825-2.005s2.825,0.898,2.825,2.005S133.06,325.379,131.5,325.379z M137.833,332.394c-1.733,0-3.139-0.996-3.139-2.226s1.406-2.228,3.139-2.228s3.139,0.998,3.139,2.228	S139.566,332.394,137.833,332.394z M145.167,339.517c-1.926,0-3.488-1.107-3.488-2.474s1.562-2.476,3.488-2.476	c1.925,0,3.487,1.109,3.487,2.476S147.092,339.517,145.167,339.517z M155.083,346.291c-2.14,0-3.875-1.231-3.875-2.749	c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751C158.958,345.06,157.223,346.291,155.083,346.291z M167.375,349.916	c-2.14,0-3.875-1.231-3.875-2.749c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751	C171.25,348.685,169.515,349.916,167.375,349.916z M180.333,350.333c-2.14,0-3.875-1.231-3.875-2.749	c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751C184.208,349.102,182.473,350.333,180.333,350.333z M193.125,350.583	c-2.14,0-3.875-1.231-3.875-2.749c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751	C197,349.352,195.265,350.583,193.125,350.583z"/></svg></span></a></div></div><p class="putainde-Author-bio" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0.0.1.1"><span data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0.0.1.1.0">Open source addict vivant dans la campagne près de Toulouse, Maxime est développeur web front-end le jour, et justicier du code la nuit.  </span><span data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.0.0.1.1.1">Il aime faire des calins à HTML, CSS et JavaScript en tant que freelance.</span></p></div></div></div><div class="putainde-Contributors" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.2"><strong class="putainde-Contributors-label" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.2.0"><span data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.2.0.1">2 contributeurs sur cette page</span></strong><div class="r-Grid putainde-Contributors-actions" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.2.1"><div class="r-Grid-cell r-all--1of3" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.2.1.0"><a class="putainde-Contributors-action" href="https://github.com/putaindecode/putaindecode.io/edit/master/content/fr/articles/js/webpack/premier-exemple/index.md" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.2.1.0.0">Modifier</a></div><div class="r-Grid-cell r-all--1of3" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.2.1.1"><a class="putainde-Contributors-action" href="https://github.com/putaindecode/putaindecode.io/blame/master/content/fr/articles/js/webpack/premier-exemple/index.md" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.2.1.1.0">Tracer les changements</a></div><div class="r-Grid-cell r-all--1of3" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.2.1.2"><a class="putainde-Contributors-action" href="https://github.com/putaindecode/putaindecode.io/commits/master/content/fr/articles/js/webpack/premier-exemple/index.md" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.2.1.2.0">Historique</a></div></div><div class="putainde-Contributor r-Tooltip r-Tooltip--bottom r-Tooltip--allowNewLines" data-r-tooltip="MoOx
(8 commits)" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.2.2:0"><a href="http://moox.io/" class="putainde-Avatar putainde-Contributor-avatar--small" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.2.2:0.0"><img class="js-AnimateLoad" src="https://avatars.githubusercontent.com/u/157534?v=3&amp;s=128" alt="" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.2.2:0.0.0"/></a></div><div class="putainde-Contributor r-Tooltip r-Tooltip--bottom r-Tooltip--allowNewLines" data-r-tooltip="Macxim
(1 commit)" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.2.2:1"><a href="http://macx.im" class="putainde-Avatar putainde-Contributor-avatar--small" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.2.2:1.0"><img class="js-AnimateLoad" src="https://avatars.githubusercontent.com/u/1909957?v=3&amp;s=128" alt="" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.1.2.2:1.0.0"/></a></div></div></footer><div data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.2"><div id="disqus_thread" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.2.0"></div><noscript data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.2.1"><span data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.2.1.0"><span data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.2.1.0.0">Please enable JavaScript to view the</span><a href="http://disqus.com/?ref_noscript" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.2.1.0.1">comments powered by Disqus.</a></span></noscript><a href="http://disqus.com" class="dsq-brlink" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.2.2"><span data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.2.2.0">blog comments powered by</span><span class="logo-disqus" data-reactid=".20v217rw9og.0.0.0:2.3.1.1.0.2.2.1">Disqus</span></a></div></div></div></article></div></div><div class="putainde-Footer" data-reactid=".20v217rw9og.0.0.0:3"><div class="r-Grid" data-reactid=".20v217rw9og.0.0.0:3.0"><div class="r-Grid-cell r-minM--1of4" data-reactid=".20v217rw9og.0.0.0:3.0.0"><p class="putainde-Footer-text" data-reactid=".20v217rw9og.0.0.0:3.0.0.0">© 1970 - 2015 Putain de code !</p></div><div class="r-Grid-cell r-minM--2of4" data-reactid=".20v217rw9og.0.0.0:3.0.1"><ul class="putainde-Footer-list" data-reactid=".20v217rw9og.0.0.0:3.0.1.0"><li data-reactid=".20v217rw9og.0.0.0:3.0.1.0.0:$/feed=1xml"><a href="/feed.xml" data-reactid=".20v217rw9og.0.0.0:3.0.1.0.0:$/feed=1xml.0">Flux RSS</a></li><li data-reactid=".20v217rw9og.0.0.0:3.0.1.0.$https=2//github=1com/putaindecode/forum/issues"><a href="https://github.com/putaindecode/forum/issues" data-reactid=".20v217rw9og.0.0.0:3.0.1.0.$https=2//github=1com/putaindecode/forum/issues.0">Forum</a></li><li data-reactid=".20v217rw9og.0.0.0:3.0.1.0.$https=2//github=1com/putaindecode/putaindecode=1io"><a href="https://github.com/putaindecode/putaindecode.io" data-r-tooltip="GitHub" class="r-Tooltip r-Tooltip--top" data-reactid=".20v217rw9og.0.0.0:3.0.1.0.$https=2//github=1com/putaindecode/putaindecode=1io.0"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".20v217rw9og.0.0.0:3.0.1.0.$https=2//github=1com/putaindecode/putaindecode=1io.0.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M461.633,250.645l0.367-3.819c-22.896-2.221-45.667-2.419-67.79-0.73	c3.557-11.347,5.43-24.164,5.295-38.739c-0.292-30.965-10.616-55.081-26.843-75.096c3.116-18.852,0.769-37.702-5.111-56.561	c-23.187,1.898-44.053,9.493-62.634,22.686c-34.725-7.044-69.447-7.493-104.172,0c-21.673-14.627-42.956-21.802-63.909-22.686	c-6.21,20.765-7.169,41.233-1.917,61.357c-18.28,19.397-25.268,42.944-24.925,69.019c0.196,14.927,2.496,28.209,6.738,39.952	c-21.796-1.599-44.201-1.386-66.732,0.798l0.367,3.819c22.947-2.228,45.76-2.411,67.919-0.678c0.814,1.974,1.633,3.939,2.567,5.815	c-24.009-0.633-45.618,1.453-65.854,6.43l0.914,3.723c20.538-5.048,42.54-7.081,67.107-6.254	c16.246,28.864,47.52,45.824,93.063,51.205c-10.581,8.594-16.269,18.731-17.735,30.201c0,0-4.787,0-24.121,0	c-32.394,0-41.226-41.304-74.779-37.229C132,320,125.5,371.599,177.587,371.599c17.506,0,21.226,0,21.881,0v47.296	c0.234,7.643-3.093,12.754-8.469,16.297c18.654,1.884,32.674-7.43,32.674-18.854s0-56.948,0-62.518s5.833-6,5.833-6v72.992	c0.245,7.265-3.284,11.392-7.031,15.339c16.434,0.654,31.892-2.629,32.592-16.615c0,0,0-66.345,0-69.857s5.756-3.599,5.756,0	s0,66.58,0,66.58c0.169,11.8,10.361,21.367,31.953,19.893c-5.776-4.65-7.549-9.35-7.549-16.15s0-72.181,0-72.181s5.95-0.306,5.95,6	s0,50.331,0,60.881c0,13.55,16.267,19.14,34.829,18.615c-6.081-4.558-10.196-9.991-10.223-17.256v-73.217	c-0.629-10.762-5.003-20.906-13.582-30.358c41.63-6.392,71.637-23.011,86.578-52.796c24.647-0.847,46.715,1.183,67.307,6.246	l0.914-3.723c-20.394-5.014-42.181-7.096-66.416-6.415c0.839-1.891,1.67-3.789,2.389-5.785	C415.363,248.215,438.431,248.391,461.633,250.645z M114,310.023c-1.023,0-1.853-0.588-1.853-1.313c0-0.728,0.83-1.315,1.853-1.315	c1.024,0,1.854,0.588,1.854,1.315C115.854,309.436,115.024,310.023,114,310.023z M119.833,314.003c-1.137,0-2.06-0.653-2.06-1.46	s0.923-1.462,2.06-1.462s2.059,0.655,2.059,1.462S120.97,314.003,119.833,314.003z M125.75,319.172	c-1.333,0-2.415-0.766-2.415-1.712s1.082-1.714,2.415-1.714c1.333,0,2.416,0.768,2.416,1.714S127.083,319.172,125.75,319.172z M131.5,325.379c-1.56,0-2.825-0.896-2.825-2.003s1.265-2.005,2.825-2.005s2.825,0.898,2.825,2.005S133.06,325.379,131.5,325.379z M137.833,332.394c-1.733,0-3.139-0.996-3.139-2.226s1.406-2.228,3.139-2.228s3.139,0.998,3.139,2.228	S139.566,332.394,137.833,332.394z M145.167,339.517c-1.926,0-3.488-1.107-3.488-2.474s1.562-2.476,3.488-2.476	c1.925,0,3.487,1.109,3.487,2.476S147.092,339.517,145.167,339.517z M155.083,346.291c-2.14,0-3.875-1.231-3.875-2.749	c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751C158.958,345.06,157.223,346.291,155.083,346.291z M167.375,349.916	c-2.14,0-3.875-1.231-3.875-2.749c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751	C171.25,348.685,169.515,349.916,167.375,349.916z M180.333,350.333c-2.14,0-3.875-1.231-3.875-2.749	c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751C184.208,349.102,182.473,350.333,180.333,350.333z M193.125,350.583	c-2.14,0-3.875-1.231-3.875-2.749c0-1.519,1.735-2.751,3.875-2.751s3.875,1.232,3.875,2.751	C197,349.352,195.265,350.583,193.125,350.583z"/></svg></span></a></li><li data-reactid=".20v217rw9og.0.0.0:3.0.1.0.$https=2//twitter=1com/putaindecode_fr/"><a href="https://twitter.com/putaindecode_fr/" data-r-tooltip="Twitter" class="r-Tooltip r-Tooltip--top" data-reactid=".20v217rw9og.0.0.0:3.0.1.0.$https=2//twitter=1com/putaindecode_fr/.0"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".20v217rw9og.0.0.0:3.0.1.0.$https=2//twitter=1com/putaindecode_fr/.0.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M462,128.223c-15.158,6.724-31.449,11.269-48.547,13.31c17.449-10.461,30.854-27.025,37.164-46.764	c-16.333,9.687-34.422,16.721-53.676,20.511c-15.418-16.428-37.386-26.691-61.698-26.691c-54.56,0-94.668,50.916-82.337,103.787	c-70.25-3.524-132.534-37.177-174.223-88.314c-22.142,37.983-11.485,87.691,26.158,112.85c-13.854-0.438-26.891-4.241-38.285-10.574	c-0.917,39.162,27.146,75.781,67.795,83.949c-11.896,3.237-24.926,3.978-38.17,1.447c10.754,33.58,41.972,58.018,78.96,58.699	C139.604,378.282,94.846,390.721,50,385.436c37.406,23.982,81.837,37.977,129.571,37.977c156.932,0,245.595-132.551,240.251-251.435	C436.339,160.061,450.668,145.174,462,128.223z"/></svg></span></a></li><li data-reactid=".20v217rw9og.0.0.0:3.0.1.0.$/discuss/"><a href="/discuss/" data-r-tooltip="Discuter" class="r-Tooltip r-Tooltip--top" data-reactid=".20v217rw9og.0.0.0:3.0.1.0.$/discuss/.0"><span class="SVGIcon SVGIcon--cleaned putainde-Icon" data-reactid=".20v217rw9og.0.0.0:3.0.1.0.$/discuss/.0.0"><svg class="SVGIcon-svg SVGIcon--cleaned-svg putainde-Icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M174.059,354.374c-0.031-0.008-0.062-0.014-0.093-0.021	c-25.892,15.965-82.983,32.107-123.141,39.412c14.984-29.725,31.616-70.527,30.764-98.977C61.403,270.511,50,239.224,50,207.358	c0-89.84,87.383-155.527,185.209-155.527c97.22,0,185.211,65.193,185.211,155.527c0,1.283-0.027,2.564-0.066,3.844	c-11.285-6.088-23.506-11.037-36.622-14.68c-6.854-60.861-70.842-108.715-148.522-108.715c-82.237,0-149.141,53.631-149.141,119.551	c0,34.688,15.009,56.529,36.192,78.068c-4.306,31.98-14.646,59.781-14.646,59.781s30.542-8.064,65.253-28.275	C171.395,329.616,171.806,342.101,174.059,354.374z M461.432,460.169c-27.634-5.029-66.922-16.137-84.739-27.123	c-98.102,24.029-169.6-36.424-169.6-101.154c0-62.166,60.552-107.029,127.453-107.029c67.322,0,127.454,45.203,127.454,107.029	c0,21.928-7.85,43.457-21.738,60.164C439.674,411.634,451.121,439.712,461.432,460.169z M302.524,333.198	c0-9.648-7.841-17.469-17.515-17.469c-9.673,0-17.515,7.82-17.515,17.469s7.842,17.471,17.515,17.471	C294.684,350.669,302.524,342.847,302.524,333.198z M354.75,333.198c0-9.648-7.841-17.469-17.515-17.469	c-9.673,0-17.515,7.82-17.515,17.469s7.842,17.471,17.515,17.471C346.909,350.669,354.75,342.847,354.75,333.198z M406.339,333.198	c0-9.648-7.842-17.469-17.515-17.469c-9.674,0-17.515,7.82-17.515,17.469s7.841,17.471,17.515,17.471	C398.497,350.669,406.339,342.847,406.339,333.198z"/></svg></span></a></li></ul></div><div class="r-Grid-cell r-minM--1of4 putainde-Footer-text--right" data-reactid=".20v217rw9og.0.0.0:3.0.2"><span class="putainde-Footer-text putainde-Footer-text--small" data-reactid=".20v217rw9og.0.0.0:3.0.2.0"><a class="" href="/en/" data-reactid=".20v217rw9og.0.0.0:3.0.2.0.0">English</a><span data-reactid=".20v217rw9og.0.0.0:3.0.2.0.1"> | </span><a class="" href="/fr/" data-reactid=".20v217rw9og.0.0.0:3.0.2.0.2">Français</a></span></div></div></div><script data-reactid=".20v217rw9og.0.0.1"></script></div></div></div></div><script>window.__INITIAL_STATE__ = {"pages":{"fr/articles/js/webpack/premier-exemple":{"head":{"layout":"Post","comments":true,"date":"2015-07-21","title":"Premier exemple d'utilisation de Webpack","tags":["javascript","task-runner"],"authors":["MoOx"],"header":{"image":"../index.jpg","credit":"http://webpack.github.io/","linearGradient":"160deg, rgb(204, 51, 51), rgba(204, 51, 51, .6)"}},"body":"<p>Si vous êtes intéressé par\n<a href=\"/fr/articles/js/webpack/\">les problématiques que peut résoudre Webpack</a>,\nvous serez sûrement intéressé par cette petite configuration détaillée, qui vous\npermettra de faire vos premiers pas avec cet outil.</p>\n<p>Nous allons mettre en place une configuration assez basique qui\nva permettre :</p>\n<ul>\n<li>d’avoir une partie JavaScript pour votre application/site web,</li>\n<li>de consommer vos CSS en tant que modules,</li>\n<li>de consommer les assets de vos CSS en tant que module (images, fonts…),</li>\n<li>d’avoir un fichier JS, un fichier CSS et vos assets à côté.</li>\n</ul>\n<p><em>Note: si vous êtes sur une application JavaScript, vous ne serez pas obligé\nd’utiliser la partie pour l’extraction de la CSS en fichier.\nEn effet, Webpack consomme tout ce qui est possible en JavaScript.\nLes styles peuvent être introduit via des balises <code>&lt;styles&gt;</code> dynamiquement\n(via le <code>style-loader</code>).\nL’extraction prend du sens si vous avez un rendu serveur et que vous souhaitez\navoir des styles au plus tôt, via une CSS dediée.</em></p>\n<p>La configuration de Webpack se fait via un fichier JavaScript.\nPar défaut, il doit être nommé <code>webpack.config.js</code>.\nNe tournons pas autour du pot et voyons un fichier de configuration\ncorrespondant à ce que nous venons de décrire.</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> path = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">\"path\"</span>)\n<span class=\"hljs-keyword\">var</span> webpack = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">\"webpack\"</span>)\n<span class=\"hljs-keyword\">var</span> ExtractTextPlugin = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">\"extract-text-webpack-plugin\"</span>)\n\n<span class=\"hljs-comment\">// on peut passer à notre commande de build l'option --production</span>\n<span class=\"hljs-comment\">// on récupère sa valeur ici en tant que booléen</span>\n<span class=\"hljs-keyword\">var</span> production = process.argv.indexOf(<span class=\"hljs-string\">\"--production\"</span>) &gt; -<span class=\"hljs-number\">1</span>\n\n<span class=\"hljs-built_in\">module</span>.exports = {\n  <span class=\"hljs-comment\">// nos points d'entrée, par clé</span>\n  <span class=\"hljs-comment\">// (on peut en définir plusieurs)</span>\n  entry: {\n    index: [\n      <span class=\"hljs-string\">\"./src/index.js\"</span>,\n    ],\n  },\n\n  <span class=\"hljs-comment\">// description de nos sorties</span>\n  output: {\n    <span class=\"hljs-comment\">// ./dist</span>\n    path: path.join(__dirname, <span class=\"hljs-string\">\"dist\"</span>),\n    <span class=\"hljs-comment\">// nous aurons (vu notre point d'entrée)</span>\n    <span class=\"hljs-comment\">// - dist/index.js</span>\n    filename: <span class=\"hljs-string\">\"[name].js\"</span>,\n    <span class=\"hljs-comment\">// notre base url</span>\n    publicPath: <span class=\"hljs-string\">\"/\"</span>,\n  },\n\n  resolve: {\n    <span class=\"hljs-comment\">// ici, on peut ajouter nos extensions à résoudre lors d'un require()</span>\n    <span class=\"hljs-comment\">// on va rester simple en n'autorisant rien, ou .js(on) (comme en nodejs et</span>\n    <span class=\"hljs-comment\">// browserify)</span>\n    extensions: [\n      <span class=\"hljs-string\">\"\"</span>,\n      <span class=\"hljs-string\">\".js\"</span>,\n      <span class=\"hljs-string\">\".json\"</span>,\n    ],\n  },\n\n  <span class=\"hljs-built_in\">module</span>: {\n    <span class=\"hljs-comment\">// liste de nos loaders</span>\n    <span class=\"hljs-comment\">// ! \\\\ à noter que les loaders sont exécutés en ordre inverse</span>\n    <span class=\"hljs-comment\">// les premiers en dernier, en utilisant la sortie du suivant</span>\n    loaders: [\n      {\n        <span class=\"hljs-comment\">// pour tous les fichiers qui finissent par .js</span>\n        test: <span class=\"hljs-regexp\">/\\.js$/</span>,\n        <span class=\"hljs-comment\">// ... en prenant bien soin d'exclure les node_modules</span>\n        exclude: <span class=\"hljs-regexp\">/node_modules/</span>,\n\n        <span class=\"hljs-comment\">// on ajoute les loaders babel et eslint</span>\n        <span class=\"hljs-comment\">// à vous de voir ce que vous aurez besoin</span>\n        <span class=\"hljs-comment\">// (\"rien\" est une option tout à fait valable si vous codez en ES5</span>\n        <span class=\"hljs-comment\">// sans linter)</span>\n        loaders: [\n          <span class=\"hljs-string\">\"babel\"</span>,\n          <span class=\"hljs-string\">\"eslint\"</span>,\n        ],\n\n        <span class=\"hljs-comment\">// à noter que l'on peut définir les loaders de cette façon</span>\n        <span class=\"hljs-comment\">// loader: \"babel!eslint\",</span>\n\n        <span class=\"hljs-comment\">// à noter aussi, Webpack va tenter de loader des modules ayant dans</span>\n        <span class=\"hljs-comment\">// leur nom \"-loader\". Si ce n'était pas le cas, ou que votre loader</span>\n        <span class=\"hljs-comment\">// ne comporte pas -loader, vous pouvez spécifier le nom entier :</span>\n        <span class=\"hljs-comment\">// loader: \"babel-loader!eslint-loader\",</span>\n      },\n      <span class=\"hljs-comment\">// à l'inverse de node et browserify, Webpack ne gère pas les json</span>\n      <span class=\"hljs-comment\">// nativement, il faut donc un loader pour que cela soit transparent</span>\n      {\n        test: <span class=\"hljs-regexp\">/\\.json$/</span>,\n        loaders: [\n          <span class=\"hljs-string\">\"json\"</span>,\n        ],\n      },\n      {\n        <span class=\"hljs-comment\">// pour nos CSS, on va utiliser un plugin un peu particulier</span>\n        <span class=\"hljs-comment\">// qui va nous permettre de require() nos CSS comme un module</span>\n        <span class=\"hljs-comment\">// mais qui va tout de même permettre de sortir tout cela dans un seul</span>\n        <span class=\"hljs-comment\">// fichier .css pour la production</span>\n        <span class=\"hljs-comment\">// (selon un paramètre qu'on définira ci-dessous)</span>\n        test: <span class=\"hljs-regexp\">/\\.css$/</span>,\n        <span class=\"hljs-comment\">// cette méthode possède 2 paramètres :</span>\n        <span class=\"hljs-comment\">// + loaders à utiliser si ce module est désactivé</span>\n        <span class=\"hljs-comment\">// + loaders à utiliser dans tous les cas en amont</span>\n        loader: ExtractTextPlugin.extract(\n          <span class=\"hljs-comment\">// si on extract pas, on utilisera le loader suivant</span>\n          <span class=\"hljs-comment\">// (ce module chargera les styles dans des tags &lt;style&gt;, suffisant</span>\n          <span class=\"hljs-comment\">// en mode dév)</span>\n          <span class=\"hljs-comment\">// en production vous devrez vous charger d'utiliser un</span>\n          <span class=\"hljs-comment\">// &lt;link rel=\"stylesheet\" ...</span>\n          <span class=\"hljs-string\">\"style\"</span>,\n          <span class=\"hljs-comment\">// dans tous les cas, on utilisera cssnext ainsi que le loader CSS</span>\n          <span class=\"hljs-comment\">// de base (celui-ci permet de gérer les ressources dans le CSS</span>\n          <span class=\"hljs-comment\">// en temps que modules: images, font etc)</span>\n          <span class=\"hljs-string\">\"css!cssnext\"</span>\n        ),\n        <span class=\"hljs-comment\">// Si vous n'avez pas besoin d'avoir une CSS à part, vous pouvez</span>\n        <span class=\"hljs-comment\">// simplement supprimer la partie \"loader\" ci-dessus et utiliser plutôt</span>\n        <span class=\"hljs-comment\">// loaders: [</span>\n        <span class=\"hljs-comment\">//  \"style\",</span>\n        <span class=\"hljs-comment\">//  \"css\",</span>\n        <span class=\"hljs-comment\">//  \"cssnext\",</span>\n        <span class=\"hljs-comment\">// ],</span>\n        <span class=\"hljs-comment\">// À noter que dans ce cas, il vous faudra supprimer le plugin</span>\n        <span class=\"hljs-comment\">// ExtractTextPlugin dans la liste plus bas</span>\n      },\n      <span class=\"hljs-comment\">// pour la suite, on va rester simple :</span>\n      <span class=\"hljs-comment\">// un require() en utilisant le file-loader retournera une string avec</span>\n      <span class=\"hljs-comment\">// le nom du fichier et (le plus important) copiera le fichier suivant</span>\n      <span class=\"hljs-comment\">// le paramètre \"name\" dans l'output.path que nous avons défini tout</span>\n      <span class=\"hljs-comment\">// au début de notre configuration.</span>\n      <span class=\"hljs-comment\">// Notez qu'il dégagera la partie context du nom lors du retour en string</span>\n      <span class=\"hljs-comment\">// et la remplacera par le l'output.path défini pour la copie.</span>\n      {\n        <span class=\"hljs-comment\">// on chargera tous les formats d'images qui nous intéressent en tant</span>\n        <span class=\"hljs-comment\">// que fichiers.</span>\n        test: <span class=\"hljs-regexp\">/\\.(ico|jpe?g|png|gif)$/</span>,\n        loaders: [\n          <span class=\"hljs-string\">\"file?name=[path][name].[ext]&amp;context=./src\"</span>,\n          <span class=\"hljs-comment\">// Vous remarquerez ici la méthode utilisée pour définir</span>\n          <span class=\"hljs-comment\">// des options pour les loaders. Il en existe d'autres avec les</span>\n          <span class=\"hljs-comment\">// versions les plus récentes en utilisant la clé \"query\"</span>\n        ],\n      },\n      {\n        <span class=\"hljs-comment\">// idem pour les fonts</span>\n        test: <span class=\"hljs-regexp\">/\\.(woff|ttf|otf|eot\\?#.+|svg#.+)$/</span>,\n        loaders: [\n          <span class=\"hljs-string\">\"file?name=[path][name].[ext]&amp;context=./src\"</span>,\n        ],\n      },\n      {\n        <span class=\"hljs-comment\">// ici on se permet de loader des fichiers html et txt tels quels</span>\n        test: <span class=\"hljs-regexp\">/\\.(html|txt)$/</span>,\n        loaders: [\n          <span class=\"hljs-string\">\"file?name=[path][name].[ext]&amp;context=./src\"</span>,\n        ],\n      },\n    ],\n  },\n\n  <span class=\"hljs-comment\">// en plus des loaders, qui premettent eux de modifier et/ou d'exploiter le</span>\n  <span class=\"hljs-comment\">// contenu des modules, nous avons des plugins, plus globaux au processus</span>\n  plugins: (\n    [\n      <span class=\"hljs-comment\">// une partie importante dans notre cas : on active l'extraction CSS (en</span>\n      <span class=\"hljs-comment\">// production seulement)</span>\n      <span class=\"hljs-keyword\">new</span> ExtractTextPlugin(<span class=\"hljs-string\">\"[name].css\"</span>, {disable: !production}),\n\n      <span class=\"hljs-comment\">// ce plugin permet de transformer les clés passés en dur dans les</span>\n      <span class=\"hljs-comment\">// modules ainsi vous pourrez faire dans votre code js</span>\n      <span class=\"hljs-comment\">// if (__PROD__) { ... }</span>\n      <span class=\"hljs-keyword\">new</span> webpack.DefinePlugin({\n        __PROD__: production\n      }),\n    ]\n    <span class=\"hljs-comment\">// en production, on peut rajouter des plugins pour optimiser</span>\n    .concat(\n      production\n      ? [\n        <span class=\"hljs-comment\">// ici on rajoute uglify.js pour compresser nos sorties</span>\n        <span class=\"hljs-comment\">// (vous remarquerez que certain plugins sont directement livrés dans</span>\n        <span class=\"hljs-comment\">// le package webpack).</span>\n        <span class=\"hljs-keyword\">new</span> webpack.optimize.UglifyJsPlugin({\n          compress: {\n            warnings: <span class=\"hljs-literal\">false</span>,\n          },\n        }),\n      ]\n      : []\n    )\n  ),\n\n  <span class=\"hljs-comment\">// certains modules permettent de définir des options en dehors de la</span>\n  <span class=\"hljs-comment\">// définition des loaders</span>\n  cssnext: {\n    sourcemap: !production,\n    compress: production,\n  },\n}</code></pre>\n<p><em>Ce fichier est à peu près ce que nous utilisons pour notre site à l’heure où\nest écrit cet article.</em></p>\n<p>Une fois Webpack mis en place, vous aurez bien moins l’impression de bricoler\nsurtout quand il s’agit de consommer des assets de modules tiers (par exemple\nFont Awesome).</p>\n<p>Sachez que vous pouvez très facilement écrire vos propres loaders pour wrapper\nl’utilisation d’un outil qui n’aurait pas encore de loader.\n<a href=\"https://github.com/cssnext/cssnext-loader/blob/master/index.js\">Exemple du loader cssnext</a>.</p>\n<h2 id=\"utilisation\"><a class=\"markdownIt-Anchor\" href=\"#utilisation\">#</a> Utilisation</h2>\n<p>Il y a plusieurs façon d’utiliser maintenant notre configuration, la plus simple\nétant surement via CLI :</p>\n<pre><code class=\"language-console\"><span class=\"hljs-variable\">$ </span>npm install webpack\n<span class=\"hljs-variable\">$ </span>webpack</code></pre>\n<p>Cela devrait suffire à s’occuper de notre configuration. Cette commande comporte\nbien entendu tout un tas d’options qui correspondent souvent à ce que nous\navons défini juste avant.\nCela étant dit, il parait plus maintenable de gérer une fichier plutôt qu’une\nligne de commande de 3 km.</p>\n<p>Vous devriez avoir ainsi tout le résultat dans <code>dist/</code>.</p>\n<p><em>Note: Si vous rencontrez des erreurs du type\n<code>Error: Cannot resolve module 'file'</code>, c’est tout simplement que vous n’avez pas\ninstallé les loaders nécessaire. En l’occurence il faudrait installer le\n<code>file-loader</code>.</em></p>\n<p>Pour avoir tous les loaders nécessaires comme dans l’exemple ci-dessus:</p>\n<pre><code class=\"language-console\">$ npm <span class=\"hljs-tag\">i</span> -D babel-loader eslint-loader babel-eslint\n$ npm <span class=\"hljs-tag\">i</span> -D json-loader\n$ npm <span class=\"hljs-tag\">i</span> -D style-loader css-loader cssnext-loader\n$ npm <span class=\"hljs-tag\">i</span> -D file-loader</code></pre>\n<p><em>Note à propos de babel et eslint: pour le moment, il vous faudra spécifier dans\nvotre configuration eslint: <code>parser: babel-eslint</code>.</em></p>\n<p>Il y a tout un tas de façon d’utiliser Webpack via une tripotée de plugins\n(Gulp, Grunt, etc.) mais nous allons voir justement ici comment ne pas avoir\nrecours à ces solutions, ce qui nous permettra ainsi de s’alléger.</p>\n<h3 id=\"utilisation-en-d-veloppment\"><a class=\"markdownIt-Anchor\" href=\"#utilisation-en-d-veloppment\">#</a> Utilisation en développment</h3>\n<p>Webpack CLI possède une option <code>--watch</code> qui va surveiller les sources et mettre\nà jour tout le nécessaire à la moindre modification.\nÀ la différence de browserify, cette fonctionnalité est dans le core et très\nbien intégré.\nDe plus, le cache de Webpack est plutôt bien foutu. La première compilation peut\nparaître un peu lente, mais la suite est vraiment au top.</p>\n<pre><code class=\"language-console\">$ webpack <span class=\"hljs-comment\">--watch -d</span></code></pre>\n<p>L’option <code>-d</code> permet d’activer les source maps.</p>\n<p>À côté de ces options, Webpack va plus loin.</p>\n<p>En développement, nous avons besoin de servir toutes les ressources que notre\nprocessus va gérer.\nPlutôt que d’utiliser le système de fichier classique, abusé par Grunt et tout\nde même utilisé par Gulp &amp; co, Webpack fournit un <code>webpack-dev-server</code>.</p>\n<p>Ce petit serveur local permettra de servir tout ce dont nous avons besoin\n(nos JS, CSS, images, etc.) sans avoir recours au système de fichiers.</p>\n<p>Comme pour la commande <code>webpack</code>, le serveur de développement propose aussi\nune CLI basée sur l’option <code>--watch</code> mais sans l’inconvénient de l’écriture sur\ndisque :</p>\n<pre><code class=\"language-console\">$ webpack-dev-server <span class=\"hljs-comment\">--content-base dist/</span></code></pre>\n<p><em>Source: <a href=\"http://webpack.github.io/docs/webpack-dev-server.html\">http://webpack.github.io/docs/webpack-dev-server.html</a></em></p>\n<p>Une fois que votre serveur est démarré, pourrez tester que votre point d’entrée\nmarche avec <code>http://localhost:8080/index.js</code>.</p>\n<p>Il existe bien entendu une API, que nous utilisons à l’heure actuelle sur notre\nsite, afin d’ajuster notre configuration Webpack en développement, pour\nd’ajouter des fonctionnalités comme le “hot loading”.</p>\n<p>Vous avez à votre disposition\n<a href=\"https://github.com/putaindecode/putaindecode.io/blob/2c1a8f23ec05768960617625f592ea30ed6e2062/scripts/webpack-dev-server.js\">notre script dev-server</a>\n(écrit en ES6/7), ainsi que son utilisation\n<a href=\"https://github.com/putaindecode/putaindecode.io/blob/2c1a8f23ec05768960617625f592ea30ed6e2062/scripts/build.js#L154-L159\">dans notre build</a>.</p>\n<p><em>Note : pour avoir une éventuelle version plus à jour, regardez l’historique de\nces fichiers au cas où nous ayons poussé des ajustements (ou remplacer le hash\npar “master” dans l’url et priez).</em></p>\n<h4 id=\"hot-re-loading\"><a class=\"markdownIt-Anchor\" href=\"#hot-re-loading\">#</a> Hot (re)loading</h4>\n<p>Ce serveur possède bien entendu des fonctionnalités similaires au classique\n“livereload”, appelé <em>hot mode</em> (ou hot loading).</p>\n<p>Tout comme pour le livereload, il faut intégrer dans sa page un script\nparticulier. Il y a plusieurs façons de faire :</p>\n<ul>\n<li>intégrer <code>http://localhost:8080/webpack-dev-server.js</code> via un tag script</li>\n<li>ajouter <code>webpack/hot/dev-server</code> dans les tableaux des points d’entrées</li>\n</ul>\n<p><em>Source: <a href=\"http://webpack.github.io/docs/webpack-dev-server.html#hot-mode\">http://webpack.github.io/docs/webpack-dev-server.html#hot-mode</a></em></p>\n<p>Notre script dev-server référencé juste avant s’occupe d’ajouter la ressource\nautomatiquement en mode dev.</p>\n<p>À la différence d’un simple livereload, ce hot loading permet des choses qu’on\naurait jusqu’alors pas vraiment imaginées, comme du hot reload de JavaScript de\ncomposant React (sans rafraichissment complet de page, donc sans perte d’état).</p>\n<p><strong>Vous êtes invité à regarder la vidéo que vous trouverez sur la page du\n<a href=\"https://github.com/gaearon/react-hot-loader\">react-hot-loader</a>.</strong></p>\n<p>Nous n’irons pas plus loin sur ce hot mode, car il nécessiterait un articlé dédié\n(non pas que ce soit compliqué mais plus parce que c’est un sujet à part).</p>\n<h3 id=\"utilisation-en-production\"><a class=\"markdownIt-Anchor\" href=\"#utilisation-en-production\">#</a> Utilisation en production</h3>\n<pre><code class=\"language-console\">$ webpack <span class=\"hljs-comment\">--production</span></code></pre>\n<p>Notre configuration détecte l’option <code>--production</code> et ajuste déjà en\nconséquence.\nIl faut éventuellement utiliser la variable prévue pour ajuster vos loaders s’il\npropose des options d’optimisation.</p>\n<p>Maintenant, il n’y aura plus qu’à voir tout le résultat dans <code>dist/</code>.</p>\n<hr>\n<p>Nous avons vu ici un exemple assez simple qui peut être utilisé pour un site web\nou une appplication simple.</p>\n<p>Une question se pose alors :</p>\n<blockquote>\n<p>À la vue de ce que peut gérer Webpack et ses loaders, est-il pertinent de\ncontinuer à utiliser des task runners pour nos assets et compagnie ?</p>\n</blockquote>\n<p><strong>La réponse est non.</strong> 😱</p>\n<p>Vous verrez assez rapidement que vous devriez pourvoir tout jeter à la poubelle.\nSans trop de regrets, puisque Webpack va vous permettre de consommer tout ce que\nnous avions l’habitude de bricoler / copier / ajuster…</p>\n<p>Nous l’avons fait pour notre site, pourquoi pas vous ?</p>\n<p>Et notre interface n’as pas changé d’un poil puisque nous utilisons toujours les\nmêmes commandes via les\n<a href=\"https://docs.npmjs.com/misc/scripts\">npm scripts</a>:</p>\n<ul>\n<li><code>npm start</code> pour dév</li>\n<li><code>npm run build --production</code> avant de déployer en production.</li>\n</ul>\n<p>Il existe encore beaucoup de leviers à toucher dans le cas\nd’applications full JavaScript afin d’améliorer bien des points.</p>\n<p>Vous trouverez facilement tout un tas de\n<a href=\"https://duckduckgo.com/?q=webpack+boilerplate\">boilerplates Webpack</a>\navec des améliorations diverses et variées selon vos besoins.</p>\n<p>Soyez curieux !</p>\n","rawBody":"\nSi vous êtes intéressé par\n[les problématiques que peut résoudre Webpack](/fr/articles/js/webpack/),\nvous serez sûrement intéressé par cette petite configuration détaillée, qui vous\npermettra de faire vos premiers pas avec cet outil.\n\nNous allons mettre en place une configuration assez basique qui\nva permettre :\n\n- d'avoir une partie JavaScript pour votre application/site web,\n- de consommer vos CSS en tant que modules,\n- de consommer les assets de vos CSS en tant que module (images, fonts...),\n- d'avoir un fichier JS, un fichier CSS et vos assets à côté.\n\n_Note: si vous êtes sur une application JavaScript, vous ne serez pas obligé\nd'utiliser la partie pour l'extraction de la CSS en fichier.\nEn effet, Webpack consomme tout ce qui est possible en JavaScript.\nLes styles peuvent être introduit via des balises `<styles>` dynamiquement\n(via le `style-loader`).\nL'extraction prend du sens si vous avez un rendu serveur et que vous souhaitez\navoir des styles au plus tôt, via une CSS dediée._\n\nLa configuration de Webpack se fait via un fichier JavaScript.\nPar défaut, il doit être nommé `webpack.config.js`.\nNe tournons pas autour du pot et voyons un fichier de configuration\ncorrespondant à ce que nous venons de décrire.\n\n```js\nvar path = require(\"path\")\nvar webpack = require(\"webpack\")\nvar ExtractTextPlugin = require(\"extract-text-webpack-plugin\")\n\n// on peut passer à notre commande de build l'option --production\n// on récupère sa valeur ici en tant que booléen\nvar production = process.argv.indexOf(\"--production\") > -1\n\nmodule.exports = {\n  // nos points d'entrée, par clé\n  // (on peut en définir plusieurs)\n  entry: {\n    index: [\n      \"./src/index.js\",\n    ],\n  },\n\n  // description de nos sorties\n  output: {\n    // ./dist\n    path: path.join(__dirname, \"dist\"),\n    // nous aurons (vu notre point d'entrée)\n    // - dist/index.js\n    filename: \"[name].js\",\n    // notre base url\n    publicPath: \"/\",\n  },\n\n  resolve: {\n    // ici, on peut ajouter nos extensions à résoudre lors d'un require()\n    // on va rester simple en n'autorisant rien, ou .js(on) (comme en nodejs et\n    // browserify)\n    extensions: [\n      \"\",\n      \".js\",\n      \".json\",\n    ],\n  },\n\n  module: {\n    // liste de nos loaders\n    // ! \\\\ à noter que les loaders sont exécutés en ordre inverse\n    // les premiers en dernier, en utilisant la sortie du suivant\n    loaders: [\n      {\n        // pour tous les fichiers qui finissent par .js\n        test: /\\.js$/,\n        // ... en prenant bien soin d'exclure les node_modules\n        exclude: /node_modules/,\n\n        // on ajoute les loaders babel et eslint\n        // à vous de voir ce que vous aurez besoin\n        // (\"rien\" est une option tout à fait valable si vous codez en ES5\n        // sans linter)\n        loaders: [\n          \"babel\",\n          \"eslint\",\n        ],\n\n        // à noter que l'on peut définir les loaders de cette façon\n        // loader: \"babel!eslint\",\n\n        // à noter aussi, Webpack va tenter de loader des modules ayant dans\n        // leur nom \"-loader\". Si ce n'était pas le cas, ou que votre loader\n        // ne comporte pas -loader, vous pouvez spécifier le nom entier :\n        // loader: \"babel-loader!eslint-loader\",\n      },\n      // à l'inverse de node et browserify, Webpack ne gère pas les json\n      // nativement, il faut donc un loader pour que cela soit transparent\n      {\n        test: /\\.json$/,\n        loaders: [\n          \"json\",\n        ],\n      },\n      {\n        // pour nos CSS, on va utiliser un plugin un peu particulier\n        // qui va nous permettre de require() nos CSS comme un module\n        // mais qui va tout de même permettre de sortir tout cela dans un seul\n        // fichier .css pour la production\n        // (selon un paramètre qu'on définira ci-dessous)\n        test: /\\.css$/,\n        // cette méthode possède 2 paramètres :\n        // + loaders à utiliser si ce module est désactivé\n        // + loaders à utiliser dans tous les cas en amont\n        loader: ExtractTextPlugin.extract(\n          // si on extract pas, on utilisera le loader suivant\n          // (ce module chargera les styles dans des tags <style>, suffisant\n          // en mode dév)\n          // en production vous devrez vous charger d'utiliser un\n          // <link rel=\"stylesheet\" ...\n          \"style\",\n          // dans tous les cas, on utilisera cssnext ainsi que le loader CSS\n          // de base (celui-ci permet de gérer les ressources dans le CSS\n          // en temps que modules: images, font etc)\n          \"css!cssnext\"\n        ),\n        // Si vous n'avez pas besoin d'avoir une CSS à part, vous pouvez\n        // simplement supprimer la partie \"loader\" ci-dessus et utiliser plutôt\n        // loaders: [\n        //  \"style\",\n        //  \"css\",\n        //  \"cssnext\",\n        // ],\n        // À noter que dans ce cas, il vous faudra supprimer le plugin\n        // ExtractTextPlugin dans la liste plus bas\n      },\n      // pour la suite, on va rester simple :\n      // un require() en utilisant le file-loader retournera une string avec\n      // le nom du fichier et (le plus important) copiera le fichier suivant\n      // le paramètre \"name\" dans l'output.path que nous avons défini tout\n      // au début de notre configuration.\n      // Notez qu'il dégagera la partie context du nom lors du retour en string\n      // et la remplacera par le l'output.path défini pour la copie.\n      {\n        // on chargera tous les formats d'images qui nous intéressent en tant\n        // que fichiers.\n        test: /\\.(ico|jpe?g|png|gif)$/,\n        loaders: [\n          \"file?name=[path][name].[ext]&context=./src\",\n          // Vous remarquerez ici la méthode utilisée pour définir\n          // des options pour les loaders. Il en existe d'autres avec les\n          // versions les plus récentes en utilisant la clé \"query\"\n        ],\n      },\n      {\n        // idem pour les fonts\n        test: /\\.(woff|ttf|otf|eot\\?#.+|svg#.+)$/,\n        loaders: [\n          \"file?name=[path][name].[ext]&context=./src\",\n        ],\n      },\n      {\n        // ici on se permet de loader des fichiers html et txt tels quels\n        test: /\\.(html|txt)$/,\n        loaders: [\n          \"file?name=[path][name].[ext]&context=./src\",\n        ],\n      },\n    ],\n  },\n\n  // en plus des loaders, qui premettent eux de modifier et/ou d'exploiter le\n  // contenu des modules, nous avons des plugins, plus globaux au processus\n  plugins: (\n    [\n      // une partie importante dans notre cas : on active l'extraction CSS (en\n      // production seulement)\n      new ExtractTextPlugin(\"[name].css\", {disable: !production}),\n\n      // ce plugin permet de transformer les clés passés en dur dans les\n      // modules ainsi vous pourrez faire dans votre code js\n      // if (__PROD__) { ... }\n      new webpack.DefinePlugin({\n        __PROD__: production\n      }),\n    ]\n    // en production, on peut rajouter des plugins pour optimiser\n    .concat(\n      production\n      ? [\n        // ici on rajoute uglify.js pour compresser nos sorties\n        // (vous remarquerez que certain plugins sont directement livrés dans\n        // le package webpack).\n        new webpack.optimize.UglifyJsPlugin({\n          compress: {\n            warnings: false,\n          },\n        }),\n      ]\n      : []\n    )\n  ),\n\n  // certains modules permettent de définir des options en dehors de la\n  // définition des loaders\n  cssnext: {\n    sourcemap: !production,\n    compress: production,\n  },\n}\n```\n\n_Ce fichier est à peu près ce que nous utilisons pour notre site à l'heure où\nest écrit cet article._\n\nUne fois Webpack mis en place, vous aurez bien moins l'impression de bricoler\nsurtout quand il s'agit de consommer des assets de modules tiers (par exemple\nFont Awesome).\n\nSachez que vous pouvez très facilement écrire vos propres loaders pour wrapper\nl'utilisation d'un outil qui n'aurait pas encore de loader.\n[Exemple du loader cssnext](https://github.com/cssnext/cssnext-loader/blob/master/index.js).\n\n## Utilisation\n\nIl y a plusieurs façon d'utiliser maintenant notre configuration, la plus simple\nétant surement via CLI :\n\n```console\n$ npm install webpack\n$ webpack\n```\n\nCela devrait suffire à s'occuper de notre configuration. Cette commande comporte\nbien entendu tout un tas d'options qui correspondent souvent à ce que nous\navons défini juste avant.\nCela étant dit, il parait plus maintenable de gérer une fichier plutôt qu'une\nligne de commande de 3 km.\n\nVous devriez avoir ainsi tout le résultat dans `dist/`.\n\n_Note: Si vous rencontrez des erreurs du type\n`Error: Cannot resolve module 'file'`, c'est tout simplement que vous n'avez pas\ninstallé les loaders nécessaire. En l'occurence il faudrait installer le\n`file-loader`._\n\nPour avoir tous les loaders nécessaires comme dans l'exemple ci-dessus:\n\n```console\n$ npm i -D babel-loader eslint-loader babel-eslint\n$ npm i -D json-loader\n$ npm i -D style-loader css-loader cssnext-loader\n$ npm i -D file-loader\n```\n_Note à propos de babel et eslint: pour le moment, il vous faudra spécifier dans\nvotre configuration eslint: `parser: babel-eslint`._\n\nIl y a tout un tas de façon d'utiliser Webpack via une tripotée de plugins\n(Gulp, Grunt, etc.) mais nous allons voir justement ici comment ne pas avoir\nrecours à ces solutions, ce qui nous permettra ainsi de s'alléger.\n\n### Utilisation en développment\n\nWebpack CLI possède une option `--watch` qui va surveiller les sources et mettre\nà jour tout le nécessaire à la moindre modification.\nÀ la différence de browserify, cette fonctionnalité est dans le core et très\nbien intégré.\nDe plus, le cache de Webpack est plutôt bien foutu. La première compilation peut\nparaître un peu lente, mais la suite est vraiment au top.\n\n```console\n$ webpack --watch -d\n```\n\nL'option `-d` permet d'activer les source maps.\n\nÀ côté de ces options, Webpack va plus loin.\n\nEn développement, nous avons besoin de servir toutes les ressources que notre\nprocessus va gérer.\nPlutôt que d'utiliser le système de fichier classique, abusé par Grunt et tout\nde même utilisé par Gulp & co, Webpack fournit un `webpack-dev-server`.\n\nCe petit serveur local permettra de servir tout ce dont nous avons besoin\n(nos JS, CSS, images, etc.) sans avoir recours au système de fichiers.\n\nComme pour la commande `webpack`, le serveur de développement propose aussi\nune CLI basée sur l'option `--watch` mais sans l'inconvénient de l'écriture sur\ndisque :\n\n```console\n$ webpack-dev-server --content-base dist/\n```\n\n_Source: http://webpack.github.io/docs/webpack-dev-server.html_\n\nUne fois que votre serveur est démarré, pourrez tester que votre point d'entrée\nmarche avec `http://localhost:8080/index.js`.\n\nIl existe bien entendu une API, que nous utilisons à l'heure actuelle sur notre\nsite, afin d'ajuster notre configuration Webpack en développement, pour\nd'ajouter des fonctionnalités comme le \"hot loading\".\n\nVous avez à votre disposition\n[notre script dev-server](https://github.com/putaindecode/putaindecode.io/blob/2c1a8f23ec05768960617625f592ea30ed6e2062/scripts/webpack-dev-server.js)\n(écrit en ES6/7), ainsi que son utilisation\n[dans notre build](https://github.com/putaindecode/putaindecode.io/blob/2c1a8f23ec05768960617625f592ea30ed6e2062/scripts/build.js#L154-L159).\n\n_Note : pour avoir une éventuelle version plus à jour, regardez l'historique de\nces fichiers au cas où nous ayons poussé des ajustements (ou remplacer le hash\npar \"master\" dans l'url et priez)._\n\n#### Hot (re)loading\n\nCe serveur possède bien entendu des fonctionnalités similaires au classique\n\"livereload\", appelé _hot mode_ (ou hot loading).\n\nTout comme pour le livereload, il faut intégrer dans sa page un script\nparticulier. Il y a plusieurs façons de faire :\n\n- intégrer `http://localhost:8080/webpack-dev-server.js` via un tag script\n- ajouter `webpack/hot/dev-server` dans les tableaux des points d'entrées\n\n_Source: http://webpack.github.io/docs/webpack-dev-server.html#hot-mode_\n\nNotre script dev-server référencé juste avant s'occupe d'ajouter la ressource\nautomatiquement en mode dev.\n\nÀ la différence d'un simple livereload, ce hot loading permet des choses qu'on\naurait jusqu'alors pas vraiment imaginées, comme du hot reload de JavaScript de\ncomposant React (sans rafraichissment complet de page, donc sans perte d'état).\n\n**Vous êtes invité à regarder la vidéo que vous trouverez sur la page du\n[react-hot-loader](https://github.com/gaearon/react-hot-loader).**\n\nNous n'irons pas plus loin sur ce hot mode, car il nécessiterait un articlé dédié\n(non pas que ce soit compliqué mais plus parce que c'est un sujet à part).\n\n### Utilisation en production\n\n```console\n$ webpack --production\n```\n\nNotre configuration détecte l'option `--production` et ajuste déjà en\nconséquence.\nIl faut éventuellement utiliser la variable prévue pour ajuster vos loaders s'il\npropose des options d'optimisation.\n\nMaintenant, il n'y aura plus qu'à voir tout le résultat dans `dist/`.\n\n---\n\nNous avons vu ici un exemple assez simple qui peut être utilisé pour un site web\nou une appplication simple.\n\nUne question se pose alors :\n\n> À la vue de ce que peut gérer Webpack et ses loaders, est-il pertinent de\ncontinuer à utiliser des task runners pour nos assets et compagnie ?\n\n**La réponse est non.** 😱\n\nVous verrez assez rapidement que vous devriez pourvoir tout jeter à la poubelle.\nSans trop de regrets, puisque Webpack va vous permettre de consommer tout ce que\nnous avions l'habitude de bricoler / copier / ajuster...\n\nNous l'avons fait pour notre site, pourquoi pas vous ?\n\nEt notre interface n'as pas changé d'un poil puisque nous utilisons toujours les\nmêmes commandes via les\n[npm scripts](https://docs.npmjs.com/misc/scripts):\n\n- `npm start` pour dév\n- `npm run build --production` avant de déployer en production.\n\nIl existe encore beaucoup de leviers à toucher dans le cas\nd'applications full JavaScript afin d'améliorer bien des points.\n\nVous trouverez facilement tout un tas de\n[boilerplates Webpack](https://duckduckgo.com/?q=webpack+boilerplate)\navec des améliorations diverses et variées selon vos besoins.\n\nSoyez curieux !\n","raw":"---\ndate: \"2015-07-21\"\ntitle: Premier exemple d'utilisation de Webpack\ntags:\n  - javascript\n  - task-runner\nauthors:\n  - MoOx\nheader:\n  image: ../index.jpg\n  credit: http://webpack.github.io/\n  linearGradient: 160deg, rgb(204, 51, 51), rgba(204, 51, 51, .6)\n---\n\nSi vous êtes intéressé par\n[les problématiques que peut résoudre Webpack](/fr/articles/js/webpack/),\nvous serez sûrement intéressé par cette petite configuration détaillée, qui vous\npermettra de faire vos premiers pas avec cet outil.\n\nNous allons mettre en place une configuration assez basique qui\nva permettre :\n\n- d'avoir une partie JavaScript pour votre application/site web,\n- de consommer vos CSS en tant que modules,\n- de consommer les assets de vos CSS en tant que module (images, fonts...),\n- d'avoir un fichier JS, un fichier CSS et vos assets à côté.\n\n_Note: si vous êtes sur une application JavaScript, vous ne serez pas obligé\nd'utiliser la partie pour l'extraction de la CSS en fichier.\nEn effet, Webpack consomme tout ce qui est possible en JavaScript.\nLes styles peuvent être introduit via des balises `<styles>` dynamiquement\n(via le `style-loader`).\nL'extraction prend du sens si vous avez un rendu serveur et que vous souhaitez\navoir des styles au plus tôt, via une CSS dediée._\n\nLa configuration de Webpack se fait via un fichier JavaScript.\nPar défaut, il doit être nommé `webpack.config.js`.\nNe tournons pas autour du pot et voyons un fichier de configuration\ncorrespondant à ce que nous venons de décrire.\n\n```js\nvar path = require(\"path\")\nvar webpack = require(\"webpack\")\nvar ExtractTextPlugin = require(\"extract-text-webpack-plugin\")\n\n// on peut passer à notre commande de build l'option --production\n// on récupère sa valeur ici en tant que booléen\nvar production = process.argv.indexOf(\"--production\") > -1\n\nmodule.exports = {\n  // nos points d'entrée, par clé\n  // (on peut en définir plusieurs)\n  entry: {\n    index: [\n      \"./src/index.js\",\n    ],\n  },\n\n  // description de nos sorties\n  output: {\n    // ./dist\n    path: path.join(__dirname, \"dist\"),\n    // nous aurons (vu notre point d'entrée)\n    // - dist/index.js\n    filename: \"[name].js\",\n    // notre base url\n    publicPath: \"/\",\n  },\n\n  resolve: {\n    // ici, on peut ajouter nos extensions à résoudre lors d'un require()\n    // on va rester simple en n'autorisant rien, ou .js(on) (comme en nodejs et\n    // browserify)\n    extensions: [\n      \"\",\n      \".js\",\n      \".json\",\n    ],\n  },\n\n  module: {\n    // liste de nos loaders\n    // ! \\\\ à noter que les loaders sont exécutés en ordre inverse\n    // les premiers en dernier, en utilisant la sortie du suivant\n    loaders: [\n      {\n        // pour tous les fichiers qui finissent par .js\n        test: /\\.js$/,\n        // ... en prenant bien soin d'exclure les node_modules\n        exclude: /node_modules/,\n\n        // on ajoute les loaders babel et eslint\n        // à vous de voir ce que vous aurez besoin\n        // (\"rien\" est une option tout à fait valable si vous codez en ES5\n        // sans linter)\n        loaders: [\n          \"babel\",\n          \"eslint\",\n        ],\n\n        // à noter que l'on peut définir les loaders de cette façon\n        // loader: \"babel!eslint\",\n\n        // à noter aussi, Webpack va tenter de loader des modules ayant dans\n        // leur nom \"-loader\". Si ce n'était pas le cas, ou que votre loader\n        // ne comporte pas -loader, vous pouvez spécifier le nom entier :\n        // loader: \"babel-loader!eslint-loader\",\n      },\n      // à l'inverse de node et browserify, Webpack ne gère pas les json\n      // nativement, il faut donc un loader pour que cela soit transparent\n      {\n        test: /\\.json$/,\n        loaders: [\n          \"json\",\n        ],\n      },\n      {\n        // pour nos CSS, on va utiliser un plugin un peu particulier\n        // qui va nous permettre de require() nos CSS comme un module\n        // mais qui va tout de même permettre de sortir tout cela dans un seul\n        // fichier .css pour la production\n        // (selon un paramètre qu'on définira ci-dessous)\n        test: /\\.css$/,\n        // cette méthode possède 2 paramètres :\n        // + loaders à utiliser si ce module est désactivé\n        // + loaders à utiliser dans tous les cas en amont\n        loader: ExtractTextPlugin.extract(\n          // si on extract pas, on utilisera le loader suivant\n          // (ce module chargera les styles dans des tags <style>, suffisant\n          // en mode dév)\n          // en production vous devrez vous charger d'utiliser un\n          // <link rel=\"stylesheet\" ...\n          \"style\",\n          // dans tous les cas, on utilisera cssnext ainsi que le loader CSS\n          // de base (celui-ci permet de gérer les ressources dans le CSS\n          // en temps que modules: images, font etc)\n          \"css!cssnext\"\n        ),\n        // Si vous n'avez pas besoin d'avoir une CSS à part, vous pouvez\n        // simplement supprimer la partie \"loader\" ci-dessus et utiliser plutôt\n        // loaders: [\n        //  \"style\",\n        //  \"css\",\n        //  \"cssnext\",\n        // ],\n        // À noter que dans ce cas, il vous faudra supprimer le plugin\n        // ExtractTextPlugin dans la liste plus bas\n      },\n      // pour la suite, on va rester simple :\n      // un require() en utilisant le file-loader retournera une string avec\n      // le nom du fichier et (le plus important) copiera le fichier suivant\n      // le paramètre \"name\" dans l'output.path que nous avons défini tout\n      // au début de notre configuration.\n      // Notez qu'il dégagera la partie context du nom lors du retour en string\n      // et la remplacera par le l'output.path défini pour la copie.\n      {\n        // on chargera tous les formats d'images qui nous intéressent en tant\n        // que fichiers.\n        test: /\\.(ico|jpe?g|png|gif)$/,\n        loaders: [\n          \"file?name=[path][name].[ext]&context=./src\",\n          // Vous remarquerez ici la méthode utilisée pour définir\n          // des options pour les loaders. Il en existe d'autres avec les\n          // versions les plus récentes en utilisant la clé \"query\"\n        ],\n      },\n      {\n        // idem pour les fonts\n        test: /\\.(woff|ttf|otf|eot\\?#.+|svg#.+)$/,\n        loaders: [\n          \"file?name=[path][name].[ext]&context=./src\",\n        ],\n      },\n      {\n        // ici on se permet de loader des fichiers html et txt tels quels\n        test: /\\.(html|txt)$/,\n        loaders: [\n          \"file?name=[path][name].[ext]&context=./src\",\n        ],\n      },\n    ],\n  },\n\n  // en plus des loaders, qui premettent eux de modifier et/ou d'exploiter le\n  // contenu des modules, nous avons des plugins, plus globaux au processus\n  plugins: (\n    [\n      // une partie importante dans notre cas : on active l'extraction CSS (en\n      // production seulement)\n      new ExtractTextPlugin(\"[name].css\", {disable: !production}),\n\n      // ce plugin permet de transformer les clés passés en dur dans les\n      // modules ainsi vous pourrez faire dans votre code js\n      // if (__PROD__) { ... }\n      new webpack.DefinePlugin({\n        __PROD__: production\n      }),\n    ]\n    // en production, on peut rajouter des plugins pour optimiser\n    .concat(\n      production\n      ? [\n        // ici on rajoute uglify.js pour compresser nos sorties\n        // (vous remarquerez que certain plugins sont directement livrés dans\n        // le package webpack).\n        new webpack.optimize.UglifyJsPlugin({\n          compress: {\n            warnings: false,\n          },\n        }),\n      ]\n      : []\n    )\n  ),\n\n  // certains modules permettent de définir des options en dehors de la\n  // définition des loaders\n  cssnext: {\n    sourcemap: !production,\n    compress: production,\n  },\n}\n```\n\n_Ce fichier est à peu près ce que nous utilisons pour notre site à l'heure où\nest écrit cet article._\n\nUne fois Webpack mis en place, vous aurez bien moins l'impression de bricoler\nsurtout quand il s'agit de consommer des assets de modules tiers (par exemple\nFont Awesome).\n\nSachez que vous pouvez très facilement écrire vos propres loaders pour wrapper\nl'utilisation d'un outil qui n'aurait pas encore de loader.\n[Exemple du loader cssnext](https://github.com/cssnext/cssnext-loader/blob/master/index.js).\n\n## Utilisation\n\nIl y a plusieurs façon d'utiliser maintenant notre configuration, la plus simple\nétant surement via CLI :\n\n```console\n$ npm install webpack\n$ webpack\n```\n\nCela devrait suffire à s'occuper de notre configuration. Cette commande comporte\nbien entendu tout un tas d'options qui correspondent souvent à ce que nous\navons défini juste avant.\nCela étant dit, il parait plus maintenable de gérer une fichier plutôt qu'une\nligne de commande de 3 km.\n\nVous devriez avoir ainsi tout le résultat dans `dist/`.\n\n_Note: Si vous rencontrez des erreurs du type\n`Error: Cannot resolve module 'file'`, c'est tout simplement que vous n'avez pas\ninstallé les loaders nécessaire. En l'occurence il faudrait installer le\n`file-loader`._\n\nPour avoir tous les loaders nécessaires comme dans l'exemple ci-dessus:\n\n```console\n$ npm i -D babel-loader eslint-loader babel-eslint\n$ npm i -D json-loader\n$ npm i -D style-loader css-loader cssnext-loader\n$ npm i -D file-loader\n```\n_Note à propos de babel et eslint: pour le moment, il vous faudra spécifier dans\nvotre configuration eslint: `parser: babel-eslint`._\n\nIl y a tout un tas de façon d'utiliser Webpack via une tripotée de plugins\n(Gulp, Grunt, etc.) mais nous allons voir justement ici comment ne pas avoir\nrecours à ces solutions, ce qui nous permettra ainsi de s'alléger.\n\n### Utilisation en développment\n\nWebpack CLI possède une option `--watch` qui va surveiller les sources et mettre\nà jour tout le nécessaire à la moindre modification.\nÀ la différence de browserify, cette fonctionnalité est dans le core et très\nbien intégré.\nDe plus, le cache de Webpack est plutôt bien foutu. La première compilation peut\nparaître un peu lente, mais la suite est vraiment au top.\n\n```console\n$ webpack --watch -d\n```\n\nL'option `-d` permet d'activer les source maps.\n\nÀ côté de ces options, Webpack va plus loin.\n\nEn développement, nous avons besoin de servir toutes les ressources que notre\nprocessus va gérer.\nPlutôt que d'utiliser le système de fichier classique, abusé par Grunt et tout\nde même utilisé par Gulp & co, Webpack fournit un `webpack-dev-server`.\n\nCe petit serveur local permettra de servir tout ce dont nous avons besoin\n(nos JS, CSS, images, etc.) sans avoir recours au système de fichiers.\n\nComme pour la commande `webpack`, le serveur de développement propose aussi\nune CLI basée sur l'option `--watch` mais sans l'inconvénient de l'écriture sur\ndisque :\n\n```console\n$ webpack-dev-server --content-base dist/\n```\n\n_Source: http://webpack.github.io/docs/webpack-dev-server.html_\n\nUne fois que votre serveur est démarré, pourrez tester que votre point d'entrée\nmarche avec `http://localhost:8080/index.js`.\n\nIl existe bien entendu une API, que nous utilisons à l'heure actuelle sur notre\nsite, afin d'ajuster notre configuration Webpack en développement, pour\nd'ajouter des fonctionnalités comme le \"hot loading\".\n\nVous avez à votre disposition\n[notre script dev-server](https://github.com/putaindecode/putaindecode.io/blob/2c1a8f23ec05768960617625f592ea30ed6e2062/scripts/webpack-dev-server.js)\n(écrit en ES6/7), ainsi que son utilisation\n[dans notre build](https://github.com/putaindecode/putaindecode.io/blob/2c1a8f23ec05768960617625f592ea30ed6e2062/scripts/build.js#L154-L159).\n\n_Note : pour avoir une éventuelle version plus à jour, regardez l'historique de\nces fichiers au cas où nous ayons poussé des ajustements (ou remplacer le hash\npar \"master\" dans l'url et priez)._\n\n#### Hot (re)loading\n\nCe serveur possède bien entendu des fonctionnalités similaires au classique\n\"livereload\", appelé _hot mode_ (ou hot loading).\n\nTout comme pour le livereload, il faut intégrer dans sa page un script\nparticulier. Il y a plusieurs façons de faire :\n\n- intégrer `http://localhost:8080/webpack-dev-server.js` via un tag script\n- ajouter `webpack/hot/dev-server` dans les tableaux des points d'entrées\n\n_Source: http://webpack.github.io/docs/webpack-dev-server.html#hot-mode_\n\nNotre script dev-server référencé juste avant s'occupe d'ajouter la ressource\nautomatiquement en mode dev.\n\nÀ la différence d'un simple livereload, ce hot loading permet des choses qu'on\naurait jusqu'alors pas vraiment imaginées, comme du hot reload de JavaScript de\ncomposant React (sans rafraichissment complet de page, donc sans perte d'état).\n\n**Vous êtes invité à regarder la vidéo que vous trouverez sur la page du\n[react-hot-loader](https://github.com/gaearon/react-hot-loader).**\n\nNous n'irons pas plus loin sur ce hot mode, car il nécessiterait un articlé dédié\n(non pas que ce soit compliqué mais plus parce que c'est un sujet à part).\n\n### Utilisation en production\n\n```console\n$ webpack --production\n```\n\nNotre configuration détecte l'option `--production` et ajuste déjà en\nconséquence.\nIl faut éventuellement utiliser la variable prévue pour ajuster vos loaders s'il\npropose des options d'optimisation.\n\nMaintenant, il n'y aura plus qu'à voir tout le résultat dans `dist/`.\n\n---\n\nNous avons vu ici un exemple assez simple qui peut être utilisé pour un site web\nou une appplication simple.\n\nUne question se pose alors :\n\n> À la vue de ce que peut gérer Webpack et ses loaders, est-il pertinent de\ncontinuer à utiliser des task runners pour nos assets et compagnie ?\n\n**La réponse est non.** 😱\n\nVous verrez assez rapidement que vous devriez pourvoir tout jeter à la poubelle.\nSans trop de regrets, puisque Webpack va vous permettre de consommer tout ce que\nnous avions l'habitude de bricoler / copier / ajuster...\n\nNous l'avons fait pour notre site, pourquoi pas vous ?\n\nEt notre interface n'as pas changé d'un poil puisque nous utilisons toujours les\nmêmes commandes via les\n[npm scripts](https://docs.npmjs.com/misc/scripts):\n\n- `npm start` pour dév\n- `npm run build --production` avant de déployer en production.\n\nIl existe encore beaucoup de leviers à toucher dans le cas\nd'applications full JavaScript afin d'améliorer bien des points.\n\nVous trouverez facilement tout un tas de\n[boilerplates Webpack](https://duckduckgo.com/?q=webpack+boilerplate)\navec des améliorations diverses et variées selon vos besoins.\n\nSoyez curieux !\n","__filename":"fr/articles/js/webpack/premier-exemple/index.md","__url":"/fr/articles/js/webpack/premier-exemple/","type":"Post"}}}</script><script src="/statinamic-client.js"></script></body></html>